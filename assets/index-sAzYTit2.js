(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var BP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qx={exports:{}},bd={},Kx={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sc=Symbol.for("react.element"),GP=Symbol.for("react.portal"),VP=Symbol.for("react.fragment"),jP=Symbol.for("react.strict_mode"),UP=Symbol.for("react.profiler"),HP=Symbol.for("react.provider"),XP=Symbol.for("react.context"),WP=Symbol.for("react.forward_ref"),YP=Symbol.for("react.suspense"),qP=Symbol.for("react.memo"),ZP=Symbol.for("react.lazy"),my=Symbol.iterator;function QP(e){return e===null||typeof e!="object"?null:(e=my&&e[my]||e["@@iterator"],typeof e=="function"?e:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eE=Object.assign,tE={};function ka(e,t,n){this.props=e,this.context=t,this.refs=tE,this.updater=n||Jx}ka.prototype.isReactComponent={};ka.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ka.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nE(){}nE.prototype=ka.prototype;function Em(e,t,n){this.props=e,this.context=t,this.refs=tE,this.updater=n||Jx}var _m=Em.prototype=new nE;_m.constructor=Em;eE(_m,ka.prototype);_m.isPureReactComponent=!0;var vy=Array.isArray,rE=Object.prototype.hasOwnProperty,$m={current:null},oE={key:!0,ref:!0,__self:!0,__source:!0};function sE(e,t,n){var r,o={},s=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(s=""+t.key),t)rE.call(t,r)&&!oE.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Sc,type:e,key:s,ref:i,props:o,_owner:$m.current}}function KP(e,t){return{$$typeof:Sc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sc}function JP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var gy=/\/+/g;function v0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?JP(""+e.key):t.toString(36)}function yf(e,t,n,r,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Sc:case GP:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+v0(i,0):r,vy(o)?(n="",e!=null&&(n=e.replace(gy,"$&/")+"/"),yf(o,t,n,"",function(c){return c})):o!=null&&(Sm(o)&&(o=KP(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(gy,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",vy(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+v0(s,a);i+=yf(s,t,n,l,o)}else if(l=QP(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+v0(s,a++),i+=yf(s,t,n,l,o);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Au(e,t,n){if(e==null)return e;var r=[],o=0;return yf(e,r,"","",function(s){return t.call(n,s,o++)}),r}function e8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Un={current:null},wf={transition:null},t8={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:wf,ReactCurrentOwner:$m};function iE(){throw Error("act(...) is not supported in production builds of React.")}yt.Children={map:Au,forEach:function(e,t,n){Au(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Au(e,function(){t++}),t},toArray:function(e){return Au(e,function(t){return t})||[]},only:function(e){if(!Sm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yt.Component=ka;yt.Fragment=VP;yt.Profiler=UP;yt.PureComponent=Em;yt.StrictMode=jP;yt.Suspense=YP;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t8;yt.act=iE;yt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=eE({},e.props),o=e.key,s=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,i=$m.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)rE.call(t,l)&&!oE.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sc,type:e.type,key:o,ref:s,props:r,_owner:i}};yt.createContext=function(e){return e={$$typeof:XP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:HP,_context:e},e.Consumer=e};yt.createElement=sE;yt.createFactory=function(e){var t=sE.bind(null,e);return t.type=e,t};yt.createRef=function(){return{current:null}};yt.forwardRef=function(e){return{$$typeof:WP,render:e}};yt.isValidElement=Sm;yt.lazy=function(e){return{$$typeof:ZP,_payload:{_status:-1,_result:e},_init:e8}};yt.memo=function(e,t){return{$$typeof:qP,type:e,compare:t===void 0?null:t}};yt.startTransition=function(e){var t=wf.transition;wf.transition={};try{e()}finally{wf.transition=t}};yt.unstable_act=iE;yt.useCallback=function(e,t){return Un.current.useCallback(e,t)};yt.useContext=function(e){return Un.current.useContext(e)};yt.useDebugValue=function(){};yt.useDeferredValue=function(e){return Un.current.useDeferredValue(e)};yt.useEffect=function(e,t){return Un.current.useEffect(e,t)};yt.useId=function(){return Un.current.useId()};yt.useImperativeHandle=function(e,t,n){return Un.current.useImperativeHandle(e,t,n)};yt.useInsertionEffect=function(e,t){return Un.current.useInsertionEffect(e,t)};yt.useLayoutEffect=function(e,t){return Un.current.useLayoutEffect(e,t)};yt.useMemo=function(e,t){return Un.current.useMemo(e,t)};yt.useReducer=function(e,t,n){return Un.current.useReducer(e,t,n)};yt.useRef=function(e){return Un.current.useRef(e)};yt.useState=function(e){return Un.current.useState(e)};yt.useSyncExternalStore=function(e,t,n){return Un.current.useSyncExternalStore(e,t,n)};yt.useTransition=function(){return Un.current.useTransition()};yt.version="18.3.1";Kx.exports=yt;var at=Kx.exports;const n8=xm(at);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r8=at,o8=Symbol.for("react.element"),s8=Symbol.for("react.fragment"),i8=Object.prototype.hasOwnProperty,a8=r8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l8={key:!0,ref:!0,__self:!0,__source:!0};function aE(e,t,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)i8.call(t,r)&&!l8.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:o8,type:e,key:s,ref:i,props:o,_owner:a8.current}}bd.Fragment=s8;bd.jsx=aE;bd.jsxs=aE;Qx.exports=bd;var je=Qx.exports,op={},lE={exports:{}},mr={},cE={exports:{}},uE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ye,Ge){var De=ye.length;ye.push(Ge);e:for(;0<De;){var rt=De-1>>>1,st=ye[rt];if(0<o(st,Ge))ye[rt]=Ge,ye[De]=st,De=rt;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var Ge=ye[0],De=ye.pop();if(De!==Ge){ye[0]=De;e:for(var rt=0,st=ye.length,Bt=st>>>1;rt<Bt;){var Tt=2*(rt+1)-1,Mt=ye[Tt],pn=Tt+1,Cn=ye[pn];if(0>o(Mt,De))pn<st&&0>o(Cn,Mt)?(ye[rt]=Cn,ye[pn]=De,rt=pn):(ye[rt]=Mt,ye[Tt]=De,rt=Tt);else if(pn<st&&0>o(Cn,De))ye[rt]=Cn,ye[pn]=De,rt=pn;else break e}}return Ge}function o(ye,Ge){var De=ye.sortIndex-Ge.sortIndex;return De!==0?De:ye.id-Ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,d=3,p=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ye){for(var Ge=n(c);Ge!==null;){if(Ge.callback===null)r(c);else if(Ge.startTime<=ye)r(c),Ge.sortIndex=Ge.expirationTime,t(l,Ge);else break;Ge=n(c)}}function E(ye){if(v=!1,w(ye),!y)if(n(l)!==null)y=!0,we(A);else{var Ge=n(c);Ge!==null&&Je(E,Ge.startTime-ye)}}function A(ye,Ge){y=!1,v&&(v=!1,m(N),N=-1),p=!0;var De=d;try{for(w(Ge),f=n(l);f!==null&&(!(f.expirationTime>Ge)||ye&&!J());){var rt=f.callback;if(typeof rt=="function"){f.callback=null,d=f.priorityLevel;var st=rt(f.expirationTime<=Ge);Ge=e.unstable_now(),typeof st=="function"?f.callback=st:f===n(l)&&r(l),w(Ge)}else r(l);f=n(l)}if(f!==null)var Bt=!0;else{var Tt=n(c);Tt!==null&&Je(E,Tt.startTime-Ge),Bt=!1}return Bt}finally{f=null,d=De,p=!1}}var $=!1,k=null,N=-1,X=5,j=-1;function J(){return!(e.unstable_now()-j<X)}function le(){if(k!==null){var ye=e.unstable_now();j=ye;var Ge=!0;try{Ge=k(!0,ye)}finally{Ge?_e():($=!1,k=null)}}else $=!1}var _e;if(typeof g=="function")_e=function(){g(le)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Me=Z.port2;Z.port1.onmessage=le,_e=function(){Me.postMessage(null)}}else _e=function(){x(le,0)};function we(ye){k=ye,$||($=!0,_e())}function Je(ye,Ge){N=x(function(){ye(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ye){ye.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,we(A))},e.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<ye?Math.floor(1e3/ye):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(ye){switch(d){case 1:case 2:case 3:var Ge=3;break;default:Ge=d}var De=d;d=Ge;try{return ye()}finally{d=De}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ye,Ge){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var De=d;d=ye;try{return Ge()}finally{d=De}},e.unstable_scheduleCallback=function(ye,Ge,De){var rt=e.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?rt+De:rt):De=rt,ye){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=De+st,ye={id:u++,callback:Ge,priorityLevel:ye,startTime:De,expirationTime:st,sortIndex:-1},De>rt?(ye.sortIndex=De,t(c,ye),n(l)===null&&ye===n(c)&&(v?(m(N),N=-1):v=!0,Je(E,De-rt))):(ye.sortIndex=st,t(l,ye),y||p||(y=!0,we(A))),ye},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(ye){var Ge=d;return function(){var De=d;d=Ge;try{return ye.apply(this,arguments)}finally{d=De}}}})(uE);cE.exports=uE;var c8=cE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8=at,pr=c8;function Ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fE=new Set,Jl={};function li(e,t){ga(e,t),ga(e+"Capture",t)}function ga(e,t){for(Jl[e]=t,e=0;e<t.length;e++)fE.add(t[e])}var Ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sp=Object.prototype.hasOwnProperty,f8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},wy={};function d8(e){return sp.call(wy,e)?!0:sp.call(yy,e)?!1:f8.test(e)?wy[e]=!0:(yy[e]=!0,!1)}function h8(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function p8(e,t,n,r){if(t===null||typeof t>"u"||h8(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hn(e,t,n,r,o,s,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bn[e]=new Hn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];bn[t]=new Hn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bn[e]=new Hn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bn[e]=new Hn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bn[e]=new Hn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bn[e]=new Hn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bn[e]=new Hn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bn[e]=new Hn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bn[e]=new Hn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Am=/[\-:]([a-z])/g;function bm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Am,bm);bn[t]=new Hn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Am,bm);bn[t]=new Hn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Am,bm);bn[t]=new Hn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bn[e]=new Hn(e,1,!1,e.toLowerCase(),null,!1,!1)});bn.xlinkHref=new Hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bn[e]=new Hn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tm(e,t,n,r){var o=bn.hasOwnProperty(t)?bn[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(p8(t,n,o,r)&&(n=null),r||o===null?d8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ko=u8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),Zi=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),ip=Symbol.for("react.profiler"),dE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),Cm=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),lp=Symbol.for("react.suspense_list"),km=Symbol.for("react.memo"),Ko=Symbol.for("react.lazy"),pE=Symbol.for("react.offscreen"),xy=Symbol.iterator;function dl(e){return e===null||typeof e!="object"?null:(e=xy&&e[xy]||e["@@iterator"],typeof e=="function"?e:null)}var Wt=Object.assign,g0;function Ll(e){if(g0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);g0=t&&t[1]||""}return`
`+g0+e}var y0=!1;function w0(e,t){if(!e||y0)return"";y0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=a);break}}}finally{y0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ll(e):""}function m8(e){switch(e.tag){case 5:return Ll(e.type);case 16:return Ll("Lazy");case 13:return Ll("Suspense");case 19:return Ll("SuspenseList");case 0:case 2:case 15:return e=w0(e.type,!1),e;case 11:return e=w0(e.type.render,!1),e;case 1:return e=w0(e.type,!0),e;default:return""}}function cp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qi:return"Fragment";case Zi:return"Portal";case ip:return"Profiler";case Pm:return"StrictMode";case ap:return"Suspense";case lp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hE:return(e.displayName||"Context")+".Consumer";case dE:return(e._context.displayName||"Context")+".Provider";case Cm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case km:return t=e.displayName||null,t!==null?t:cp(e.type)||"Memo";case Ko:t=e._payload,e=e._init;try{return cp(e(t))}catch{}}return null}function v8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cp(t);case 8:return t===Pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ps(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function g8(e){var t=mE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tu(e){e._valueTracker||(e._valueTracker=g8(e))}function vE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ff(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function up(e,t){var n=t.checked;return Wt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ey(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ps(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gE(e,t){t=t.checked,t!=null&&Tm(e,"checked",t,!1)}function fp(e,t){gE(e,t);var n=ps(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dp(e,t.type,n):t.hasOwnProperty("defaultValue")&&dp(e,t.type,ps(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _y(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function dp(e,t,n){(t!=="number"||Ff(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fl=Array.isArray;function ca(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ps(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function hp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Wt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $y(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ce(92));if(Fl(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ps(n)}}function yE(e,t){var n=ps(t.value),r=ps(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Sy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pu,xE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pu=Pu||document.createElement("div"),Pu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ec(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y8=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(e){y8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ul[t]=Ul[e]})});function EE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ul.hasOwnProperty(e)&&Ul[e]?(""+t).trim():t+"px"}function _E(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=EE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var w8=Wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mp(e,t){if(t){if(w8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ce(62))}}function vp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function Mm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yp=null,ua=null,fa=null;function Ay(e){if(e=Tc(e)){if(typeof yp!="function")throw Error(Ce(280));var t=e.stateNode;t&&(t=Md(t),yp(e.stateNode,e.type,t))}}function $E(e){ua?fa?fa.push(e):fa=[e]:ua=e}function SE(){if(ua){var e=ua,t=fa;if(fa=ua=null,Ay(e),t)for(e=0;e<t.length;e++)Ay(t[e])}}function AE(e,t){return e(t)}function bE(){}var x0=!1;function TE(e,t,n){if(x0)return e(t,n);x0=!0;try{return AE(e,t,n)}finally{x0=!1,(ua!==null||fa!==null)&&(bE(),SE())}}function tc(e,t){var n=e.stateNode;if(n===null)return null;var r=Md(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ce(231,t,typeof n));return n}var wp=!1;if(Ao)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){wp=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{wp=!1}function x8(e,t,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Hl=!1,Df=null,If=!1,xp=null,E8={onError:function(e){Hl=!0,Df=e}};function _8(e,t,n,r,o,s,i,a,l){Hl=!1,Df=null,x8.apply(E8,arguments)}function $8(e,t,n,r,o,s,i,a,l){if(_8.apply(this,arguments),Hl){if(Hl){var c=Df;Hl=!1,Df=null}else throw Error(Ce(198));If||(If=!0,xp=c)}}function ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function PE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function by(e){if(ci(e)!==e)throw Error(Ce(188))}function S8(e){var t=e.alternate;if(!t){if(t=ci(e),t===null)throw Error(Ce(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return by(o),e;if(s===r)return by(o),t;s=s.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?e:t}function CE(e){return e=S8(e),e!==null?kE(e):null}function kE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kE(e);if(t!==null)return t;e=e.sibling}return null}var ME=pr.unstable_scheduleCallback,Ty=pr.unstable_cancelCallback,A8=pr.unstable_shouldYield,b8=pr.unstable_requestPaint,nn=pr.unstable_now,T8=pr.unstable_getCurrentPriorityLevel,Nm=pr.unstable_ImmediatePriority,NE=pr.unstable_UserBlockingPriority,zf=pr.unstable_NormalPriority,P8=pr.unstable_LowPriority,RE=pr.unstable_IdlePriority,Td=null,oo=null;function C8(e){if(oo&&typeof oo.onCommitFiberRoot=="function")try{oo.onCommitFiberRoot(Td,e,void 0,(e.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:N8,k8=Math.log,M8=Math.LN2;function N8(e){return e>>>=0,e===0?32:31-(k8(e)/M8|0)|0}var Cu=64,ku=4194304;function Dl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=Dl(a):(s&=i,s!==0&&(r=Dl(s)))}else i=n&~o,i!==0?r=Dl(i):s!==0&&(r=Dl(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Br(t),o=1<<n,r|=e[n],t&=~o;return r}function R8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O8(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-Br(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=R8(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Ep(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function OE(){var e=Cu;return Cu<<=1,!(Cu&4194240)&&(Cu=64),e}function E0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ac(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Br(t),e[t]=n}function L8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Br(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Rm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Br(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var At=0;function LE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var FE,Om,DE,IE,zE,_p=!1,Mu=[],ss=null,is=null,as=null,nc=new Map,rc=new Map,es=[],F8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Py(e,t){switch(e){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(t.pointerId)}}function pl(e,t,n,r,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},t!==null&&(t=Tc(t),t!==null&&Om(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function D8(e,t,n,r,o){switch(t){case"focusin":return ss=pl(ss,e,t,n,r,o),!0;case"dragenter":return is=pl(is,e,t,n,r,o),!0;case"mouseover":return as=pl(as,e,t,n,r,o),!0;case"pointerover":var s=o.pointerId;return nc.set(s,pl(nc.get(s)||null,e,t,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,rc.set(s,pl(rc.get(s)||null,e,t,n,r,o)),!0}return!1}function BE(e){var t=qs(e.target);if(t!==null){var n=ci(t);if(n!==null){if(t=n.tag,t===13){if(t=PE(n),t!==null){e.blockedOn=t,zE(e.priority,function(){DE(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$p(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);gp=r,n.target.dispatchEvent(r),gp=null}else return t=Tc(n),t!==null&&Om(t),e.blockedOn=n,!1;t.shift()}return!0}function Cy(e,t,n){xf(e)&&n.delete(t)}function I8(){_p=!1,ss!==null&&xf(ss)&&(ss=null),is!==null&&xf(is)&&(is=null),as!==null&&xf(as)&&(as=null),nc.forEach(Cy),rc.forEach(Cy)}function ml(e,t){e.blockedOn===t&&(e.blockedOn=null,_p||(_p=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,I8)))}function oc(e){function t(o){return ml(o,e)}if(0<Mu.length){ml(Mu[0],e);for(var n=1;n<Mu.length;n++){var r=Mu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ss!==null&&ml(ss,e),is!==null&&ml(is,e),as!==null&&ml(as,e),nc.forEach(t),rc.forEach(t),n=0;n<es.length;n++)r=es[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)BE(n),n.blockedOn===null&&es.shift()}var da=ko.ReactCurrentBatchConfig,Gf=!0;function z8(e,t,n,r){var o=At,s=da.transition;da.transition=null;try{At=1,Lm(e,t,n,r)}finally{At=o,da.transition=s}}function B8(e,t,n,r){var o=At,s=da.transition;da.transition=null;try{At=4,Lm(e,t,n,r)}finally{At=o,da.transition=s}}function Lm(e,t,n,r){if(Gf){var o=$p(e,t,n,r);if(o===null)M0(e,t,r,Vf,n),Py(e,r);else if(D8(o,e,t,n,r))r.stopPropagation();else if(Py(e,r),t&4&&-1<F8.indexOf(e)){for(;o!==null;){var s=Tc(o);if(s!==null&&FE(s),s=$p(e,t,n,r),s===null&&M0(e,t,r,Vf,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else M0(e,t,r,null,n)}}var Vf=null;function $p(e,t,n,r){if(Vf=null,e=Mm(r),e=qs(e),e!==null)if(t=ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=PE(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vf=e,null}function GE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T8()){case Nm:return 1;case NE:return 4;case zf:case P8:return 16;case RE:return 536870912;default:return 16}default:return 16}}var rs=null,Fm=null,Ef=null;function VE(){if(Ef)return Ef;var e,t=Fm,n=t.length,r,o="value"in rs?rs.value:rs.textContent,s=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[s-r];r++);return Ef=o.slice(e,1<r?1-r:void 0)}function _f(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nu(){return!0}function ky(){return!1}function vr(e){function t(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nu:ky,this.isPropagationStopped=ky,this}return Wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nu)},persist:function(){},isPersistent:Nu}),t}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dm=vr(Ma),bc=Wt({},Ma,{view:0,detail:0}),G8=vr(bc),_0,$0,vl,Pd=Wt({},bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Im,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vl&&(vl&&e.type==="mousemove"?(_0=e.screenX-vl.screenX,$0=e.screenY-vl.screenY):$0=_0=0,vl=e),_0)},movementY:function(e){return"movementY"in e?e.movementY:$0}}),My=vr(Pd),V8=Wt({},Pd,{dataTransfer:0}),j8=vr(V8),U8=Wt({},bc,{relatedTarget:0}),S0=vr(U8),H8=Wt({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),X8=vr(H8),W8=Wt({},Ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Y8=vr(W8),q8=Wt({},Ma,{data:0}),Ny=vr(q8),Z8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J8(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K8[e])?!!t[e]:!1}function Im(){return J8}var eC=Wt({},bc,{key:function(e){if(e.key){var t=Z8[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_f(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Q8[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Im,charCode:function(e){return e.type==="keypress"?_f(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_f(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tC=vr(eC),nC=Wt({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=vr(nC),rC=Wt({},bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Im}),oC=vr(rC),sC=Wt({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),iC=vr(sC),aC=Wt({},Pd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lC=vr(aC),cC=[9,13,27,32],zm=Ao&&"CompositionEvent"in window,Xl=null;Ao&&"documentMode"in document&&(Xl=document.documentMode);var uC=Ao&&"TextEvent"in window&&!Xl,jE=Ao&&(!zm||Xl&&8<Xl&&11>=Xl),Oy=" ",Ly=!1;function UE(e,t){switch(e){case"keyup":return cC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function fC(e,t){switch(e){case"compositionend":return HE(t);case"keypress":return t.which!==32?null:(Ly=!0,Oy);case"textInput":return e=t.data,e===Oy&&Ly?null:e;default:return null}}function dC(e,t){if(Ki)return e==="compositionend"||!zm&&UE(e,t)?(e=VE(),Ef=Fm=rs=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jE&&t.locale!=="ko"?null:t.data;default:return null}}var hC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hC[e.type]:t==="textarea"}function XE(e,t,n,r){$E(r),t=jf(t,"onChange"),0<t.length&&(n=new Dm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wl=null,sc=null;function pC(e){r_(e,0)}function Cd(e){var t=ta(e);if(vE(t))return e}function mC(e,t){if(e==="change")return t}var WE=!1;if(Ao){var A0;if(Ao){var b0="oninput"in document;if(!b0){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),b0=typeof Dy.oninput=="function"}A0=b0}else A0=!1;WE=A0&&(!document.documentMode||9<document.documentMode)}function Iy(){Wl&&(Wl.detachEvent("onpropertychange",YE),sc=Wl=null)}function YE(e){if(e.propertyName==="value"&&Cd(sc)){var t=[];XE(t,sc,e,Mm(e)),TE(pC,t)}}function vC(e,t,n){e==="focusin"?(Iy(),Wl=t,sc=n,Wl.attachEvent("onpropertychange",YE)):e==="focusout"&&Iy()}function gC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Cd(sc)}function yC(e,t){if(e==="click")return Cd(t)}function wC(e,t){if(e==="input"||e==="change")return Cd(t)}function xC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vr=typeof Object.is=="function"?Object.is:xC;function ic(e,t){if(Vr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!sp.call(t,o)||!Vr(e[o],t[o]))return!1}return!0}function zy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function By(e,t){var n=zy(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zy(n)}}function qE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZE(){for(var e=window,t=Ff();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ff(e.document)}return t}function Bm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function EC(e){var t=ZE(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&qE(n.ownerDocument.documentElement,n)){if(r!==null&&Bm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!e.extend&&s>r&&(o=r,r=s,s=o),o=By(n,s);var i=By(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _C=Ao&&"documentMode"in document&&11>=document.documentMode,Ji=null,Sp=null,Yl=null,Ap=!1;function Gy(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ap||Ji==null||Ji!==Ff(r)||(r=Ji,"selectionStart"in r&&Bm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yl&&ic(Yl,r)||(Yl=r,r=jf(Sp,"onSelect"),0<r.length&&(t=new Dm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ji)))}function Ru(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ea={animationend:Ru("Animation","AnimationEnd"),animationiteration:Ru("Animation","AnimationIteration"),animationstart:Ru("Animation","AnimationStart"),transitionend:Ru("Transition","TransitionEnd")},T0={},QE={};Ao&&(QE=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function kd(e){if(T0[e])return T0[e];if(!ea[e])return e;var t=ea[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in QE)return T0[e]=t[n];return e}var KE=kd("animationend"),JE=kd("animationiteration"),e_=kd("animationstart"),t_=kd("transitionend"),n_=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ys(e,t){n_.set(e,t),li(t,[e])}for(var P0=0;P0<Vy.length;P0++){var C0=Vy[P0],$C=C0.toLowerCase(),SC=C0[0].toUpperCase()+C0.slice(1);ys($C,"on"+SC)}ys(KE,"onAnimationEnd");ys(JE,"onAnimationIteration");ys(e_,"onAnimationStart");ys("dblclick","onDoubleClick");ys("focusin","onFocus");ys("focusout","onBlur");ys(t_,"onTransitionEnd");ga("onMouseEnter",["mouseout","mouseover"]);ga("onMouseLeave",["mouseout","mouseover"]);ga("onPointerEnter",["pointerout","pointerover"]);ga("onPointerLeave",["pointerout","pointerover"]);li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));li("onBeforeInput",["compositionend","keypress","textInput","paste"]);li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function jy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$8(r,t,void 0,e),e.currentTarget=null}function r_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;jy(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;jy(o,a,c),s=l}}}if(If)throw e=xp,If=!1,xp=null,e}function Dt(e,t){var n=t[kp];n===void 0&&(n=t[kp]=new Set);var r=e+"__bubble";n.has(r)||(o_(t,e,2,!1),n.add(r))}function k0(e,t,n){var r=0;t&&(r|=4),o_(n,e,r,t)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function ac(e){if(!e[Ou]){e[Ou]=!0,fE.forEach(function(n){n!=="selectionchange"&&(AC.has(n)||k0(n,!1,e),k0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ou]||(t[Ou]=!0,k0("selectionchange",!1,t))}}function o_(e,t,n,r){switch(GE(t)){case 1:var o=z8;break;case 4:o=B8;break;default:o=Lm}n=o.bind(null,t,n,e),o=void 0,!wp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function M0(e,t,n,r,o){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=qs(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}TE(function(){var c=s,u=Mm(n),f=[];e:{var d=n_.get(e);if(d!==void 0){var p=Dm,y=e;switch(e){case"keypress":if(_f(n)===0)break e;case"keydown":case"keyup":p=tC;break;case"focusin":y="focus",p=S0;break;case"focusout":y="blur",p=S0;break;case"beforeblur":case"afterblur":p=S0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=j8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=oC;break;case KE:case JE:case e_:p=X8;break;case t_:p=iC;break;case"scroll":p=G8;break;case"wheel":p=lC;break;case"copy":case"cut":case"paste":p=Y8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Ry}var v=(t&4)!==0,x=!v&&e==="scroll",m=v?d!==null?d+"Capture":null:d;v=[];for(var g=c,w;g!==null;){w=g;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,m!==null&&(E=tc(g,m),E!=null&&v.push(lc(g,E,w)))),x)break;g=g.return}0<v.length&&(d=new p(d,y,null,n,u),f.push({event:d,listeners:v}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==gp&&(y=n.relatedTarget||n.fromElement)&&(qs(y)||y[bo]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?qs(y):null,y!==null&&(x=ci(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=My,E="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=Ry,E="onPointerLeave",m="onPointerEnter",g="pointer"),x=p==null?d:ta(p),w=y==null?d:ta(y),d=new v(E,g+"leave",p,n,u),d.target=x,d.relatedTarget=w,E=null,qs(u)===c&&(v=new v(m,g+"enter",y,n,u),v.target=w,v.relatedTarget=x,E=v),x=E,p&&y)t:{for(v=p,m=y,g=0,w=v;w;w=Ri(w))g++;for(w=0,E=m;E;E=Ri(E))w++;for(;0<g-w;)v=Ri(v),g--;for(;0<w-g;)m=Ri(m),w--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Ri(v),m=Ri(m)}v=null}else v=null;p!==null&&Uy(f,d,p,v,!1),y!==null&&x!==null&&Uy(f,x,y,v,!0)}}e:{if(d=c?ta(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var A=mC;else if(Fy(d))if(WE)A=wC;else{A=gC;var $=vC}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(A=yC);if(A&&(A=A(e,c))){XE(f,A,n,u);break e}$&&$(e,d,c),e==="focusout"&&($=d._wrapperState)&&$.controlled&&d.type==="number"&&dp(d,"number",d.value)}switch($=c?ta(c):window,e){case"focusin":(Fy($)||$.contentEditable==="true")&&(Ji=$,Sp=c,Yl=null);break;case"focusout":Yl=Sp=Ji=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,Gy(f,n,u);break;case"selectionchange":if(_C)break;case"keydown":case"keyup":Gy(f,n,u)}var k;if(zm)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ki?UE(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(jE&&n.locale!=="ko"&&(Ki||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ki&&(k=VE()):(rs=u,Fm="value"in rs?rs.value:rs.textContent,Ki=!0)),$=jf(c,N),0<$.length&&(N=new Ny(N,e,null,n,u),f.push({event:N,listeners:$}),k?N.data=k:(k=HE(n),k!==null&&(N.data=k)))),(k=uC?fC(e,n):dC(e,n))&&(c=jf(c,"onBeforeInput"),0<c.length&&(u=new Ny("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=k))}r_(f,t)})}function lc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jf(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=tc(e,n),s!=null&&r.unshift(lc(e,s,o)),s=tc(e,t),s!=null&&r.push(lc(e,s,o))),e=e.return}return r}function Ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uy(e,t,n,r,o){for(var s=t._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=tc(n,s),l!=null&&i.unshift(lc(n,l,a))):o||(l=tc(n,s),l!=null&&i.push(lc(n,l,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var bC=/\r\n?/g,TC=/\u0000|\uFFFD/g;function Hy(e){return(typeof e=="string"?e:""+e).replace(bC,`
`).replace(TC,"")}function Lu(e,t,n){if(t=Hy(t),Hy(e)!==t&&n)throw Error(Ce(425))}function Uf(){}var bp=null,Tp=null;function Pp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cp=typeof setTimeout=="function"?setTimeout:void 0,PC=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,CC=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(e){return Xy.resolve(null).then(e).catch(kC)}:Cp;function kC(e){setTimeout(function(){throw e})}function N0(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),oc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);oc(t)}function ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Na=Math.random().toString(36).slice(2),no="__reactFiber$"+Na,cc="__reactProps$"+Na,bo="__reactContainer$"+Na,kp="__reactEvents$"+Na,MC="__reactListeners$"+Na,NC="__reactHandles$"+Na;function qs(e){var t=e[no];if(t)return t;for(var n=e.parentNode;n;){if(t=n[bo]||n[no]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Wy(e);e!==null;){if(n=e[no])return n;e=Wy(e)}return t}e=n,n=e.parentNode}return null}function Tc(e){return e=e[no]||e[bo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ta(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ce(33))}function Md(e){return e[cc]||null}var Mp=[],na=-1;function ws(e){return{current:e}}function zt(e){0>na||(e.current=Mp[na],Mp[na]=null,na--)}function Ot(e,t){na++,Mp[na]=e.current,e.current=t}var ms={},On=ws(ms),Jn=ws(!1),ni=ms;function ya(e,t){var n=e.type.contextTypes;if(!n)return ms;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function er(e){return e=e.childContextTypes,e!=null}function Hf(){zt(Jn),zt(On)}function Yy(e,t,n){if(On.current!==ms)throw Error(Ce(168));Ot(On,t),Ot(Jn,n)}function s_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Ce(108,v8(e)||"Unknown",o));return Wt({},n,r)}function Xf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ms,ni=On.current,Ot(On,e),Ot(Jn,Jn.current),!0}function qy(e,t,n){var r=e.stateNode;if(!r)throw Error(Ce(169));n?(e=s_(e,t,ni),r.__reactInternalMemoizedMergedChildContext=e,zt(Jn),zt(On),Ot(On,e)):zt(Jn),Ot(Jn,n)}var wo=null,Nd=!1,R0=!1;function i_(e){wo===null?wo=[e]:wo.push(e)}function RC(e){Nd=!0,i_(e)}function xs(){if(!R0&&wo!==null){R0=!0;var e=0,t=At;try{var n=wo;for(At=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wo=null,Nd=!1}catch(o){throw wo!==null&&(wo=wo.slice(e+1)),ME(Nm,xs),o}finally{At=t,R0=!1}}return null}var ra=[],oa=0,Wf=null,Yf=0,Er=[],_r=0,ri=null,xo=1,Eo="";function Hs(e,t){ra[oa++]=Yf,ra[oa++]=Wf,Wf=e,Yf=t}function a_(e,t,n){Er[_r++]=xo,Er[_r++]=Eo,Er[_r++]=ri,ri=e;var r=xo;e=Eo;var o=32-Br(r)-1;r&=~(1<<o),n+=1;var s=32-Br(t)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,xo=1<<32-Br(t)+o|n<<o|r,Eo=s+e}else xo=1<<s|n<<o|r,Eo=e}function Gm(e){e.return!==null&&(Hs(e,1),a_(e,1,0))}function Vm(e){for(;e===Wf;)Wf=ra[--oa],ra[oa]=null,Yf=ra[--oa],ra[oa]=null;for(;e===ri;)ri=Er[--_r],Er[_r]=null,Eo=Er[--_r],Er[_r]=null,xo=Er[--_r],Er[_r]=null}var hr=null,dr=null,Gt=!1,Ir=null;function l_(e,t){var n=$r(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Zy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hr=e,dr=ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hr=e,dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ri!==null?{id:xo,overflow:Eo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$r(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,hr=e,dr=null,!0):!1;default:return!1}}function Np(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rp(e){if(Gt){var t=dr;if(t){var n=t;if(!Zy(e,t)){if(Np(e))throw Error(Ce(418));t=ls(n.nextSibling);var r=hr;t&&Zy(e,t)?l_(r,n):(e.flags=e.flags&-4097|2,Gt=!1,hr=e)}}else{if(Np(e))throw Error(Ce(418));e.flags=e.flags&-4097|2,Gt=!1,hr=e}}}function Qy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hr=e}function Fu(e){if(e!==hr)return!1;if(!Gt)return Qy(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pp(e.type,e.memoizedProps)),t&&(t=dr)){if(Np(e))throw c_(),Error(Ce(418));for(;t;)l_(e,t),t=ls(t.nextSibling)}if(Qy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dr=ls(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dr=null}}else dr=hr?ls(e.stateNode.nextSibling):null;return!0}function c_(){for(var e=dr;e;)e=ls(e.nextSibling)}function wa(){dr=hr=null,Gt=!1}function jm(e){Ir===null?Ir=[e]:Ir.push(e)}var OC=ko.ReactCurrentBatchConfig;function gl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,e))}return e}function Du(e,t){throw e=Object.prototype.toString.call(t),Error(Ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ky(e){var t=e._init;return t(e._payload)}function u_(e){function t(m,g){if(e){var w=m.deletions;w===null?(m.deletions=[g],m.flags|=16):w.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=ds(m,g),m.index=0,m.sibling=null,m}function s(m,g,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<g?(m.flags|=2,g):w):(m.flags|=2,g)):(m.flags|=1048576,g)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,g,w,E){return g===null||g.tag!==6?(g=B0(w,m.mode,E),g.return=m,g):(g=o(g,w),g.return=m,g)}function l(m,g,w,E){var A=w.type;return A===Qi?u(m,g,w.props.children,E,w.key):g!==null&&(g.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ko&&Ky(A)===g.type)?(E=o(g,w.props),E.ref=gl(m,g,w),E.return=m,E):(E=Cf(w.type,w.key,w.props,null,m.mode,E),E.ref=gl(m,g,w),E.return=m,E)}function c(m,g,w,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=G0(w,m.mode,E),g.return=m,g):(g=o(g,w.children||[]),g.return=m,g)}function u(m,g,w,E,A){return g===null||g.tag!==7?(g=ei(w,m.mode,E,A),g.return=m,g):(g=o(g,w),g.return=m,g)}function f(m,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=B0(""+g,m.mode,w),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bu:return w=Cf(g.type,g.key,g.props,null,m.mode,w),w.ref=gl(m,null,g),w.return=m,w;case Zi:return g=G0(g,m.mode,w),g.return=m,g;case Ko:var E=g._init;return f(m,E(g._payload),w)}if(Fl(g)||dl(g))return g=ei(g,m.mode,w,null),g.return=m,g;Du(m,g)}return null}function d(m,g,w,E){var A=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return A!==null?null:a(m,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bu:return w.key===A?l(m,g,w,E):null;case Zi:return w.key===A?c(m,g,w,E):null;case Ko:return A=w._init,d(m,g,A(w._payload),E)}if(Fl(w)||dl(w))return A!==null?null:u(m,g,w,E,null);Du(m,w)}return null}function p(m,g,w,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(w)||null,a(g,m,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bu:return m=m.get(E.key===null?w:E.key)||null,l(g,m,E,A);case Zi:return m=m.get(E.key===null?w:E.key)||null,c(g,m,E,A);case Ko:var $=E._init;return p(m,g,w,$(E._payload),A)}if(Fl(E)||dl(E))return m=m.get(w)||null,u(g,m,E,A,null);Du(g,E)}return null}function y(m,g,w,E){for(var A=null,$=null,k=g,N=g=0,X=null;k!==null&&N<w.length;N++){k.index>N?(X=k,k=null):X=k.sibling;var j=d(m,k,w[N],E);if(j===null){k===null&&(k=X);break}e&&k&&j.alternate===null&&t(m,k),g=s(j,g,N),$===null?A=j:$.sibling=j,$=j,k=X}if(N===w.length)return n(m,k),Gt&&Hs(m,N),A;if(k===null){for(;N<w.length;N++)k=f(m,w[N],E),k!==null&&(g=s(k,g,N),$===null?A=k:$.sibling=k,$=k);return Gt&&Hs(m,N),A}for(k=r(m,k);N<w.length;N++)X=p(k,m,N,w[N],E),X!==null&&(e&&X.alternate!==null&&k.delete(X.key===null?N:X.key),g=s(X,g,N),$===null?A=X:$.sibling=X,$=X);return e&&k.forEach(function(J){return t(m,J)}),Gt&&Hs(m,N),A}function v(m,g,w,E){var A=dl(w);if(typeof A!="function")throw Error(Ce(150));if(w=A.call(w),w==null)throw Error(Ce(151));for(var $=A=null,k=g,N=g=0,X=null,j=w.next();k!==null&&!j.done;N++,j=w.next()){k.index>N?(X=k,k=null):X=k.sibling;var J=d(m,k,j.value,E);if(J===null){k===null&&(k=X);break}e&&k&&J.alternate===null&&t(m,k),g=s(J,g,N),$===null?A=J:$.sibling=J,$=J,k=X}if(j.done)return n(m,k),Gt&&Hs(m,N),A;if(k===null){for(;!j.done;N++,j=w.next())j=f(m,j.value,E),j!==null&&(g=s(j,g,N),$===null?A=j:$.sibling=j,$=j);return Gt&&Hs(m,N),A}for(k=r(m,k);!j.done;N++,j=w.next())j=p(k,m,N,j.value,E),j!==null&&(e&&j.alternate!==null&&k.delete(j.key===null?N:j.key),g=s(j,g,N),$===null?A=j:$.sibling=j,$=j);return e&&k.forEach(function(le){return t(m,le)}),Gt&&Hs(m,N),A}function x(m,g,w,E){if(typeof w=="object"&&w!==null&&w.type===Qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case bu:e:{for(var A=w.key,$=g;$!==null;){if($.key===A){if(A=w.type,A===Qi){if($.tag===7){n(m,$.sibling),g=o($,w.props.children),g.return=m,m=g;break e}}else if($.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Ko&&Ky(A)===$.type){n(m,$.sibling),g=o($,w.props),g.ref=gl(m,$,w),g.return=m,m=g;break e}n(m,$);break}else t(m,$);$=$.sibling}w.type===Qi?(g=ei(w.props.children,m.mode,E,w.key),g.return=m,m=g):(E=Cf(w.type,w.key,w.props,null,m.mode,E),E.ref=gl(m,g,w),E.return=m,m=E)}return i(m);case Zi:e:{for($=w.key;g!==null;){if(g.key===$)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){n(m,g.sibling),g=o(g,w.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=G0(w,m.mode,E),g.return=m,m=g}return i(m);case Ko:return $=w._init,x(m,g,$(w._payload),E)}if(Fl(w))return y(m,g,w,E);if(dl(w))return v(m,g,w,E);Du(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,w),g.return=m,m=g):(n(m,g),g=B0(w,m.mode,E),g.return=m,m=g),i(m)):n(m,g)}return x}var xa=u_(!0),f_=u_(!1),qf=ws(null),Zf=null,sa=null,Um=null;function Hm(){Um=sa=Zf=null}function Xm(e){var t=qf.current;zt(qf),e._currentValue=t}function Op(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ha(e,t){Zf=e,Um=sa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Kn=!0),e.firstContext=null)}function Tr(e){var t=e._currentValue;if(Um!==e)if(e={context:e,memoizedValue:t,next:null},sa===null){if(Zf===null)throw Error(Ce(308));sa=e,Zf.dependencies={lanes:0,firstContext:e}}else sa=sa.next=e;return t}var Zs=null;function Wm(e){Zs===null?Zs=[e]:Zs.push(e)}function d_(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Wm(t)):(n.next=o.next,o.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jo=!1;function Ym(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$t&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,To(e,n)}return o=r.interleaved,o===null?(t.next=t,Wm(r)):(t.next=o.next,o.next=t),r.interleaved=t,To(e,n)}function $f(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rm(e,n)}}function Jy(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qf(e,t,n,r){var o=e.updateQueue;Jo=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=o.baseState;i=0,u=c=l=null,a=s;do{var d=a.lane,p=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,v=a;switch(d=t,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(p,f,d);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,d=typeof y=="function"?y.call(p,f,d):y,d==null)break e;f=Wt({},f,d);break e;case 2:Jo=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,i|=d;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;d=a,a=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(u===null&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);si|=i,e.lanes=i,e.memoizedState=f}}function e5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Ce(191,o));o.call(r)}}}var Pc={},so=ws(Pc),uc=ws(Pc),fc=ws(Pc);function Qs(e){if(e===Pc)throw Error(Ce(174));return e}function qm(e,t){switch(Ot(fc,t),Ot(uc,e),Ot(so,Pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pp(t,e)}zt(so),Ot(so,t)}function Ea(){zt(so),zt(uc),zt(fc)}function p_(e){Qs(fc.current);var t=Qs(so.current),n=pp(t,e.type);t!==n&&(Ot(uc,e),Ot(so,n))}function Zm(e){uc.current===e&&(zt(so),zt(uc))}var Ht=ws(0);function Kf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var O0=[];function Qm(){for(var e=0;e<O0.length;e++)O0[e]._workInProgressVersionPrimary=null;O0.length=0}var Sf=ko.ReactCurrentDispatcher,L0=ko.ReactCurrentBatchConfig,oi=0,Xt=null,un=null,xn=null,Jf=!1,ql=!1,dc=0,LC=0;function kn(){throw Error(Ce(321))}function Km(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vr(e[n],t[n]))return!1;return!0}function Jm(e,t,n,r,o,s){if(oi=s,Xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sf.current=e===null||e.memoizedState===null?zC:BC,e=n(r,o),ql){s=0;do{if(ql=!1,dc=0,25<=s)throw Error(Ce(301));s+=1,xn=un=null,t.updateQueue=null,Sf.current=GC,e=n(r,o)}while(ql)}if(Sf.current=ed,t=un!==null&&un.next!==null,oi=0,xn=un=Xt=null,Jf=!1,t)throw Error(Ce(300));return e}function ev(){var e=dc!==0;return dc=0,e}function to(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Xt.memoizedState=xn=e:xn=xn.next=e,xn}function Pr(){if(un===null){var e=Xt.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var t=xn===null?Xt.memoizedState:xn.next;if(t!==null)xn=t,un=e;else{if(e===null)throw Error(Ce(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},xn===null?Xt.memoizedState=xn=e:xn=xn.next=e}return xn}function hc(e,t){return typeof t=="function"?t(e):t}function F0(e){var t=Pr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=un,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((oi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,Xt.lanes|=u,si|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Vr(r,t.memoizedState)||(Kn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,Xt.lanes|=s,si|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function D0(e){var t=Pr(),n=t.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=e(s,i.action),i=i.next;while(i!==o);Vr(s,t.memoizedState)||(Kn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function m_(){}function v_(e,t){var n=Xt,r=Pr(),o=t(),s=!Vr(r.memoizedState,o);if(s&&(r.memoizedState=o,Kn=!0),r=r.queue,tv(w_.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||xn!==null&&xn.memoizedState.tag&1){if(n.flags|=2048,pc(9,y_.bind(null,n,r,o,t),void 0,null),En===null)throw Error(Ce(349));oi&30||g_(n,t,o)}return o}function g_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xt.updateQueue,t===null?(t={lastEffect:null,stores:null},Xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function y_(e,t,n,r){t.value=n,t.getSnapshot=r,x_(t)&&E_(e)}function w_(e,t,n){return n(function(){x_(t)&&E_(e)})}function x_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vr(e,n)}catch{return!0}}function E_(e){var t=To(e,1);t!==null&&Gr(t,e,1,-1)}function t5(e){var t=to();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:e},t.queue=e,e=e.dispatch=IC.bind(null,Xt,e),[t.memoizedState,e]}function pc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xt.updateQueue,t===null?(t={lastEffect:null,stores:null},Xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function __(){return Pr().memoizedState}function Af(e,t,n,r){var o=to();Xt.flags|=e,o.memoizedState=pc(1|t,n,void 0,r===void 0?null:r)}function Rd(e,t,n,r){var o=Pr();r=r===void 0?null:r;var s=void 0;if(un!==null){var i=un.memoizedState;if(s=i.destroy,r!==null&&Km(r,i.deps)){o.memoizedState=pc(t,n,s,r);return}}Xt.flags|=e,o.memoizedState=pc(1|t,n,s,r)}function n5(e,t){return Af(8390656,8,e,t)}function tv(e,t){return Rd(2048,8,e,t)}function $_(e,t){return Rd(4,2,e,t)}function S_(e,t){return Rd(4,4,e,t)}function A_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function b_(e,t,n){return n=n!=null?n.concat([e]):null,Rd(4,4,A_.bind(null,t,e),n)}function nv(){}function T_(e,t){var n=Pr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Km(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function P_(e,t){var n=Pr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Km(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function C_(e,t,n){return oi&21?(Vr(n,t)||(n=OE(),Xt.lanes|=n,si|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Kn=!0),e.memoizedState=n)}function FC(e,t){var n=At;At=n!==0&&4>n?n:4,e(!0);var r=L0.transition;L0.transition={};try{e(!1),t()}finally{At=n,L0.transition=r}}function k_(){return Pr().memoizedState}function DC(e,t,n){var r=fs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M_(e))N_(t,n);else if(n=d_(e,t,n,r),n!==null){var o=jn();Gr(n,e,r,o),R_(n,t,r)}}function IC(e,t,n){var r=fs(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M_(e))N_(t,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var i=t.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Vr(a,i)){var l=t.interleaved;l===null?(o.next=o,Wm(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch{}finally{}n=d_(e,t,o,r),n!==null&&(o=jn(),Gr(n,e,r,o),R_(n,t,r))}}function M_(e){var t=e.alternate;return e===Xt||t!==null&&t===Xt}function N_(e,t){ql=Jf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function R_(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rm(e,n)}}var ed={readContext:Tr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},zC={readContext:Tr,useCallback:function(e,t){return to().memoizedState=[e,t===void 0?null:t],e},useContext:Tr,useEffect:n5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Af(4194308,4,A_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Af(4194308,4,e,t)},useInsertionEffect:function(e,t){return Af(4,2,e,t)},useMemo:function(e,t){var n=to();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=to();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=DC.bind(null,Xt,e),[r.memoizedState,e]},useRef:function(e){var t=to();return e={current:e},t.memoizedState=e},useState:t5,useDebugValue:nv,useDeferredValue:function(e){return to().memoizedState=e},useTransition:function(){var e=t5(!1),t=e[0];return e=FC.bind(null,e[1]),to().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xt,o=to();if(Gt){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=t(),En===null)throw Error(Ce(349));oi&30||g_(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,n5(w_.bind(null,r,s,e),[e]),r.flags|=2048,pc(9,y_.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=to(),t=En.identifierPrefix;if(Gt){var n=Eo,r=xo;n=(r&~(1<<32-Br(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=dc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=LC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BC={readContext:Tr,useCallback:T_,useContext:Tr,useEffect:tv,useImperativeHandle:b_,useInsertionEffect:$_,useLayoutEffect:S_,useMemo:P_,useReducer:F0,useRef:__,useState:function(){return F0(hc)},useDebugValue:nv,useDeferredValue:function(e){var t=Pr();return C_(t,un.memoizedState,e)},useTransition:function(){var e=F0(hc)[0],t=Pr().memoizedState;return[e,t]},useMutableSource:m_,useSyncExternalStore:v_,useId:k_,unstable_isNewReconciler:!1},GC={readContext:Tr,useCallback:T_,useContext:Tr,useEffect:tv,useImperativeHandle:b_,useInsertionEffect:$_,useLayoutEffect:S_,useMemo:P_,useReducer:D0,useRef:__,useState:function(){return D0(hc)},useDebugValue:nv,useDeferredValue:function(e){var t=Pr();return un===null?t.memoizedState=e:C_(t,un.memoizedState,e)},useTransition:function(){var e=D0(hc)[0],t=Pr().memoizedState;return[e,t]},useMutableSource:m_,useSyncExternalStore:v_,useId:k_,unstable_isNewReconciler:!1};function Fr(e,t){if(e&&e.defaultProps){t=Wt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lp(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Wt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Od={isMounted:function(e){return(e=e._reactInternals)?ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jn(),o=fs(e),s=$o(r,o);s.payload=t,n!=null&&(s.callback=n),t=cs(e,s,o),t!==null&&(Gr(t,e,o,r),$f(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jn(),o=fs(e),s=$o(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=cs(e,s,o),t!==null&&(Gr(t,e,o,r),$f(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jn(),r=fs(e),o=$o(n,r);o.tag=2,t!=null&&(o.callback=t),t=cs(e,o,r),t!==null&&(Gr(t,e,r,n),$f(t,e,r))}};function r5(e,t,n,r,o,s,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,i):t.prototype&&t.prototype.isPureReactComponent?!ic(n,r)||!ic(o,s):!0}function O_(e,t,n){var r=!1,o=ms,s=t.contextType;return typeof s=="object"&&s!==null?s=Tr(s):(o=er(t)?ni:On.current,r=t.contextTypes,s=(r=r!=null)?ya(e,o):ms),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Od,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function o5(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Od.enqueueReplaceState(t,t.state,null)}function Fp(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ym(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Tr(s):(s=er(t)?ni:On.current,o.context=ya(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Lp(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Od.enqueueReplaceState(o,o.state,null),Qf(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function _a(e,t){try{var n="",r=t;do n+=m8(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o,digest:null}}function I0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dp(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var VC=typeof WeakMap=="function"?WeakMap:Map;function L_(e,t,n){n=$o(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nd||(nd=!0,Wp=r),Dp(e,t)},n}function F_(e,t,n){n=$o(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Dp(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dp(e,t),typeof r!="function"&&(us===null?us=new Set([this]):us.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function s5(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new VC;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=nk.bind(null,e,t,n),t.then(e,e))}function i5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function a5(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=$o(-1,1),t.tag=2,cs(n,t,1))),n.lanes|=1),e)}var jC=ko.ReactCurrentOwner,Kn=!1;function zn(e,t,n,r){t.child=e===null?f_(t,null,n,r):xa(t,e.child,n,r)}function l5(e,t,n,r,o){n=n.render;var s=t.ref;return ha(t,o),r=Jm(e,t,n,r,s,o),n=ev(),e!==null&&!Kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Po(e,t,o)):(Gt&&n&&Gm(t),t.flags|=1,zn(e,t,r,o),t.child)}function c5(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!uv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,D_(e,t,s,r,o)):(e=Cf(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:ic,n(i,r)&&e.ref===t.ref)return Po(e,t,o)}return t.flags|=1,e=ds(s,r),e.ref=t.ref,e.return=t,t.child=e}function D_(e,t,n,r,o){if(e!==null){var s=e.memoizedProps;if(ic(s,r)&&e.ref===t.ref)if(Kn=!1,t.pendingProps=r=s,(e.lanes&o)!==0)e.flags&131072&&(Kn=!0);else return t.lanes=e.lanes,Po(e,t,o)}return Ip(e,t,n,r,o)}function I_(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ot(aa,fr),fr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ot(aa,fr),fr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ot(aa,fr),fr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ot(aa,fr),fr|=r;return zn(e,t,o,n),t.child}function z_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ip(e,t,n,r,o){var s=er(n)?ni:On.current;return s=ya(t,s),ha(t,o),n=Jm(e,t,n,r,s,o),r=ev(),e!==null&&!Kn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Po(e,t,o)):(Gt&&r&&Gm(t),t.flags|=1,zn(e,t,n,o),t.child)}function u5(e,t,n,r,o){if(er(n)){var s=!0;Xf(t)}else s=!1;if(ha(t,o),t.stateNode===null)bf(e,t),O_(t,n,r),Fp(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Tr(c):(c=er(n)?ni:On.current,c=ya(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&o5(t,i,r,c),Jo=!1;var d=t.memoizedState;i.state=d,Qf(t,r,i,o),l=t.memoizedState,a!==r||d!==l||Jn.current||Jo?(typeof u=="function"&&(Lp(t,n,u,r),l=t.memoizedState),(a=Jo||r5(t,n,a,r,d,l,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,h_(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Fr(t.type,a),i.props=c,f=t.pendingProps,d=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Tr(l):(l=er(n)?ni:On.current,l=ya(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||d!==l)&&o5(t,i,r,l),Jo=!1,d=t.memoizedState,i.state=d,Qf(t,r,i,o);var y=t.memoizedState;a!==f||d!==y||Jn.current||Jo?(typeof p=="function"&&(Lp(t,n,p,r),y=t.memoizedState),(c=Jo||r5(t,n,c,r,d,y,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return zp(e,t,n,r,s,o)}function zp(e,t,n,r,o,s){z_(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&qy(t,n,!1),Po(e,t,s);r=t.stateNode,jC.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=xa(t,e.child,null,s),t.child=xa(t,null,a,s)):zn(e,t,a,s),t.memoizedState=r.state,o&&qy(t,n,!0),t.child}function B_(e){var t=e.stateNode;t.pendingContext?Yy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yy(e,t.context,!1),qm(e,t.containerInfo)}function f5(e,t,n,r,o){return wa(),jm(o),t.flags|=256,zn(e,t,n,r),t.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function Gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function G_(e,t,n){var r=t.pendingProps,o=Ht.current,s=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ot(Ht,o&1),e===null)return Rp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,s?(r=t.mode,s=t.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=Dd(i,r,0,null),e=ei(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Gp(n),t.memoizedState=Bp,e):rv(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return UC(e,t,i,r,a,o,n);if(s){s=r.fallback,i=t.mode,o=e.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=ds(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=ds(a,s):(s=ei(s,i,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,i=e.child.memoizedState,i=i===null?Gp(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=e.childLanes&~n,t.memoizedState=Bp,r}return s=e.child,e=s.sibling,r=ds(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rv(e,t){return t=Dd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Iu(e,t,n,r){return r!==null&&jm(r),xa(t,e.child,null,n),e=rv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function UC(e,t,n,r,o,s,i){if(n)return t.flags&256?(t.flags&=-257,r=I0(Error(Ce(422))),Iu(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=Dd({mode:"visible",children:r.children},o,0,null),s=ei(s,o,i,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&xa(t,e.child,null,i),t.child.memoizedState=Gp(i),t.memoizedState=Bp,s);if(!(t.mode&1))return Iu(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ce(419)),r=I0(s,r,void 0),Iu(e,t,i,r)}if(a=(i&e.childLanes)!==0,Kn||a){if(r=En,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,To(e,o),Gr(r,e,o,-1))}return cv(),r=I0(Error(Ce(421))),Iu(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=rk.bind(null,e),o._reactRetry=t,null):(e=s.treeContext,dr=ls(o.nextSibling),hr=t,Gt=!0,Ir=null,e!==null&&(Er[_r++]=xo,Er[_r++]=Eo,Er[_r++]=ri,xo=e.id,Eo=e.overflow,ri=t),t=rv(t,r.children),t.flags|=4096,t)}function d5(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Op(e.return,t,n)}function z0(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function V_(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(zn(e,t,r.children,n),r=Ht.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&d5(e,n,t);else if(e.tag===19)d5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ot(Ht,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Kf(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),z0(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Kf(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}z0(t,!0,n,null,s);break;case"together":z0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Po(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),si|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ce(153));if(t.child!==null){for(e=t.child,n=ds(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ds(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function HC(e,t,n){switch(t.tag){case 3:B_(t),wa();break;case 5:p_(t);break;case 1:er(t.type)&&Xf(t);break;case 4:qm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ot(qf,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ot(Ht,Ht.current&1),t.flags|=128,null):n&t.child.childLanes?G_(e,t,n):(Ot(Ht,Ht.current&1),e=Po(e,t,n),e!==null?e.sibling:null);Ot(Ht,Ht.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return V_(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ot(Ht,Ht.current),r)break;return null;case 22:case 23:return t.lanes=0,I_(e,t,n)}return Po(e,t,n)}var j_,Vp,U_,H_;j_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vp=function(){};U_=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qs(so.current);var s=null;switch(n){case"input":o=up(e,o),r=up(e,r),s=[];break;case"select":o=Wt({},o,{value:void 0}),r=Wt({},r,{value:void 0}),s=[];break;case"textarea":o=hp(e,o),r=hp(e,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uf)}mp(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Dt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};H_=function(e,t,n,r){n!==r&&(t.flags|=4)};function yl(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Mn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function XC(e,t,n){var r=t.pendingProps;switch(Vm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(t),null;case 1:return er(t.type)&&Hf(),Mn(t),null;case 3:return r=t.stateNode,Ea(),zt(Jn),zt(On),Qm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Fu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ir!==null&&(Zp(Ir),Ir=null))),Vp(e,t),Mn(t),null;case 5:Zm(t);var o=Qs(fc.current);if(n=t.type,e!==null&&t.stateNode!=null)U_(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ce(166));return Mn(t),null}if(e=Qs(so.current),Fu(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[no]=t,r[cc]=s,e=(t.mode&1)!==0,n){case"dialog":Dt("cancel",r),Dt("close",r);break;case"iframe":case"object":case"embed":Dt("load",r);break;case"video":case"audio":for(o=0;o<Il.length;o++)Dt(Il[o],r);break;case"source":Dt("error",r);break;case"img":case"image":case"link":Dt("error",r),Dt("load",r);break;case"details":Dt("toggle",r);break;case"input":Ey(r,s),Dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Dt("invalid",r);break;case"textarea":$y(r,s),Dt("invalid",r)}mp(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,e),o=["children",""+a]):Jl.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Dt("scroll",r)}switch(n){case"input":Tu(r),_y(r,s,!0);break;case"textarea":Tu(r),Sy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Uf)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[no]=t,e[cc]=r,j_(e,t,!1,!1),t.stateNode=e;e:{switch(i=vp(n,r),n){case"dialog":Dt("cancel",e),Dt("close",e),o=r;break;case"iframe":case"object":case"embed":Dt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Il.length;o++)Dt(Il[o],e);o=r;break;case"source":Dt("error",e),o=r;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),o=r;break;case"details":Dt("toggle",e),o=r;break;case"input":Ey(e,r),o=up(e,r),Dt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Wt({},r,{value:void 0}),Dt("invalid",e);break;case"textarea":$y(e,r),o=hp(e,r),Dt("invalid",e);break;default:o=r}mp(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_E(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ec(e,l):typeof l=="number"&&ec(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Dt("scroll",e):l!=null&&Tm(e,s,l,i))}switch(n){case"input":Tu(e),_y(e,r,!1);break;case"textarea":Tu(e),Sy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ps(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ca(e,!!r.multiple,s,!1):r.defaultValue!=null&&ca(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Uf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mn(t),null;case 6:if(e&&t.stateNode!=null)H_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ce(166));if(n=Qs(fc.current),Qs(so.current),Fu(t)){if(r=t.stateNode,n=t.memoizedProps,r[no]=t,(s=r.nodeValue!==n)&&(e=hr,e!==null))switch(e.tag){case 3:Lu(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lu(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[no]=t,t.stateNode=r}return Mn(t),null;case 13:if(zt(Ht),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&dr!==null&&t.mode&1&&!(t.flags&128))c_(),wa(),t.flags|=98560,s=!1;else if(s=Fu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ce(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[no]=t}else wa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mn(t),s=!1}else Ir!==null&&(Zp(Ir),Ir=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ht.current&1?fn===0&&(fn=3):cv())),t.updateQueue!==null&&(t.flags|=4),Mn(t),null);case 4:return Ea(),Vp(e,t),e===null&&ac(t.stateNode.containerInfo),Mn(t),null;case 10:return Xm(t.type._context),Mn(t),null;case 17:return er(t.type)&&Hf(),Mn(t),null;case 19:if(zt(Ht),s=t.memoizedState,s===null)return Mn(t),null;if(r=(t.flags&128)!==0,i=s.rendering,i===null)if(r)yl(s,!1);else{if(fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Kf(e),i!==null){for(t.flags|=128,yl(s,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ot(Ht,Ht.current&1|2),t.child}e=e.sibling}s.tail!==null&&nn()>$a&&(t.flags|=128,r=!0,yl(s,!1),t.lanes=4194304)}else{if(!r)if(e=Kf(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Gt)return Mn(t),null}else 2*nn()-s.renderingStartTime>$a&&n!==1073741824&&(t.flags|=128,r=!0,yl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(n=s.last,n!==null?n.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=nn(),t.sibling=null,n=Ht.current,Ot(Ht,r?n&1|2:n&1),t):(Mn(t),null);case 22:case 23:return lv(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?fr&1073741824&&(Mn(t),t.subtreeFlags&6&&(t.flags|=8192)):Mn(t),null;case 24:return null;case 25:return null}throw Error(Ce(156,t.tag))}function WC(e,t){switch(Vm(t),t.tag){case 1:return er(t.type)&&Hf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ea(),zt(Jn),zt(On),Qm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zm(t),null;case 13:if(zt(Ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ce(340));wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zt(Ht),null;case 4:return Ea(),null;case 10:return Xm(t.type._context),null;case 22:case 23:return lv(),null;case 24:return null;default:return null}}var zu=!1,Nn=!1,YC=typeof WeakSet=="function"?WeakSet:Set,He=null;function ia(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qt(e,t,r)}else n.current=null}function jp(e,t,n){try{n()}catch(r){Qt(e,t,r)}}var h5=!1;function qC(e,t){if(bp=Gf,e=ZE(),Bm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,f=e,d=null;t:for(;;){for(var p;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===o&&(a=i),d===s&&++u===r&&(l=i),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tp={focusedElem:e,selectionRange:n},Gf=!1,He=t;He!==null;)if(t=He,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,He=e;else for(;He!==null;){t=He;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:Fr(t.type,v),x);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(E){Qt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,He=e;break}He=t.return}return y=h5,h5=!1,y}function Zl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&jp(t,n,s)}o=o.next}while(o!==r)}}function Ld(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Up(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function X_(e){var t=e.alternate;t!==null&&(e.alternate=null,X_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[no],delete t[cc],delete t[kp],delete t[MC],delete t[NC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function W_(e){return e.tag===5||e.tag===3||e.tag===4}function p5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||W_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uf));else if(r!==4&&(e=e.child,e!==null))for(Hp(e,t,n),e=e.sibling;e!==null;)Hp(e,t,n),e=e.sibling}function Xp(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xp(e,t,n),e=e.sibling;e!==null;)Xp(e,t,n),e=e.sibling}var Sn=null,Dr=!1;function Bo(e,t,n){for(n=n.child;n!==null;)Y_(e,t,n),n=n.sibling}function Y_(e,t,n){if(oo&&typeof oo.onCommitFiberUnmount=="function")try{oo.onCommitFiberUnmount(Td,n)}catch{}switch(n.tag){case 5:Nn||ia(n,t);case 6:var r=Sn,o=Dr;Sn=null,Bo(e,t,n),Sn=r,Dr=o,Sn!==null&&(Dr?(e=Sn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(Dr?(e=Sn,n=n.stateNode,e.nodeType===8?N0(e.parentNode,n):e.nodeType===1&&N0(e,n),oc(e)):N0(Sn,n.stateNode));break;case 4:r=Sn,o=Dr,Sn=n.stateNode.containerInfo,Dr=!0,Bo(e,t,n),Sn=r,Dr=o;break;case 0:case 11:case 14:case 15:if(!Nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&jp(n,t,i),o=o.next}while(o!==r)}Bo(e,t,n);break;case 1:if(!Nn&&(ia(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qt(n,t,a)}Bo(e,t,n);break;case 21:Bo(e,t,n);break;case 22:n.mode&1?(Nn=(r=Nn)||n.memoizedState!==null,Bo(e,t,n),Nn=r):Bo(e,t,n);break;default:Bo(e,t,n)}}function m5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new YC),t.forEach(function(r){var o=ok.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Or(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Sn=a.stateNode,Dr=!1;break e;case 3:Sn=a.stateNode.containerInfo,Dr=!0;break e;case 4:Sn=a.stateNode.containerInfo,Dr=!0;break e}a=a.return}if(Sn===null)throw Error(Ce(160));Y_(s,i,o),Sn=null,Dr=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Qt(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)q_(t,e),t=t.sibling}function q_(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),qr(e),r&4){try{Zl(3,e,e.return),Ld(3,e)}catch(v){Qt(e,e.return,v)}try{Zl(5,e,e.return)}catch(v){Qt(e,e.return,v)}}break;case 1:Or(t,e),qr(e),r&512&&n!==null&&ia(n,n.return);break;case 5:if(Or(t,e),qr(e),r&512&&n!==null&&ia(n,n.return),e.flags&32){var o=e.stateNode;try{ec(o,"")}catch(v){Qt(e,e.return,v)}}if(r&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,i=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gE(o,s),vp(a,i);var c=vp(a,s);for(i=0;i<l.length;i+=2){var u=l[i],f=l[i+1];u==="style"?_E(o,f):u==="dangerouslySetInnerHTML"?xE(o,f):u==="children"?ec(o,f):Tm(o,u,f,c)}switch(a){case"input":fp(o,s);break;case"textarea":yE(o,s);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ca(o,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?ca(o,!!s.multiple,s.defaultValue,!0):ca(o,!!s.multiple,s.multiple?[]:"",!1))}o[cc]=s}catch(v){Qt(e,e.return,v)}}break;case 6:if(Or(t,e),qr(e),r&4){if(e.stateNode===null)throw Error(Ce(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(v){Qt(e,e.return,v)}}break;case 3:if(Or(t,e),qr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oc(t.containerInfo)}catch(v){Qt(e,e.return,v)}break;case 4:Or(t,e),qr(e);break;case 13:Or(t,e),qr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(iv=nn())),r&4&&m5(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Nn=(c=Nn)||u,Or(t,e),Nn=c):Or(t,e),qr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(He=e,u=e.child;u!==null;){for(f=He=u;He!==null;){switch(d=He,p=d.child,d.tag){case 0:case 11:case 14:case 15:Zl(4,d,d.return);break;case 1:ia(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(v){Qt(r,n,v)}}break;case 5:ia(d,d.return);break;case 22:if(d.memoizedState!==null){g5(f);continue}}p!==null?(p.return=d,He=p):g5(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=EE("display",i))}catch(v){Qt(e,e.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Qt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Or(t,e),qr(e),r&4&&m5(e);break;case 21:break;default:Or(t,e),qr(e)}}function qr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(W_(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ec(o,""),r.flags&=-33);var s=p5(e);Xp(e,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=p5(e);Hp(e,a,i);break;default:throw Error(Ce(161))}}catch(l){Qt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZC(e,t,n){He=e,Z_(e)}function Z_(e,t,n){for(var r=(e.mode&1)!==0;He!==null;){var o=He,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||zu;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||Nn;a=zu;var c=Nn;if(zu=i,(Nn=l)&&!c)for(He=o;He!==null;)i=He,l=i.child,i.tag===22&&i.memoizedState!==null?y5(o):l!==null?(l.return=i,He=l):y5(o);for(;s!==null;)He=s,Z_(s),s=s.sibling;He=o,zu=a,Nn=c}v5(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,He=s):v5(e)}}function v5(e){for(;He!==null;){var t=He;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nn||Ld(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Fr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&e5(t,s,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}e5(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&oc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Nn||t.flags&512&&Up(t)}catch(d){Qt(t,t.return,d)}}if(t===e){He=null;break}if(n=t.sibling,n!==null){n.return=t.return,He=n;break}He=t.return}}function g5(e){for(;He!==null;){var t=He;if(t===e){He=null;break}var n=t.sibling;if(n!==null){n.return=t.return,He=n;break}He=t.return}}function y5(e){for(;He!==null;){var t=He;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ld(4,t)}catch(l){Qt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(l){Qt(t,o,l)}}var s=t.return;try{Up(t)}catch(l){Qt(t,s,l)}break;case 5:var i=t.return;try{Up(t)}catch(l){Qt(t,i,l)}}}catch(l){Qt(t,t.return,l)}if(t===e){He=null;break}var a=t.sibling;if(a!==null){a.return=t.return,He=a;break}He=t.return}}var QC=Math.ceil,td=ko.ReactCurrentDispatcher,ov=ko.ReactCurrentOwner,Sr=ko.ReactCurrentBatchConfig,$t=0,En=null,ln=null,An=0,fr=0,aa=ws(0),fn=0,mc=null,si=0,Fd=0,sv=0,Ql=null,qn=null,iv=0,$a=1/0,yo=null,nd=!1,Wp=null,us=null,Bu=!1,os=null,rd=0,Kl=0,Yp=null,Tf=-1,Pf=0;function jn(){return $t&6?nn():Tf!==-1?Tf:Tf=nn()}function fs(e){return e.mode&1?$t&2&&An!==0?An&-An:OC.transition!==null?(Pf===0&&(Pf=OE()),Pf):(e=At,e!==0||(e=window.event,e=e===void 0?16:GE(e.type)),e):1}function Gr(e,t,n,r){if(50<Kl)throw Kl=0,Yp=null,Error(Ce(185));Ac(e,n,r),(!($t&2)||e!==En)&&(e===En&&(!($t&2)&&(Fd|=n),fn===4&&ts(e,An)),tr(e,r),n===1&&$t===0&&!(t.mode&1)&&($a=nn()+500,Nd&&xs()))}function tr(e,t){var n=e.callbackNode;O8(e,t);var r=Bf(e,e===En?An:0);if(r===0)n!==null&&Ty(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ty(n),t===1)e.tag===0?RC(w5.bind(null,e)):i_(w5.bind(null,e)),CC(function(){!($t&6)&&xs()}),n=null;else{switch(LE(r)){case 1:n=Nm;break;case 4:n=NE;break;case 16:n=zf;break;case 536870912:n=RE;break;default:n=zf}n=o$(n,Q_.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Q_(e,t){if(Tf=-1,Pf=0,$t&6)throw Error(Ce(327));var n=e.callbackNode;if(pa()&&e.callbackNode!==n)return null;var r=Bf(e,e===En?An:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=od(e,r);else{t=r;var o=$t;$t|=2;var s=J_();(En!==e||An!==t)&&(yo=null,$a=nn()+500,Js(e,t));do try{ek();break}catch(a){K_(e,a)}while(!0);Hm(),td.current=s,$t=o,ln!==null?t=0:(En=null,An=0,t=fn)}if(t!==0){if(t===2&&(o=Ep(e),o!==0&&(r=o,t=qp(e,o))),t===1)throw n=mc,Js(e,0),ts(e,r),tr(e,nn()),n;if(t===6)ts(e,r);else{if(o=e.current.alternate,!(r&30)&&!KC(o)&&(t=od(e,r),t===2&&(s=Ep(e),s!==0&&(r=s,t=qp(e,s))),t===1))throw n=mc,Js(e,0),ts(e,r),tr(e,nn()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Ce(345));case 2:Xs(e,qn,yo);break;case 3:if(ts(e,r),(r&130023424)===r&&(t=iv+500-nn(),10<t)){if(Bf(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){jn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Cp(Xs.bind(null,e,qn,yo),t);break}Xs(e,qn,yo);break;case 4:if(ts(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Br(r);s=1<<i,i=t[i],i>o&&(o=i),r&=~s}if(r=o,r=nn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QC(r/1960))-r,10<r){e.timeoutHandle=Cp(Xs.bind(null,e,qn,yo),r);break}Xs(e,qn,yo);break;case 5:Xs(e,qn,yo);break;default:throw Error(Ce(329))}}}return tr(e,nn()),e.callbackNode===n?Q_.bind(null,e):null}function qp(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(Js(e,t).flags|=256),e=od(e,t),e!==2&&(t=qn,qn=n,t!==null&&Zp(t)),e}function Zp(e){qn===null?qn=e:qn.push.apply(qn,e)}function KC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Vr(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ts(e,t){for(t&=~sv,t&=~Fd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Br(t),r=1<<n;e[n]=-1,t&=~r}}function w5(e){if($t&6)throw Error(Ce(327));pa();var t=Bf(e,0);if(!(t&1))return tr(e,nn()),null;var n=od(e,t);if(e.tag!==0&&n===2){var r=Ep(e);r!==0&&(t=r,n=qp(e,r))}if(n===1)throw n=mc,Js(e,0),ts(e,t),tr(e,nn()),n;if(n===6)throw Error(Ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xs(e,qn,yo),tr(e,nn()),null}function av(e,t){var n=$t;$t|=1;try{return e(t)}finally{$t=n,$t===0&&($a=nn()+500,Nd&&xs())}}function ii(e){os!==null&&os.tag===0&&!($t&6)&&pa();var t=$t;$t|=1;var n=Sr.transition,r=At;try{if(Sr.transition=null,At=1,e)return e()}finally{At=r,Sr.transition=n,$t=t,!($t&6)&&xs()}}function lv(){fr=aa.current,zt(aa)}function Js(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,PC(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(Vm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hf();break;case 3:Ea(),zt(Jn),zt(On),Qm();break;case 5:Zm(r);break;case 4:Ea();break;case 13:zt(Ht);break;case 19:zt(Ht);break;case 10:Xm(r.type._context);break;case 22:case 23:lv()}n=n.return}if(En=e,ln=e=ds(e.current,null),An=fr=t,fn=0,mc=null,sv=Fd=si=0,qn=Ql=null,Zs!==null){for(t=0;t<Zs.length;t++)if(n=Zs[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Zs=null}return e}function K_(e,t){do{var n=ln;try{if(Hm(),Sf.current=ed,Jf){for(var r=Xt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Jf=!1}if(oi=0,xn=un=Xt=null,ql=!1,dc=0,ov.current=null,n===null||n.return===null){fn=1,mc=t,ln=null;break}e:{var s=e,i=n.return,a=n,l=t;if(t=An,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=i5(i);if(p!==null){p.flags&=-257,a5(p,i,a,s,t),p.mode&1&&s5(s,c,t),t=p,l=c;var y=t.updateQueue;if(y===null){var v=new Set;v.add(l),t.updateQueue=v}else y.add(l);break e}else{if(!(t&1)){s5(s,c,t),cv();break e}l=Error(Ce(426))}}else if(Gt&&a.mode&1){var x=i5(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),a5(x,i,a,s,t),jm(_a(l,a));break e}}s=l=_a(l,a),fn!==4&&(fn=2),Ql===null?Ql=[s]:Ql.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=L_(s,l,t);Jy(s,m);break e;case 1:a=l;var g=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(us===null||!us.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=F_(s,a,t);Jy(s,E);break e}}s=s.return}while(s!==null)}t$(n)}catch(A){t=A,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function J_(){var e=td.current;return td.current=ed,e===null?ed:e}function cv(){(fn===0||fn===3||fn===2)&&(fn=4),En===null||!(si&268435455)&&!(Fd&268435455)||ts(En,An)}function od(e,t){var n=$t;$t|=2;var r=J_();(En!==e||An!==t)&&(yo=null,Js(e,t));do try{JC();break}catch(o){K_(e,o)}while(!0);if(Hm(),$t=n,td.current=r,ln!==null)throw Error(Ce(261));return En=null,An=0,fn}function JC(){for(;ln!==null;)e$(ln)}function ek(){for(;ln!==null&&!A8();)e$(ln)}function e$(e){var t=r$(e.alternate,e,fr);e.memoizedProps=e.pendingProps,t===null?t$(e):ln=t,ov.current=null}function t$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=WC(n,t),n!==null){n.flags&=32767,ln=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fn=6,ln=null;return}}else if(n=XC(n,t,fr),n!==null){ln=n;return}if(t=t.sibling,t!==null){ln=t;return}ln=t=e}while(t!==null);fn===0&&(fn=5)}function Xs(e,t,n){var r=At,o=Sr.transition;try{Sr.transition=null,At=1,tk(e,t,n,r)}finally{Sr.transition=o,At=r}return null}function tk(e,t,n,r){do pa();while(os!==null);if($t&6)throw Error(Ce(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ce(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(L8(e,s),e===En&&(ln=En=null,An=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bu||(Bu=!0,o$(zf,function(){return pa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sr.transition,Sr.transition=null;var i=At;At=1;var a=$t;$t|=4,ov.current=null,qC(e,n),q_(n,e),EC(Tp),Gf=!!bp,Tp=bp=null,e.current=n,ZC(n),b8(),$t=a,At=i,Sr.transition=s}else e.current=n;if(Bu&&(Bu=!1,os=e,rd=o),s=e.pendingLanes,s===0&&(us=null),C8(n.stateNode),tr(e,nn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(nd)throw nd=!1,e=Wp,Wp=null,e;return rd&1&&e.tag!==0&&pa(),s=e.pendingLanes,s&1?e===Yp?Kl++:(Kl=0,Yp=e):Kl=0,xs(),null}function pa(){if(os!==null){var e=LE(rd),t=Sr.transition,n=At;try{if(Sr.transition=null,At=16>e?16:e,os===null)var r=!1;else{if(e=os,os=null,rd=0,$t&6)throw Error(Ce(331));var o=$t;for($t|=4,He=e.current;He!==null;){var s=He,i=s.child;if(He.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(He=c;He!==null;){var u=He;switch(u.tag){case 0:case 11:case 15:Zl(8,u,s)}var f=u.child;if(f!==null)f.return=u,He=f;else for(;He!==null;){u=He;var d=u.sibling,p=u.return;if(X_(u),u===c){He=null;break}if(d!==null){d.return=p,He=d;break}He=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}He=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,He=i;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zl(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,He=m;break e}He=s.return}}var g=e.current;for(He=g;He!==null;){i=He;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,He=w;else e:for(i=g;He!==null;){if(a=He,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ld(9,a)}}catch(A){Qt(a,a.return,A)}if(a===i){He=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,He=E;break e}He=a.return}}if($t=o,xs(),oo&&typeof oo.onPostCommitFiberRoot=="function")try{oo.onPostCommitFiberRoot(Td,e)}catch{}r=!0}return r}finally{At=n,Sr.transition=t}}return!1}function x5(e,t,n){t=_a(n,t),t=L_(e,t,1),e=cs(e,t,1),t=jn(),e!==null&&(Ac(e,1,t),tr(e,t))}function Qt(e,t,n){if(e.tag===3)x5(e,e,n);else for(;t!==null;){if(t.tag===3){x5(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(us===null||!us.has(r))){e=_a(n,e),e=F_(t,e,1),t=cs(t,e,1),e=jn(),t!==null&&(Ac(t,1,e),tr(t,e));break}}t=t.return}}function nk(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jn(),e.pingedLanes|=e.suspendedLanes&n,En===e&&(An&n)===n&&(fn===4||fn===3&&(An&130023424)===An&&500>nn()-iv?Js(e,0):sv|=n),tr(e,t)}function n$(e,t){t===0&&(e.mode&1?(t=ku,ku<<=1,!(ku&130023424)&&(ku=4194304)):t=1);var n=jn();e=To(e,t),e!==null&&(Ac(e,t,n),tr(e,n))}function rk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),n$(e,n)}function ok(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(t),n$(e,n)}var r$;r$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jn.current)Kn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Kn=!1,HC(e,t,n);Kn=!!(e.flags&131072)}else Kn=!1,Gt&&t.flags&1048576&&a_(t,Yf,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;bf(e,t),e=t.pendingProps;var o=ya(t,On.current);ha(t,n),o=Jm(null,t,r,e,o,n);var s=ev();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,er(r)?(s=!0,Xf(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Ym(t),o.updater=Od,t.stateNode=o,o._reactInternals=t,Fp(t,r,e,n),t=zp(null,t,r,!0,s,n)):(t.tag=0,Gt&&s&&Gm(t),zn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(bf(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=ik(r),e=Fr(r,e),o){case 0:t=Ip(null,t,r,e,n);break e;case 1:t=u5(null,t,r,e,n);break e;case 11:t=l5(null,t,r,e,n);break e;case 14:t=c5(null,t,r,Fr(r.type,e),n);break e}throw Error(Ce(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fr(r,o),Ip(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fr(r,o),u5(e,t,r,o,n);case 3:e:{if(B_(t),e===null)throw Error(Ce(387));r=t.pendingProps,s=t.memoizedState,o=s.element,h_(e,t),Qf(t,r,null,n);var i=t.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=_a(Error(Ce(423)),t),t=f5(e,t,r,n,o);break e}else if(r!==o){o=_a(Error(Ce(424)),t),t=f5(e,t,r,n,o);break e}else for(dr=ls(t.stateNode.containerInfo.firstChild),hr=t,Gt=!0,Ir=null,n=f_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),r===o){t=Po(e,t,n);break e}zn(e,t,r,n)}t=t.child}return t;case 5:return p_(t),e===null&&Rp(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,i=o.children,Pp(r,o)?i=null:s!==null&&Pp(r,s)&&(t.flags|=32),z_(e,t),zn(e,t,i,n),t.child;case 6:return e===null&&Rp(t),null;case 13:return G_(e,t,n);case 4:return qm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xa(t,null,r,n):zn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fr(r,o),l5(e,t,r,o,n);case 7:return zn(e,t,t.pendingProps,n),t.child;case 8:return zn(e,t,t.pendingProps.children,n),t.child;case 12:return zn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,i=o.value,Ot(qf,r._currentValue),r._currentValue=i,s!==null)if(Vr(s.value,i)){if(s.children===o.children&&!Jn.current){t=Po(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$o(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Op(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===t.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Ce(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Op(i,n,t),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===t){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}zn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,ha(t,n),o=Tr(o),r=r(o),t.flags|=1,zn(e,t,r,n),t.child;case 14:return r=t.type,o=Fr(r,t.pendingProps),o=Fr(r.type,o),c5(e,t,r,o,n);case 15:return D_(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Fr(r,o),bf(e,t),t.tag=1,er(r)?(e=!0,Xf(t)):e=!1,ha(t,n),O_(t,r,o),Fp(t,r,o,n),zp(null,t,r,!0,e,n);case 19:return V_(e,t,n);case 22:return I_(e,t,n)}throw Error(Ce(156,t.tag))};function o$(e,t){return ME(e,t)}function sk(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(e,t,n,r){return new sk(e,t,n,r)}function uv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ik(e){if(typeof e=="function")return uv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cm)return 11;if(e===km)return 14}return 2}function ds(e,t){var n=e.alternate;return n===null?(n=$r(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cf(e,t,n,r,o,s){var i=2;if(r=e,typeof e=="function")uv(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Qi:return ei(n.children,o,s,t);case Pm:i=8,o|=8;break;case ip:return e=$r(12,n,t,o|2),e.elementType=ip,e.lanes=s,e;case ap:return e=$r(13,n,t,o),e.elementType=ap,e.lanes=s,e;case lp:return e=$r(19,n,t,o),e.elementType=lp,e.lanes=s,e;case pE:return Dd(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dE:i=10;break e;case hE:i=9;break e;case Cm:i=11;break e;case km:i=14;break e;case Ko:i=16,r=null;break e}throw Error(Ce(130,e==null?e:typeof e,""))}return t=$r(i,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function ei(e,t,n,r){return e=$r(7,e,r,t),e.lanes=n,e}function Dd(e,t,n,r){return e=$r(22,e,r,t),e.elementType=pE,e.lanes=n,e.stateNode={isHidden:!1},e}function B0(e,t,n){return e=$r(6,e,null,t),e.lanes=n,e}function G0(e,t,n){return t=$r(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ak(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function fv(e,t,n,r,o,s,i,a,l){return e=new ak(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$r(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ym(s),e}function lk(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function s$(e){if(!e)return ms;e=e._reactInternals;e:{if(ci(e)!==e||e.tag!==1)throw Error(Ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ce(171))}if(e.tag===1){var n=e.type;if(er(n))return s_(e,n,t)}return t}function i$(e,t,n,r,o,s,i,a,l){return e=fv(n,r,!0,e,o,s,i,a,l),e.context=s$(null),n=e.current,r=jn(),o=fs(n),s=$o(r,o),s.callback=t??null,cs(n,s,o),e.current.lanes=o,Ac(e,o,r),tr(e,r),e}function Id(e,t,n,r){var o=t.current,s=jn(),i=fs(o);return n=s$(n),t.context===null?t.context=n:t.pendingContext=n,t=$o(s,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cs(o,t,i),e!==null&&(Gr(e,o,i,s),$f(e,o,i)),i}function sd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function E5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dv(e,t){E5(e,t),(e=e.alternate)&&E5(e,t)}function ck(){return null}var a$=typeof reportError=="function"?reportError:function(e){console.error(e)};function hv(e){this._internalRoot=e}zd.prototype.render=hv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ce(409));Id(e,t,null,null)};zd.prototype.unmount=hv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ii(function(){Id(null,e,null,null)}),t[bo]=null}};function zd(e){this._internalRoot=e}zd.prototype.unstable_scheduleHydration=function(e){if(e){var t=IE();e={blockedOn:null,target:e,priority:t};for(var n=0;n<es.length&&t!==0&&t<es[n].priority;n++);es.splice(n,0,e),n===0&&BE(e)}};function pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _5(){}function uk(e,t,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=sd(i);s.call(c)}}var i=i$(t,r,e,0,null,!1,!1,"",_5);return e._reactRootContainer=i,e[bo]=i.current,ac(e.nodeType===8?e.parentNode:e),ii(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=sd(l);a.call(c)}}var l=fv(e,0,!1,null,null,!1,!1,"",_5);return e._reactRootContainer=l,e[bo]=l.current,ac(e.nodeType===8?e.parentNode:e),ii(function(){Id(t,l,n,r)}),l}function Gd(e,t,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=sd(i);a.call(l)}}Id(t,i,e,o)}else i=uk(n,t,e,o,r);return sd(i)}FE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Dl(t.pendingLanes);n!==0&&(Rm(t,n|1),tr(t,nn()),!($t&6)&&($a=nn()+500,xs()))}break;case 13:ii(function(){var r=To(e,1);if(r!==null){var o=jn();Gr(r,e,1,o)}}),dv(e,1)}};Om=function(e){if(e.tag===13){var t=To(e,134217728);if(t!==null){var n=jn();Gr(t,e,134217728,n)}dv(e,134217728)}};DE=function(e){if(e.tag===13){var t=fs(e),n=To(e,t);if(n!==null){var r=jn();Gr(n,e,t,r)}dv(e,t)}};IE=function(){return At};zE=function(e,t){var n=At;try{return At=e,t()}finally{At=n}};yp=function(e,t,n){switch(t){case"input":if(fp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Md(r);if(!o)throw Error(Ce(90));vE(r),fp(r,o)}}}break;case"textarea":yE(e,n);break;case"select":t=n.value,t!=null&&ca(e,!!n.multiple,t,!1)}};AE=av;bE=ii;var fk={usingClientEntryPoint:!1,Events:[Tc,ta,Md,$E,SE,av]},wl={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dk={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ko.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CE(e),e===null?null:e.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||ck,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{Td=Gu.inject(dk),oo=Gu}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fk;mr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pv(t))throw Error(Ce(200));return lk(e,t,null,n)};mr.createRoot=function(e,t){if(!pv(e))throw Error(Ce(299));var n=!1,r="",o=a$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=fv(e,1,!1,null,null,n,!1,r,o),e[bo]=t.current,ac(e.nodeType===8?e.parentNode:e),new hv(t)};mr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ce(188)):(e=Object.keys(e).join(","),Error(Ce(268,e)));return e=CE(t),e=e===null?null:e.stateNode,e};mr.flushSync=function(e){return ii(e)};mr.hydrate=function(e,t,n){if(!Bd(t))throw Error(Ce(200));return Gd(null,e,t,!0,n)};mr.hydrateRoot=function(e,t,n){if(!pv(e))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=a$;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=i$(t,null,e,1,n??null,o,!1,s,i),e[bo]=t.current,ac(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new zd(t)};mr.render=function(e,t,n){if(!Bd(t))throw Error(Ce(200));return Gd(null,e,t,!1,n)};mr.unmountComponentAtNode=function(e){if(!Bd(e))throw Error(Ce(40));return e._reactRootContainer?(ii(function(){Gd(null,null,e,!1,function(){e._reactRootContainer=null,e[bo]=null})}),!0):!1};mr.unstable_batchedUpdates=av;mr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bd(n))throw Error(Ce(200));if(e==null||e._reactInternals===void 0)throw Error(Ce(38));return Gd(e,t,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function l$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l$)}catch(e){console.error(e)}}l$(),lE.exports=mr;var c$=lE.exports;const hk=xm(c$);var $5=c$;op.createRoot=$5.createRoot,op.hydrateRoot=$5.hydrateRoot;function io(e){return Object.keys(e)}function V0(e){return e&&typeof e=="object"&&!Array.isArray(e)}function mv(e,t){const n={...e},r=t;return V0(e)&&V0(t)&&Object.keys(t).forEach(o=>{V0(r[o])&&o in e?n[o]=mv(n[o],r[o]):n[o]=r[o]}),n}function pk(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function mk(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function vk(e){const t=mk(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function j0(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function u$(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const o=`${r/16}${e}`;return t?j0(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?j0(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${e}`;return t?j0(s):s}}return r}return n}const xe=u$("rem",{shouldScale:!0}),S5=u$("em");function vv(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function f$(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function gk(e=null){const t=at.createContext(e);return[({children:o,value:s})=>je.jsx(t.Provider,{value:s,children:o}),()=>at.useContext(t)]}function vs(e,t="size",n=!0){if(e!==void 0)return f$(e)?n?xe(e):e:`var(--${t}-${e})`}function yk(e){return vs(e,"mantine-spacing")}function d$(e){return e===void 0?"var(--mantine-radius-default)":vs(e,"mantine-radius")}function So(e){return vs(e,"mantine-font-size")}function wk(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function xk(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Ek(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function _k(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=at.useState(n?t:Ek(e)),s=at.useRef();return at.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),o(s.current.matches),xk(s.current,i=>o(i.matches))},[e]),r}const gv=typeof document<"u"?at.useLayoutEffect:at.useEffect;function $k(e,t){const n=at.useRef(!1);at.useEffect(()=>()=>{n.current=!1},[]),at.useEffect(()=>{if(n.current)return e();n.current=!0},t)}const Sk=n8.useId||(()=>{});function Ak(){const e=Sk();return e?`mantine-${e.replace(/:/g,"")}`:""}function bk(e){const t=Ak(),[n,r]=at.useState(t);return gv(()=>{r(wk())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Tk(e,t){return _k("(prefers-reduced-motion: reduce)",e,t)}function h$(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=h$(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ui(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=h$(e))&&(r&&(r+=" "),r+=t);return r}const Pk={};function Ck(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,o])=>{t[r]?t[r]=ui(t[r],o):t[r]=o})}),t}function yv({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(i=>typeof i=="function"?i(e,n,r):i||Pk);return Ck(s)}function Qp({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,i)=>typeof i=="function"?{...s,...i(e,n,r)}:{...s,...i},{})}const p$=at.createContext(null);function fi(){const e=at.useContext(p$);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function kk(){return fi().cssVariablesResolver}function Mk(){return fi().classNamesPrefix}function wv(){return fi().getStyleNonce}function Nk(){return fi().withStaticClasses}function Rk(){return fi().headless}function Ok(){var e;return(e=fi().stylesTransform)==null?void 0:e.sx}function Lk(){var e;return(e=fi().stylesTransform)==null?void 0:e.styles}function Fk(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function Dk(e){let t=e.replace("#","");if(t.length===3){const i=t.split("");t=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(t.length===8){const i=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:i}}const n=parseInt(t,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function Ik(e){const[t,n,r,o]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:o||1}}function zk(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),u=s-a/2;let f,d,p;return l>=0&&l<1?(f=a,d=c,p=0):l>=1&&l<2?(f=c,d=a,p=0):l>=2&&l<3?(f=0,d=a,p=c):l>=3&&l<4?(f=0,d=c,p=a):l>=4&&l<5?(f=c,d=0,p=a):(f=a,d=0,p=c),{r:Math.round((f+u)*255),g:Math.round((d+u)*255),b:Math.round((p+u)*255),a:i||1}}function xv(e){return Fk(e)?Dk(e):e.startsWith("rgb")?Ik(e):e.startsWith("hsl")?zk(e):{r:0,g:0,b:0,a:1}}function Vu(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:o,a:s}=xv(e),i=1-t,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function vc(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function U0(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Bk(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function Gk(e){if(e.startsWith("oklch("))return(Bk(e)||0)/100;const{r:t,g:n,b:r}=xv(e),o=t/255,s=n/255,i=r/255,a=U0(o),l=U0(s),c=U0(i);return .2126*a+.7152*l+.0722*c}function xl(e,t=.179){return e.startsWith("var(")?!1:Gk(e)>t}function Cc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:xl(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:xl(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:xl(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,o]=e.split("."),s=o?Number(o):void 0,i=r in t.colors;if(i){const a=s!==void 0?t.colors[r][s]:t.colors[r][vc(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:xl(a,t.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:i,isLight:xl(e,t.luminanceThreshold),shade:s,variable:void 0}}function Kp(e,t){const n=Cc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function A5(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Kp(n.from,t),o=Kp(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function go(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:o}=xv(e);return`rgba(${n}, ${r}, ${o}, ${t})`}const Oi=go,Vk=({color:e,theme:t,variant:n,gradient:r,autoContrast:o})=>{const s=Cc({color:e,theme:t}),i=typeof o=="boolean"?o:t.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${xe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${xe(1)} solid transparent`}:{background:e,hover:Vu(e,.1),color:a,border:`${xe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:go(a,.1),hover:go(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:go(e,.1),hover:go(e,.12),color:e,border:`${xe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${xe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:go(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:go(e,.05),color:e,border:`${xe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:go(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:"transparent",hover:go(e,.12),color:e,border:`${xe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${xe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:Vu(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Vu(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Vu(t.white,.01),color:e,border:`${xe(1)} solid transparent`}:n==="gradient"?{background:A5(r,t),hover:A5(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${xe(1)} solid var(--mantine-color-default-border)`}:{}},jk={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},b5="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Ev={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:jk,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Vk,autoContrast:!1,luminanceThreshold:.3,fontFamily:b5,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:b5,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:xe(34),lineHeight:"1.3"},h2:{fontSize:xe(26),lineHeight:"1.35"},h3:{fontSize:xe(22),lineHeight:"1.4"},h4:{fontSize:xe(18),lineHeight:"1.45"},h5:{fontSize:xe(16),lineHeight:"1.5"},h6:{fontSize:xe(14),lineHeight:"1.5"}}},fontSizes:{xs:xe(12),sm:xe(14),md:xe(16),lg:xe(18),xl:xe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:xe(2),sm:xe(4),md:xe(8),lg:xe(16),xl:xe(32)},spacing:{xs:xe(10),sm:xe(12),md:xe(16),lg:xe(20),xl:xe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), 0 ${xe(1)} ${xe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(10)} ${xe(15)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(7)} ${xe(7)} ${xe(-5)}`,md:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(20)} ${xe(25)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(10)} ${xe(10)} ${xe(-5)}`,lg:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(28)} ${xe(23)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(12)} ${xe(12)} ${xe(-7)}`,xl:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(36)} ${xe(28)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(17)} ${xe(17)} ${xe(-7)}`},other:{},components:{}};function T5(e){return e==="auto"||e==="dark"||e==="light"}function Uk({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return T5(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&T5(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Hk="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",P5="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function H0(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function C5(e){if(!(e.primaryColor in e.colors))throw new Error(Hk);if(typeof e.primaryShade=="object"&&(!H0(e.primaryShade.dark)||!H0(e.primaryShade.light)))throw new Error(P5);if(typeof e.primaryShade=="number"&&!H0(e.primaryShade))throw new Error(P5)}function Xk(e,t){var r;if(!t)return C5(e),e;const n=mv(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),C5(n),n}const _v=at.createContext(null),Wk=()=>at.useContext(_v)||Ev;function di(){const e=at.useContext(_v);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function m$({theme:e,children:t,inherit:n=!0}){const r=Wk(),o=at.useMemo(()=>Xk(n?r:Ev,e),[e,r,n]);return je.jsx(_v.Provider,{value:o,children:t})}m$.displayName="@mantine/core/MantineThemeProvider";function Yk(){const e=di(),t=wv(),n=io(e.breakpoints).reduce((r,o)=>{const s=e.breakpoints[o].includes("px"),i=vk(e.breakpoints[o]),a=s?`${i-.1}px`:S5(i-.1),l=s?`${i}px`:S5(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return je.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function X0(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function El(e,t){return(Array.isArray(e)?e:[e]).reduce((r,o)=>`${o}{${r}}`,t)}function qk(e,t){const n=X0(e.variables),r=n?El(t,n):"",o=X0(e.dark),s=X0(e.light),i=o?El(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,o):"",a=s?El(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function Zk({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Cc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function k5(e,t){return Zk({color:e.colors[e.primaryColor][vc(e,t)],theme:e,autoContrast:null})}function ju({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:o=!0}){if(!e.colors[t])return{};if(n==="light"){const a=vc(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Oi(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Oi(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Oi(e.colors[t][a],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=vc(e,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Oi(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Oi(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Oi(e.colors[t][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...i}:i}function Qk(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Li(e,t,n){io(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const v$=e=>{const t=vc(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:xe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":k5(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":k5(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Li(r.variables,e.breakpoints,"breakpoint"),Li(r.variables,e.spacing,"spacing"),Li(r.variables,e.fontSizes,"font-size"),Li(r.variables,e.lineHeights,"line-height"),Li(r.variables,e.shadows,"shadow"),Li(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${e.primaryColor}-${i})`}),io(e.colors).forEach(s=>{const i=e.colors[s];if(Qk(i)){Object.assign(r.light,ju({theme:e,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,ju({theme:e,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,ju({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,ju({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const o=e.headings.sizes;return io(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||e.headings.fontWeight}),r};function Kk({theme:e,generator:t}){const n=v$(e),r=t==null?void 0:t(e);return r?mv(n,r):n}const W0=v$(Ev);function Jk(e){const t={variables:{},light:{},dark:{}};return io(e.variables).forEach(n=>{W0.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),io(e.light).forEach(n=>{W0.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),io(e.dark).forEach(n=>{W0.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function e6(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function g$({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=di(),r=wv(),o=kk(),s=Kk({theme:n,generator:o}),i=e===":root"&&t,a=i?Jk(s):s,l=qk(a,e);return l?je.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":e6(e)}`}}):null}g$.displayName="@mantine/CssVariables";function t6(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Fi(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function n6({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const o=at.useRef(),[s,i]=at.useState(()=>e.get(t)),a=r||s,l=at.useCallback(u=>{r||(Fi(u,n),i(u),e.set(u))},[e.set,a,r]),c=at.useCallback(()=>{i(t),Fi(t,n),e.clear()},[e.clear,t]);return at.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),gv(()=>{Fi(e.get(t),n)},[]),at.useEffect(()=>{var f;if(r)return Fi(r,n),()=>{};r===void 0&&Fi(s,n),o.current=window.matchMedia("(prefers-color-scheme: dark)");const u=d=>{s==="auto"&&Fi(d.matches?"dark":"light",n)};return(f=o.current)==null||f.addEventListener("change",u),()=>{var d;return(d=o.current)==null?void 0:d.removeEventListener("change",u)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function r6({respectReducedMotion:e,getRootElement:t}){gv(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}t6();function y$({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=Uk(),defaultColorScheme:u="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:p,stylesTransform:y}){const{colorScheme:v,setColorScheme:x,clearColorScheme:m}=n6({defaultColorScheme:u,forceColorScheme:p,manager:c,getRootElement:f});return r6({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),je.jsx(p$.Provider,{value:{colorScheme:v,setColorScheme:x,clearColorScheme:m,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:y},children:je.jsxs(m$,{theme:e,children:[i&&je.jsx(g$,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&je.jsx(Yk,{}),t]})})}y$.displayName="@mantine/core/MantineProvider";const o6={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function s6({theme:e,options:t,unstyled:n}){return ui((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||o6[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function i6({selector:e,stylesCtx:t,options:n,props:r,theme:o}){return yv({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function M5({selector:e,stylesCtx:t,theme:n,classNames:r,props:o}){return yv({theme:n,classNames:r,props:o,stylesCtx:t})[e]}function a6({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function l6({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function c6({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(o=>`${t}-${o}-${n}`)}function u6({themeName:e,theme:t,selector:n,props:r,stylesCtx:o}){return e.map(s=>{var i,a;return(a=yv({theme:t,classNames:(i=t.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function f6({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function d6({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:d,headless:p,transformedStyles:y}){return ui(s6({theme:e,options:t,unstyled:a||p}),u6({theme:e,themeName:n,selector:r,props:u,stylesCtx:f}),f6({options:t,classes:i,selector:r,unstyled:a}),M5({selector:r,stylesCtx:f,theme:e,classNames:s,props:u}),M5({selector:r,stylesCtx:f,theme:e,classNames:y,props:u}),i6({selector:r,stylesCtx:f,options:t,props:u,theme:e}),a6({rootSelector:c,selector:r,className:l}),l6({selector:r,classes:i,unstyled:a||p}),d&&!p&&c6({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function h6({theme:e,themeName:t,props:n,stylesCtx:r,selector:o}){return t.map(s=>{var i;return Qp({theme:e,styles:(i=e.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function Jp({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Jp({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function p6(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...vv(n[r])}}),t),{})}function m6({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=p6([a?{}:t==null?void 0:t(n,r,o),...i.map(c=>{var u,f,d;return(d=(f=(u=n.components)==null?void 0:u[c])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,o)}),e==null?void 0:e(n,r,o)]))==null?void 0:l[s]}function v6({theme:e,themeName:t,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:d}){return{...!d&&h6({theme:e,themeName:t,props:o,stylesCtx:s,selector:n}),...!d&&Qp({theme:e,styles:a,props:o,stylesCtx:s})[n],...!d&&Qp({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...m6({theme:e,props:o,stylesCtx:s,vars:c,varsResolver:u,selector:n,themeName:t,headless:f}),...i===n?Jp({style:l,theme:e}):null,...Jp({style:r==null?void 0:r.style,theme:e})}}function g6({props:e,stylesCtx:t,themeName:n}){var i;const r=di(),o=(i=Lk())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:e,theme:r,ctx:t})),...n.map(c=>{var u;return o((u=r.components[c])==null?void 0:u.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!o}}function Ur({name:e,classes:t,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:f}){const d=di(),p=Mk(),y=Nk(),v=Rk(),x=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:m,getTransformedStyles:g}=g6({props:n,stylesCtx:r,themeName:x});return(w,E)=>({className:d6({theme:d,options:E,themeName:x,selector:w,classNamesPrefix:p,classNames:l,classes:t,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:y,headless:v,transformedStyles:g([E==null?void 0:E.styles,c])}),style:v6({theme:d,themeName:x,selector:w,options:E,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:u,varsResolver:f,headless:v,withStylesTransform:m})})}function Tn(e,t,n){var i;const r=di(),o=(i=r.components[e])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...t,...s,...vv(n)}}function Y0(e){return io(e).reduce((t,n)=>e[n]!==void 0?`${t}${pk(n)}:${e[n]};`:t,"").trim()}function y6({selector:e,styles:t,media:n,container:r}){const o=t?Y0(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Y0(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Y0(a.styles)}}}`):[];return`${o?`${e}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function w6(e){const t=wv();return je.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:y6(e)}})}function $v(e){const{m:t,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:d,pt:p,pb:y,pl:v,pr:x,pe:m,ps:g,bd:w,bg:E,c:A,opacity:$,ff:k,fz:N,fw:X,lts:j,ta:J,lh:le,fs:_e,tt:Z,td:Me,w:we,miw:Je,maw:ye,h:Ge,mih:De,mah:rt,bgsz:st,bgp:Bt,bgr:Tt,bga:Mt,pos:pn,top:Cn,left:gr,bottom:$s,right:vi,inset:gi,display:Ss,flex:jc,hiddenFrom:No,visibleFrom:Uc,lightHidden:Hc,darkHidden:y1,sx:Ln,...Xc}=e;return{styleProps:vv({m:t,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:d,pt:p,pb:y,pl:v,pr:x,pe:m,ps:g,bd:w,bg:E,c:A,opacity:$,ff:k,fz:N,fw:X,lts:j,ta:J,lh:le,fs:_e,tt:Z,td:Me,w:we,miw:Je,maw:ye,h:Ge,mih:De,mah:rt,bgsz:st,bgp:Bt,bgr:Tt,bga:Mt,pos:pn,top:Cn,left:gr,bottom:$s,right:vi,inset:gi,display:Ss,flex:jc,hiddenFrom:No,visibleFrom:Uc,lightHidden:Hc,darkHidden:y1,sx:Ln}),rest:Xc}}const x6={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Sv(e,t){const n=Cc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function E6(e,t){const n=Cc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Sv(e,t)}function _6(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const[n,r,...o]=e.split(" ").filter(i=>i.trim()!=="");let s=`${xe(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${Sv(o.join(" "),t)}`),s.trim()}return e}const N5={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function $6(e){return typeof e=="string"&&e in N5?N5[e]:e}const S6=["h1","h2","h3","h4","h5","h6"];function A6(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&S6.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?xe(e):e}function b6(e){return e}const T6=["h1","h2","h3","h4","h5","h6"];function P6(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&T6.includes(e)?`var(--mantine-${e}-line-height)`:e}function C6(e){return typeof e=="number"?xe(e):e}function k6(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return xe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const q0={color:Sv,textColor:E6,fontSize:A6,spacing:k6,identity:b6,size:C6,lineHeight:P6,fontFamily:$6,border:_6};function R5(e){return e.replace("(min-width: ","").replace("em)","")}function M6({media:e,...t}){const r=Object.keys(e).sort((o,s)=>Number(R5(o))-Number(R5(s))).map(o=>({query:o,styles:e[o]}));return{...t,media:r}}function N6(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function R6(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function O6(e){return typeof e=="object"&&e!==null?io(e).filter(t=>t!=="base"):[]}function L6(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function F6({styleProps:e,data:t,theme:n}){return M6(io(e).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=t[o],i=Array.isArray(s.property)?s.property:[s.property],a=R6(e[o]);if(!N6(e[o]))return i.forEach(c=>{r.inlineStyles[c]=q0[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=O6(e[o]);return i.forEach(c=>{a&&(r.styles[c]=q0[s.type](a,n)),l.forEach(u=>{const f=`(min-width: ${n.breakpoints[u]})`;r.media[f]={...r.media[f],[c]:q0[s.type](L6(e[o],u),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function D6(){return`__m__-${at.useId().replace(/:/g,"")}`}function w$(e){return e.startsWith("data-")?e:`data-${e}`}function I6(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[w$(n)]=e[n]),t},{})}function x$(e){return e?typeof e=="string"?{[w$(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...x$(n)}),{}):I6(e):null}function em(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...em(r,t)}),{}):typeof e=="function"?e(t):e??{}}function z6({theme:e,style:t,vars:n,styleProps:r}){const o=em(t,e),s=em(n,e);return{...o,...s,...r}}const E$=at.forwardRef(({component:e,style:t,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:d,...p},y)=>{var N;const v=di(),x=e||"div",{styleProps:m,rest:g}=$v(p),w=Ok(),E=(N=w==null?void 0:w())==null?void 0:N(m.sx),A=D6(),$=F6({styleProps:m,theme:v,data:x6}),k={ref:y,style:z6({theme:v,style:t,vars:n,styleProps:$.inlineStyles}),className:ui(r,E,{[A]:$.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":f$(i)?void 0:i||void 0,size:d,...x$(s),...g};return je.jsxs(je.Fragment,{children:[$.hasResponsiveStyles&&je.jsx(w6,{selector:`.${A}`,styles:$.styles,media:$.media}),typeof f=="function"?f(k):je.jsx(x,{...k})]})});E$.displayName="@mantine/core/Box";const dn=E$;function _$(e){return e}function Mo(e){const t=at.forwardRef(e);return t.extend=_$,t.withProps=n=>{const r=at.forwardRef((o,s)=>je.jsx(t,{...n,...o,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Vd(e){const t=at.forwardRef(e);return t.withProps=n=>{const r=at.forwardRef((o,s)=>je.jsx(t,{...n,...o,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=_$,t}var $$={root:"m_87cf2631"};const B6={__staticSelector:"UnstyledButton"},Av=Vd((e,t)=>{const n=Tn("UnstyledButton",B6,e),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...u}=n,f=Ur({name:s,props:n,classes:$$,className:r,style:c,classNames:a,styles:l,unstyled:i});return je.jsx(dn,{...f("root",{focusable:!0}),component:o,ref:t,type:o==="button"?"button":void 0,...u})});Av.classes=$$;Av.displayName="@mantine/core/UnstyledButton";const _l=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${xe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),Uu={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{..._l("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{..._l("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{..._l("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{..._l("top"),common:{transformOrigin:"top left"}},"pop-top-right":{..._l("top"),common:{transformOrigin:"top right"}}},O5={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function G6({transition:e,state:t,duration:n,timingFunction:r}){const o={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in Uu?{transitionProperty:Uu[e].transitionProperty,...o,...Uu[e].common,...Uu[e][O5[t]]}:{}:{transitionProperty:e.transitionProperty,...o,...e.common,...e[O5[t]]}}function V6({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const u=di(),f=Tk(),d=u.respectReducedMotion?f:!1,[p,y]=at.useState(d?0:e),[v,x]=at.useState(r?"entered":"exited"),m=at.useRef(-1),g=at.useRef(-1),w=at.useRef(-1),E=$=>{const k=$?o:s,N=$?i:a;window.clearTimeout(m.current);const X=d?0:$?e:t;y(X),X===0?(typeof k=="function"&&k(),typeof N=="function"&&N(),x($?"entered":"exited")):w.current=requestAnimationFrame(()=>{hk.flushSync(()=>{x($?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof k=="function"&&k(),x($?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof N=="function"&&N(),x($?"entered":"exited")},X)})})},A=$=>{if(window.clearTimeout(g.current),typeof($?l:c)!="number"){E($);return}g.current=window.setTimeout(()=>{E($)},$?l:c)};return $k(()=>{A(r)},[r]),at.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:p,transitionStatus:v,transitionTimingFunction:n||"ease"}}function S$({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:d}){const{transitionDuration:p,transitionStatus:y,transitionTimingFunction:v}=V6({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:d});return p===0?o?je.jsx(je.Fragment,{children:s({})}):e?s({display:"none"}):null:y==="exited"?e?s({display:"none"}):null:je.jsx(je.Fragment,{children:s(G6({transition:t,duration:p,state:y,timingFunction:v}))})}S$.displayName="@mantine/core/Transition";var zr={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const j6=at.forwardRef(({className:e,...t},n)=>je.jsxs(dn,{component:"span",className:ui(zr.barsLoader,e),...t,ref:n,children:[je.jsx("span",{className:zr.bar}),je.jsx("span",{className:zr.bar}),je.jsx("span",{className:zr.bar})]})),U6=at.forwardRef(({className:e,...t},n)=>je.jsxs(dn,{component:"span",className:ui(zr.dotsLoader,e),...t,ref:n,children:[je.jsx("span",{className:zr.dot}),je.jsx("span",{className:zr.dot}),je.jsx("span",{className:zr.dot})]})),H6=at.forwardRef(({className:e,...t},n)=>je.jsx(dn,{component:"span",className:ui(zr.ovalLoader,e),...t,ref:n})),A$={bars:j6,oval:H6,dots:U6},X6={loaders:A$,type:"oval"},W6=(e,{size:t,color:n})=>({root:{"--loader-size":vs(t,"loader-size"),"--loader-color":n?Kp(n,e):void 0}}),jd=Mo((e,t)=>{const n=Tn("Loader",X6,e),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:u,unstyled:f,loaders:d,variant:p,children:y,...v}=n,x=Ur({name:"Loader",props:n,classes:zr,className:a,style:l,classNames:c,styles:u,unstyled:f,vars:i,varsResolver:W6});return y?je.jsx(dn,{...x("root"),ref:t,...v,children:y}):je.jsx(dn,{...x("root"),ref:t,component:d[s],variant:p,size:r,...v})});jd.defaultLoaders=A$;jd.classes=zr;jd.displayName="@mantine/core/Loader";const[Y6,Ud]=gk({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var kr={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const L5={},q6=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${So(t)} - ${xe(2)})`}}),Hd=Mo((e,t)=>{const n=Tn("InputDescription",L5,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:d,...p}=Tn("InputDescription",L5,n),y=Ud(),v=Ur({name:["InputWrapper",u],props:n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:q6}),x=f&&(y==null?void 0:y.getStyles)||v;return je.jsx(dn,{component:"p",ref:t,variant:d,size:c,...x("description",y!=null&&y.getStyles?{className:o,style:s}:void 0),...p})});Hd.classes=kr;Hd.displayName="@mantine/core/InputDescription";const Z6={},Q6=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${So(t)} - ${xe(2)})`}}),Xd=Mo((e,t)=>{const n=Tn("InputError",Z6,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:d,...p}=n,y=Ur({name:["InputWrapper",u],props:n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:Q6}),v=Ud(),x=f&&(v==null?void 0:v.getStyles)||y;return je.jsx(dn,{component:"p",ref:t,variant:d,size:c,...x("error",v!=null&&v.getStyles?{className:o,style:s}:void 0),...p})});Xd.classes=kr;Xd.displayName="@mantine/core/InputError";const F5={labelElement:"label"},K6=(e,{size:t})=>({label:{"--input-label-size":So(t),"--input-asterisk-color":void 0}}),Wd=Mo((e,t)=>{const n=Tn("InputLabel",F5,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:u,required:f,htmlFor:d,onMouseDown:p,children:y,__staticSelector:v,variant:x,mod:m,...g}=Tn("InputLabel",F5,n),w=Ur({name:["InputWrapper",v],props:n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:K6}),E=Ud(),A=(E==null?void 0:E.getStyles)||w;return je.jsxs(dn,{...A("label",E!=null&&E.getStyles?{className:o,style:s}:void 0),component:c,variant:x,size:u,ref:t,htmlFor:c==="label"?d:void 0,mod:[{required:f},m],onMouseDown:$=>{p==null||p($),!$.defaultPrevented&&$.detail>1&&$.preventDefault()},...g,children:[y,f&&je.jsx("span",{...A("required"),"aria-hidden":!0,children:" *"})]})});Wd.classes=kr;Wd.displayName="@mantine/core/InputLabel";const D5={},bv=Mo((e,t)=>{const n=Tn("InputPlaceholder",D5,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:u,error:f,mod:d,...p}=Tn("InputPlaceholder",D5,n),y=Ur({name:["InputPlaceholder",c],props:n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return je.jsx(dn,{...y("placeholder"),mod:[{error:!!f},d],component:"span",variant:u,ref:t,...p})});bv.classes=kr;bv.displayName="@mantine/core/InputPlaceholder";function J6(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),o=e.slice(0,r),s=e.slice(r+1),i=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const eM={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},tM=(e,{size:t})=>({label:{"--input-label-size":So(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${So(t)} - ${xe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${So(t)} - ${xe(2)})`}}),Tv=Mo((e,t)=>{const n=Tn("InputWrapper",eM,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:d,inputWrapperOrder:p,label:y,error:v,description:x,labelProps:m,descriptionProps:g,errorProps:w,labelElement:E,children:A,withAsterisk:$,id:k,required:N,__stylesApiProps:X,mod:j,...J}=n,le=Ur({name:["InputWrapper",f],props:X||n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:tM}),_e={size:c,variant:u,__staticSelector:f},Z=bk(k),Me=typeof $=="boolean"?$:N,we=(w==null?void 0:w.id)||`${Z}-error`,Je=(g==null?void 0:g.id)||`${Z}-description`,ye=Z,Ge=!!v&&typeof v!="boolean",De=!!x,rt=`${Ge?we:""} ${De?Je:""}`,st=rt.trim().length>0?rt.trim():void 0,Bt=(m==null?void 0:m.id)||`${Z}-label`,Tt=y&&je.jsx(Wd,{labelElement:E,id:Bt,htmlFor:ye,required:Me,..._e,...m,children:y},"label"),Mt=De&&je.jsx(Hd,{...g,..._e,size:(g==null?void 0:g.size)||_e.size,id:(g==null?void 0:g.id)||Je,children:x},"description"),pn=je.jsx(at.Fragment,{children:d(A)},"input"),Cn=Ge&&at.createElement(Xd,{...w,..._e,size:(w==null?void 0:w.size)||_e.size,key:"error",id:(w==null?void 0:w.id)||we},v),gr=p.map($s=>{switch($s){case"label":return Tt;case"input":return pn;case"description":return Mt;case"error":return Cn;default:return null}});return je.jsx(Y6,{value:{getStyles:le,describedBy:st,inputId:ye,labelId:Bt,...J6(p,{hasDescription:De,hasError:Ge})},children:je.jsx(dn,{ref:t,variant:u,size:c,mod:[{error:!!v},j],...le("root"),...J,children:gr})})});Tv.classes=kr;Tv.displayName="@mantine/core/InputWrapper";const nM={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},rM=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":vs(t.size,"input-height"),"--input-fz":So(t.size),"--input-radius":t.radius===void 0?void 0:d$(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?xe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?xe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?vs(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),jr=Vd((e,t)=>{const n=Tn("Input",nM,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:d,error:p,disabled:y,leftSection:v,leftSectionProps:x,leftSectionWidth:m,rightSection:g,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:A,leftSectionPointerEvents:$,variant:k,vars:N,pointer:X,multiline:j,radius:J,id:le,withAria:_e,withErrorStyles:Z,mod:Me,inputSize:we,...Je}=n,{styleProps:ye,rest:Ge}=$v(Je),De=Ud(),rt={offsetBottom:De==null?void 0:De.offsetBottom,offsetTop:De==null?void 0:De.offsetTop},st=Ur({name:["Input",c],props:u||n,classes:kr,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:rt,rootSelector:"wrapper",vars:N,varsResolver:rM}),Bt=_e?{required:l,disabled:y,"aria-invalid":!!p,"aria-describedby":De==null?void 0:De.describedBy,id:(De==null?void 0:De.inputId)||le}:{};return je.jsxs(dn,{...st("wrapper"),...ye,...d,mod:[{error:!!p&&Z,pointer:X,disabled:y,multiline:j,"data-with-right-section":!!g,"data-with-left-section":!!v},Me],variant:k,size:f,children:[v&&je.jsx("div",{...x,"data-position":"left",...st("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:v}),je.jsx(dn,{component:"input",...Ge,...Bt,ref:t,required:l,mod:{disabled:y,error:!!p&&Z},variant:k,__size:we,...st("input")}),g&&je.jsx("div",{...w,"data-position":"right",...st("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:g})]})});jr.classes=kr;jr.Wrapper=Tv;jr.Label=Wd;jr.Error=Xd;jr.Description=Hd;jr.Placeholder=bv;jr.displayName="@mantine/core/Input";function oM(e,t,n){const r=Tn(e,t,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:d,__stylesApiProps:p,errorProps:y,labelProps:v,descriptionProps:x,wrapperProps:m,id:g,size:w,style:E,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:N,vars:X,mod:j,...J}=r,{styleProps:le,rest:_e}=$v(J),Z={label:o,description:s,error:i,required:a,classNames:l,className:u,__staticSelector:d,__stylesApiProps:p||r,errorProps:y,labelProps:v,descriptionProps:x,unstyled:f,styles:c,size:w,style:E,inputContainer:A,inputWrapperOrder:$,withAsterisk:k,variant:N,id:g,mod:j,...m};return{..._e,classNames:l,styles:c,unstyled:f,wrapperProps:{...Z,...le},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:p||r,error:i,variant:N,id:g}}}const sM={__staticSelector:"InputBase",withAria:!0},Yd=Vd((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=oM("InputBase",sM,e);return je.jsx(jr.Wrapper,{...r,children:je.jsx(jr,{...n,...o,ref:t})})});Yd.classes={...jr.classes,...jr.Wrapper.classes};Yd.displayName="@mantine/core/InputBase";var qd={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const I5={orientation:"horizontal"},iM=(e,{borderWidth:t})=>({group:{"--button-border-width":xe(t)}}),Pv=Mo((e,t)=>{const n=Tn("ButtonGroup",I5,e),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:d,...p}=Tn("ButtonGroup",I5,e),y=Ur({name:"ButtonGroup",props:n,classes:qd,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:iM,rootSelector:"group"});return je.jsx(dn,{...y("group"),ref:t,variant:f,mod:[{"data-orientation":l},d],role:"group",...p})});Pv.classes=qd;Pv.displayName="@mantine/core/ButtonGroup";const aM={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${xe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},lM={},cM=(e,{radius:t,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":vs(s,"button-height"),"--button-padding-x":vs(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?So(s.replace("compact-","")):So(s),"--button-radius":t===void 0?void 0:d$(t),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},kc=Vd((e,t)=>{const n=Tn("Button",lM,e),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:d,radius:p,loading:y,loaderProps:v,gradient:x,classNames:m,styles:g,unstyled:w,"data-disabled":E,autoContrast:A,mod:$,...k}=n,N=Ur({name:"Button",props:n,classes:qd,className:s,style:r,classNames:m,styles:g,unstyled:w,vars:o,varsResolver:cM}),X=!!c,j=!!u;return je.jsxs(Av,{ref:t,...N("root",{active:!a&&!y&&!E}),unstyled:w,variant:d,disabled:a||y,mod:[{disabled:a||E,loading:y,block:f,"with-left-section":X,"with-right-section":j},$],...k,children:[je.jsx(S$,{mounted:!!y,transition:aM,duration:150,children:J=>je.jsx(dn,{component:"span",...N("loader",{style:J}),"aria-hidden":!0,children:je.jsx(jd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...v})})}),je.jsxs("span",{...N("inner"),children:[c&&je.jsx(dn,{component:"span",...N("section"),mod:{position:"left"},children:c}),je.jsx(dn,{component:"span",mod:{loading:y},...N("label"),children:l}),u&&je.jsx(dn,{component:"span",...N("section"),mod:{position:"right"},children:u})]})]})});kc.classes=qd;kc.displayName="@mantine/core/Button";kc.Group=Pv;var b$={root:"m_6d731127"};const uM={gap:"md",align:"stretch",justify:"flex-start"},fM=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":yk(t),"--stack-align":n,"--stack-justify":r}}),Zd=Mo((e,t)=>{const n=Tn("Stack",uM,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:u,gap:f,variant:d,...p}=n,y=Ur({name:"Stack",props:n,classes:b$,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:fM});return je.jsx(dn,{ref:t,...y("root"),variant:d,...p})});Zd.classes=b$;Zd.displayName="@mantine/core/Stack";const dM={},id=Mo((e,t)=>{const n=Tn("TextInput",dM,e);return je.jsx(Yd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});id.classes=Yd.classes;id.displayName="@mantine/core/TextInput";function hM(e){const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("load",()=>{if(window.cv)e();else{let o=0;const s=()=>{o++,window.cv?e():o>100?console.error("Failed to load OpenCV.js"):setTimeout(s,10)};s()}}),t.src="https://docs.opencv.org/4.5.2/opencv.js";const n=document.getElementsByTagName("script")[0];n&&n.parentNode?n.parentNode.insertBefore(t,n):document.head.appendChild(t)}let _n=[],Qd=(e,t)=>{let n=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},l:0,lc:0,listen(o,s){return r.lc=n.push(o,s||r.l)/2,()=>{let i=n.indexOf(o);~i&&(n.splice(i,2),--r.lc||r.off())}},notify(o,s){let i=!_n.length;for(let a=0;a<n.length;a+=2)_n.push(n[a],n[a+1],r.value,o,s);if(i){for(let a=0;a<_n.length;a+=5){let l;for(let c=a+1;!l&&(c+=5)<_n.length;)_n[c]<_n[a+1]&&(l=_n.push(_n[a],_n[a+1],_n[a+2],_n[a+3],_n[a+4]));l||_n[a](_n[a+2],_n[a+3],_n[a+4])}_n.length=0}},off(){},set(o){let s=r.value;s!==o&&(r.value=o,r.notify(s))},subscribe(o,s){let i=r.listen(o,s);return o(r.value),i},value:e};return r};function pM(e,t,n){let r=new Set([...t,void 0]);return e.listen((o,s,i)=>{r.has(i)&&n(o,s,i)})}function tm(e,t={}){let n=at.useCallback(o=>t.keys?pM(e,t.keys,o):e.listen(o),[t.keys,e]),r=e.get.bind(e);return at.useSyncExternalStore(n,r,r)}const ad=Qd("SAMPLE"),ld=Qd("TEXT"),mM=Qd(!1),Z0=Qd([]);function vM({onGenerate:e}){const t=tm(ad),n=tm(ld);return je.jsxs(Zd,{children:[je.jsx(id,{placeholder:"left side text",value:t,onChange:r=>ad.set(r.currentTarget.value)}),je.jsx(id,{placeholder:"right side text",value:n,onChange:r=>ld.set(r.currentTarget.value)}),je.jsx(kc,{onClick:e,children:"Generate"})]})}const z5=1e4,B5=1e3,Hu=1,gM=.001;function G5(e){const t=new OffscreenCanvas(z5,B5),n=t.getContext("2d");if(!n)throw new Error("Failed to init canvas");const r=window.cv;t.width=z5,t.height=B5,n.fillStyle="lightgrey",n.fillRect(0,0,t.width,t.height),n.font="720px Arial",n.fillStyle="black",n.fillText(e,100,900);const o=n.getImageData(0,0,t.width,t.height),s=r.matFromImageData(o),i=new r.Mat;r.cvtColor(s,i,r.COLOR_RGBA2GRAY);const a=new r.Mat;r.threshold(i,a,128,255,r.THRESH_BINARY_INV);const l=new r.MatVector,c=new r.Mat;r.findContours(a,l,c,r.RETR_CCOMP,r.CHAIN_APPROX_NONE);const u=T$(),f=[];for(let d=0;d<l.size();++d){const p=l.get(d),y=c.intPtr(0,d)[3],v=gM*r.arcLength(p,!0),x=new r.Mat;r.approxPolyDP(p,x,v,!0);const m=[];for(let w=0;w<x.rows;++w)m.push({x:x.data32S[w*2]*Hu/10,y:x.data32S[w*2+1]*Hu/10});m.push({x:x.data32S[0]*Hu/10,y:x.data32S[1]*Hu/10});const g=yM(m);m.forEach(w=>nm(u,w)),m.forEach(w=>nm(g,w)),f.push({points:m,parentIdx:y,bounds:g}),x.delete()}return s.delete(),i.delete(),a.delete(),l.delete(),c.delete(),{polygons:f,bounds:u}}function T$(){return{left:Number.MAX_SAFE_INTEGER,right:Number.MIN_SAFE_INTEGER,top:Number.MAX_SAFE_INTEGER,bottom:Number.MIN_SAFE_INTEGER}}function nm(e,t){e.left=Math.min(e.left,t.x),e.right=Math.max(e.right,t.x),e.top=Math.min(e.top,t.y),e.bottom=Math.max(e.bottom,t.y)}function yM(e){const t=T$();return e.forEach(n=>nm(t,n)),t}function wM(e){return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}const P$=e=>e.reduce((t,n)=>Array.isArray(n)?t.concat(P$(n)):t.concat(n),[]);var lt=P$;const xM=e=>Object.assign({},e);var EM=xM;const _M=(e,t,n)=>(e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e);var $M=_M;const SM=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var Cv=SM;const AM=Cv,bM=e=>{const t=AM();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var TM=bM;const PM=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e);var C$=PM;const CM=(e,t)=>{const n=t[0],r=t[1],o=t[2],s=t[3],i=t[4],a=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],p=t[11],y=t[12],v=t[13],x=t[14],m=t[15],g=n*a-r*i,w=n*l-o*i,E=n*c-s*i,A=r*l-o*a,$=r*c-s*a,k=o*c-s*l,N=u*v-f*y,X=u*x-d*y,j=u*m-p*y,J=f*x-d*v,le=f*m-p*v,_e=d*m-p*x;let Z=g*_e-w*le+E*J+A*j-$*X+k*N;return Z?(Z=1/Z,e[0]=(a*_e-l*le+c*J)*Z,e[1]=(o*le-r*_e-s*J)*Z,e[2]=(v*k-x*$+m*A)*Z,e[3]=(d*$-f*k-p*A)*Z,e[4]=(l*j-i*_e-c*X)*Z,e[5]=(n*_e-o*j+s*X)*Z,e[6]=(x*E-y*k-m*w)*Z,e[7]=(u*k-d*E+p*w)*Z,e[8]=(i*le-a*j+c*N)*Z,e[9]=(r*j-n*le-s*N)*Z,e[10]=(y*$-v*E+m*g)*Z,e[11]=(f*E-u*$-p*g)*Z,e[12]=(a*X-i*J-l*N)*Z,e[13]=(n*J-r*X+o*N)*Z,e[14]=(v*w-y*A-x*g)*Z,e[15]=(u*A-f*w+d*g)*Z,e):null};var kM=CM;const MM=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15];var NM=MM;const RM=1e5,OM=1e-5,LM=1e-13,FM=Math.PI*2;var wt={EPS:OM,NEPS:LM,TAU:FM,spatialResolution:RM};const{NEPS:DM}=wt,k$=e=>Math.abs(e)<DM?0:e,IM=e=>k$(Math.sin(e)),zM=e=>k$(Math.cos(e));var Pn={sin:IM,cos:zM};const BM=e=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);var M$=BM;const{EPS:GM}=wt,{sin:VM,cos:jM}=Pn,UM=M$,HM=(e,t,n)=>{let[r,o,s]=n;const i=r*r+o*o+s*s;if(Math.abs(i)<GM)return UM(e);const a=1/Math.sqrt(i);r*=a,o*=a,s*=a;const l=VM(t),c=jM(t),u=1-c;return e[0]=r*r*u+c,e[1]=o*r*u+s*l,e[2]=s*r*u-o*l,e[3]=0,e[4]=r*o*u-s*l,e[5]=o*o*u+c,e[6]=s*o*u+r*l,e[7]=0,e[8]=r*s*u+o*l,e[9]=o*s*u-r*l,e[10]=s*s*u+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var N$=HM;const XM=(e,t)=>(e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e);var WM=XM;const{sin:Q0,cos:K0}=Pn,YM=(e,t,n,r)=>{const o=Q0(t),s=K0(t),i=Q0(n),a=K0(n),l=Q0(r),c=K0(r);return e[0]=a*s,e[1]=a*o,e[2]=-i,e[3]=0,e[4]=l*i*s-c*o,e[5]=c*s+l*i*o,e[6]=l*a,e[7]=0,e[8]=l*o+c*i*s,e[9]=c*i*o-l*s,e[10]=c*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var qM=YM;const ZM=(e,t)=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e);var QM=ZM;const KM=Cv,JM=(e,t,n,r,o,s,i,a,l,c,u,f,d,p,y,v)=>{const x=KM();return x[0]=e,x[1]=t,x[2]=n,x[3]=r,x[4]=o,x[5]=s,x[6]=i,x[7]=a,x[8]=l,x[9]=c,x[10]=u,x[11]=f,x[12]=d,x[13]=p,x[14]=y,x[15]=v,x};var eN=JM;const tN=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e);var R$=tN;const nN=(e,t,n)=>(e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e);var O$=nN;const rN=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2];var Kd=rN;const oN=Kd,sN=(e,t)=>{const n=e[0],r=e[1],o=e[2],s=t[0],i=t[1],a=t[2],l=Math.sqrt(n*n+r*r+o*o),c=Math.sqrt(s*s+i*i+a*a),u=l*c,f=u&&oN(e,t)/u;return Math.acos(Math.min(Math.max(f,-1),1))};var iN=sN;const aN=()=>[0,0,0];var Jd=aN;const lN=Jd,cN=e=>{const t=lN();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};var uN=cN;const fN=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);var L$=fN;const dN=(e,t,n)=>{const r=t[0],o=t[1],s=t[2],i=n[0],a=n[1],l=n[2];return e[0]=o*l-s*a,e[1]=s*i-r*l,e[2]=r*a-o*i,e};var Mc=dN;const hN=(e,t)=>{const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)};var F$=hN;const pN=(e,t,n)=>(e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e);var mN=pN;const vN=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];var gN=vN;const yN=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e);var wN=yN;const xN=Jd,EN=(e,t,n)=>{const r=xN();return r[0]=e,r[1]=t,r[2]=n,r};var _N=EN;const $N=(e,t,n=0)=>(e[0]=t[0],e[1]=t[1],e[2]=n,e);var SN=$N;const AN=e=>{const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)};var D$=AN;const bN=(e,t,n,r)=>(e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e[2]=t[2]+r*(n[2]-t[2]),e);var TN=bN;const PN=(e,t,n)=>(e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e);var I$=PN;const CN=(e,t,n)=>(e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e);var z$=CN;const kN=(e,t,n)=>(e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e);var MN=kN;const NN=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e);var RN=NN;const ON=(e,t)=>{const n=t[0],r=t[1],o=t[2];let s=n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=o*s,e};var kv=ON;const LN=R$,FN=Jd,DN=Mc,IN=(e,t)=>{const n=LN(FN(),t),r=0+(n[0]<n[1]&&n[0]<n[2]),o=0+(n[1]<=n[0]&&n[1]<n[2]),s=0+(n[2]<=n[0]&&n[2]<=n[1]);return DN(e,t,[r,o,s])};var zN=IN;const BN=(e,t,n,r)=>{const o=[],s=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],s[0]=o[0],s[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),s[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e};var GN=BN;const VN=(e,t,n,r)=>{const o=[],s=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],s[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),s[1]=o[1],s[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e};var jN=VN;const UN=(e,t,n,r)=>{const o=[],s=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],s[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),s[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=t[2],e};var HN=UN;const XN=(e,t,n)=>(e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e);var B$=XN;const WN=(e,t,n)=>(e[0]=Math.round(t[0]/n)*n+0,e[1]=Math.round(t[1]/n)*n+0,e[2]=Math.round(t[2]/n)*n+0,e);var YN=WN;const qN=(e,t)=>{const n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o};var G$=qN;const ZN=e=>{const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r};var V$=ZN;const QN=(e,t,n)=>(e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e);var e1=QN;const KN=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}]`;var JN=KN;const eR=(e,t,n)=>{const r=t[0],o=t[1],s=t[2];let i=n[3]*r+n[7]*o+n[11]*s+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*s+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*s+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*s+n[14])/i,e};var tR=eR,qe={abs:R$,add:O$,angle:iN,clone:uN,copy:L$,create:Jd,cross:Mc,distance:F$,divide:mN,dot:Kd,equals:gN,fromScalar:wN,fromValues:_N,fromVec2:SN,length:D$,lerp:TN,max:I$,min:z$,multiply:MN,negate:RN,normalize:kv,orthogonal:zN,rotateX:GN,rotateY:jN,rotateZ:HN,scale:B$,snap:YN,squaredDistance:G$,squaredLength:V$,subtract:e1,toString:JN,transform:tR};const Go=qe,nR=N$,rR=(e,t,n)=>{const r=Go.normalize(Go.create(),t),o=Go.normalize(Go.create(),n),s=Go.cross(Go.create(),o,r),i=Go.dot(o,r);if(i===-1)return nR(e,Math.PI,Go.orthogonal(s,r));const a=1/(1+i);return e[0]=s[0]*s[0]*a+i,e[1]=s[1]*s[0]*a-s[2],e[2]=s[2]*s[0]*a+s[1],e[3]=0,e[4]=s[0]*s[1]*a+s[2],e[5]=s[1]*s[1]*a+i,e[6]=s[2]*s[1]*a-s[0],e[7]=0,e[8]=s[0]*s[2]*a-s[1],e[9]=s[1]*s[2]*a+s[0],e[10]=s[2]*s[2]*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var oR=rR;const{sin:sR,cos:iR}=Pn,aR=(e,t)=>{const n=sR(t),r=iR(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var lR=aR;const{sin:cR,cos:uR}=Pn,fR=(e,t)=>{const n=cR(t),r=uR(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var dR=fR;const{sin:hR,cos:pR}=Pn,mR=(e,t)=>{const n=hR(t),r=pR(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var vR=mR;const gR=e=>e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[12]===0&&e[13]===0&&e[14]===0&&e[15]===1;var yR=gR;const wR=e=>ho(e[1])&&ho(e[2])&&ho(e[3])&&ho(e[4])&&ho(e[6])&&ho(e[7])&&ho(e[8])&&ho(e[9])&&ho(e[11])&&e[15]===1,ho=e=>Math.abs(e)<Number.EPSILON;var xR=wR;const ER=e=>{const t=e[4]*e[9]-e[8]*e[5],n=e[8]*e[1]-e[0]*e[9],r=e[0]*e[5]-e[4]*e[1];return t*e[2]+n*e[6]+r*e[10]<0};var _R=ER;const $R=(e,t)=>{const[n,r,o,s]=t;return e[0]=1-2*n*n,e[1]=-2*r*n,e[2]=-2*o*n,e[3]=0,e[4]=-2*n*r,e[5]=1-2*r*r,e[6]=-2*o*r,e[7]=0,e[8]=-2*n*o,e[9]=-2*r*o,e[10]=1-2*o*o,e[11]=0,e[12]=2*n*s,e[13]=2*r*s,e[14]=2*o*s,e[15]=1,e};var SR=$R;const AR=(e,t,n)=>{const r=t[0],o=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],p=t[10],y=t[11],v=t[12],x=t[13],m=t[14],g=t[15];let w=n[0],E=n[1],A=n[2],$=n[3];return e[0]=w*r+E*a+A*f+$*v,e[1]=w*o+E*l+A*d+$*x,e[2]=w*s+E*c+A*p+$*m,e[3]=w*i+E*u+A*y+$*g,w=n[4],E=n[5],A=n[6],$=n[7],e[4]=w*r+E*a+A*f+$*v,e[5]=w*o+E*l+A*d+$*x,e[6]=w*s+E*c+A*p+$*m,e[7]=w*i+E*u+A*y+$*g,w=n[8],E=n[9],A=n[10],$=n[11],e[8]=w*r+E*a+A*f+$*v,e[9]=w*o+E*l+A*d+$*x,e[10]=w*s+E*c+A*p+$*m,e[11]=w*i+E*u+A*y+$*g,w=n[12],E=n[13],A=n[14],$=n[15],e[12]=w*r+E*a+A*f+$*v,e[13]=w*o+E*l+A*d+$*x,e[14]=w*s+E*c+A*p+$*m,e[15]=w*i+E*u+A*y+$*g,e};var bR=AR;const{EPS:TR}=wt,{sin:PR,cos:CR}=Pn,kR=C$,MR=(e,t,n,r)=>{let[o,s,i]=r;const a=o*o+s*s+i*i;if(Math.abs(a)<TR)return kR(e,t);const l=1/Math.sqrt(a);o*=l,s*=l,i*=l;const c=PR(n),u=CR(n),f=1-u,d=t[0],p=t[1],y=t[2],v=t[3],x=t[4],m=t[5],g=t[6],w=t[7],E=t[8],A=t[9],$=t[10],k=t[11],N=o*o*f+u,X=s*o*f+i*c,j=i*o*f-s*c,J=o*s*f-i*c,le=s*s*f+u,_e=i*s*f+o*c,Z=o*i*f+s*c,Me=s*i*f-o*c,we=i*i*f+u;return e[0]=d*N+x*X+E*j,e[1]=p*N+m*X+A*j,e[2]=y*N+g*X+$*j,e[3]=v*N+w*X+k*j,e[4]=d*J+x*le+E*_e,e[5]=p*J+m*le+A*_e,e[6]=y*J+g*le+$*_e,e[7]=v*J+w*le+k*_e,e[8]=d*Z+x*Me+E*we,e[9]=p*Z+m*Me+A*we,e[10]=y*Z+g*Me+$*we,e[11]=v*Z+w*Me+k*we,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e};var NR=MR;const{sin:RR,cos:OR}=Pn,LR=(e,t,n)=>{const r=RR(n),o=OR(n),s=t[4],i=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*o+c*r,e[5]=i*o+u*r,e[6]=a*o+f*r,e[7]=l*o+d*r,e[8]=c*o-s*r,e[9]=u*o-i*r,e[10]=f*o-a*r,e[11]=d*o-l*r,e};var FR=LR;const{sin:DR,cos:IR}=Pn,zR=(e,t,n)=>{const r=DR(n),o=IR(n),s=t[0],i=t[1],a=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*o-c*r,e[1]=i*o-u*r,e[2]=a*o-f*r,e[3]=l*o-d*r,e[8]=s*r+c*o,e[9]=i*r+u*o,e[10]=a*r+f*o,e[11]=l*r+d*o,e};var BR=zR;const{sin:GR,cos:VR}=Pn,jR=(e,t,n)=>{const r=GR(n),o=VR(n),s=t[0],i=t[1],a=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*o+c*r,e[1]=i*o+u*r,e[2]=a*o+f*r,e[3]=l*o+d*r,e[4]=c*o-s*r,e[5]=u*o-i*r,e[6]=f*o-a*r,e[7]=d*o-l*r,e};var UR=jR;const HR=(e,t,n)=>{const r=n[0],o=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var XR=HR;const WR=(e,t,n)=>(e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e);var YR=WR;const qR=e=>e.map(t=>t.toFixed(7)).toString();var ZR=qR;const QR=(e,t,n)=>{const r=n[0],o=n[1],s=n[2];let i,a,l,c,u,f,d,p,y,v,x,m;return t===e?(e[12]=t[0]*r+t[4]*o+t[8]*s+t[12],e[13]=t[1]*r+t[5]*o+t[9]*s+t[13],e[14]=t[2]*r+t[6]*o+t[10]*s+t[14],e[15]=t[3]*r+t[7]*o+t[11]*s+t[15]):(i=t[0],a=t[1],l=t[2],c=t[3],u=t[4],f=t[5],d=t[6],p=t[7],y=t[8],v=t[9],x=t[10],m=t[11],e[0]=i,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=f,e[6]=d,e[7]=p,e[8]=y,e[9]=v,e[10]=x,e[11]=m,e[12]=i*r+u*o+y*s+t[12],e[13]=a*r+f*o+v*s+t[13],e[14]=l*r+d*o+x*s+t[14],e[15]=c*r+p*o+m*s+t[15]),e};var KR=QR,Ct={add:$M,clone:TM,copy:C$,create:Cv,invert:kM,equals:NM,fromRotation:N$,fromScaling:WM,fromTaitBryanRotation:qM,fromTranslation:QM,fromValues:eN,fromVectorRotation:oR,fromXRotation:lR,fromYRotation:dR,fromZRotation:vR,identity:M$,isIdentity:yR,isOnlyTransformScale:xR,isMirroring:_R,mirrorByPlane:SR,multiply:bR,rotate:NR,rotateX:FR,rotateY:BR,rotateZ:UR,scale:XR,subtract:YR,toString:ZR,translate:KR};const JR=Ct,eO=e=>(e===void 0&&(e=[]),{sides:e,transforms:JR.create()});var t1=eO;const tO=(e,t)=>(e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e);var nO=tO;const rO=(e,t,n)=>(e[0]=t[0]+n[0],e[1]=t[1]+n[1],e);var oO=rO;const sO=e=>Math.atan2(e[1],e[0]);var Mv=sO,iO=Mv;const aO=Mv,lO=e=>aO(e)*57.29577951308232;var cO=lO;const uO=()=>[0,0];var n1=uO;const fO=n1,dO=e=>{const t=fO();return t[0]=e[0],t[1]=e[1],t};var hO=dO;const pO=(e,t)=>(e[0]=t[0],e[1]=t[1],e);var mO=pO;const vO=(e,t,n)=>(e[0]=0,e[1]=0,e[2]=t[0]*n[1]-t[1]*n[0],e);var gO=vO;const yO=(e,t)=>{const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)};var wO=yO;const xO=(e,t,n)=>(e[0]=t[0]/n[0],e[1]=t[1]/n[1],e);var EO=xO;const _O=(e,t)=>e[0]*t[0]+e[1]*t[1];var $O=_O;const SO=(e,t)=>e[0]===t[0]&&e[1]===t[1];var AO=SO;const{sin:bO,cos:TO}=Pn,PO=(e,t)=>(e[0]=TO(t),e[1]=bO(t),e);var j$=PO;const CO=j$,kO=(e,t)=>CO(e,t*.017453292519943295);var MO=kO;const NO=(e,t)=>(e[0]=t,e[1]=t,e);var RO=NO;const OO=n1,LO=(e,t)=>{const n=OO();return n[0]=e,n[1]=t,n};var FO=LO;const DO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]);var IO=DO;const zO=(e,t,n,r)=>{const o=t[0],s=t[1];return e[0]=o+r*(n[0]-o),e[1]=s+r*(n[1]-s),e};var BO=zO;const GO=(e,t,n)=>(e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e);var VO=GO;const jO=(e,t,n)=>(e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e);var UO=jO;const HO=(e,t,n)=>(e[0]=t[0]*n[0],e[1]=t[1]*n[1],e);var XO=HO;const WO=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e);var YO=WO;const qO=(e,t,n,r)=>{const o=t[0]-n[0],s=t[1]-n[1],i=Math.cos(r),a=Math.sin(r);return e[0]=o*i-s*a+n[0],e[1]=o*a+s*i+n[1],e};var U$=qO;const{TAU:ZO}=wt,QO=n1,KO=U$,JO=(e,t)=>KO(e,t,QO(),ZO/4);var eL=JO;const tL=(e,t)=>{const n=t[0],r=t[1];let o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e};var nL=tL;const rL=(e,t,n)=>(e[0]=t[0]*n,e[1]=t[1]*n,e);var oL=rL;const sL=(e,t,n)=>(e[0]=Math.round(t[0]/n)*n+0,e[1]=Math.round(t[1]/n)*n+0,e);var iL=sL;const aL=(e,t)=>{const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r};var lL=aL;const cL=e=>{const t=e[0],n=e[1];return t*t+n*n};var uL=cL;const fL=(e,t,n)=>(e[0]=t[0]-n[0],e[1]=t[1]-n[1],e);var dL=fL;const hL=e=>`[${e[0].toFixed(7)}, ${e[1].toFixed(7)}]`;var pL=hL;const mL=(e,t,n)=>{const r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e};var vL=mL,mt={abs:nO,add:oO,angle:iO,angleDegrees:cO,angleRadians:Mv,clone:hO,copy:mO,create:n1,cross:gO,distance:wO,divide:EO,dot:$O,equals:AO,fromAngleDegrees:MO,fromAngleRadians:j$,fromScalar:RO,fromValues:FO,length:IO,lerp:BO,max:VO,min:UO,multiply:XO,negate:YO,normal:eL,normalize:nL,rotate:U$,scale:oL,snap:iL,squaredDistance:lL,squaredLength:uL,subtract:dL,toString:pL,transform:vL};const J0=mt,gL=t1,yL=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");let t=e.length;if(t<3)throw new Error("the given points must define a closed geometry with three or more points");J0.equals(e[0],e[t-1])&&--t;const n=[];let r=e[t-1];for(let o=0;o<t;o++){const s=e[o];n.push([J0.clone(r),J0.clone(s)]),r=s}return gL(n)};var wL=yL;const xL=Ct,V5=mt,EL=t1,_L=e=>{if(e[0]!==0)throw new Error("invalid compact binary data");const t=EL();t.transforms=xL.clone(e.slice(1,17));for(let n=21;n<e.length;n+=4){const r=V5.fromValues(e[n+0],e[n+1]),o=V5.fromValues(e[n+2],e[n+3]);t.sides.push([r,o])}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};var $L=_L;const SL=e=>!!(e&&typeof e=="object"&&"sides"in e&&"transforms"in e&&Array.isArray(e.sides)&&"length"in e.transforms);var H$=SL;const j5=Ct,Xu=mt,AL=e=>(j5.isIdentity(e.transforms)||(e.sides=e.sides.map(t=>{const n=Xu.transform(Xu.create(),t[0],e.transforms),r=Xu.transform(Xu.create(),t[1],e.transforms);return[n,r]}),e.transforms=j5.create()),e);var bL=AL;const TL=bL,PL=e=>TL(e).sides;var Nc=PL;const CL=t1,kL=Nc,ML=e=>{const n=kL(e).map(r=>[r[1],r[0]]);return n.reverse(),CL(n)};var X$=ML;const $l=mt,NL=Nc,RL=e=>{const t=new Map,n=r=>{const o=r.toString();return t.has(o)?t.get(o):(t.set(o,r),r)};return e.map(r=>r.map(n))},OL=e=>{const t=new Map;return RL(e).forEach(r=>{t.has(r[0])?t.get(r[0]).push(r):t.set(r[0],[r])}),t},LL=e=>{const t=OL(NL(e)),n=[];for(;;){let r;for(const[i,a]of t){if(r=a.shift(),!r){t.delete(i);continue}break}if(r===void 0)break;const o=[],s=r[0];for(;;){o.push(r[0]);const i=r[1];if(i===s)break;const a=t.get(i);if(!a)throw new Error(`geometry is not closed at vertex ${i}`);const l=FL(r,a);a.length===0&&t.delete(i),r=l}o.length>0&&o.push(o.shift()),n.push(o)}return t.clear(),n},FL=(e,t)=>{if(t.length===1)return t.pop();const n=$l.create(),r=$l.angleDegrees($l.subtract(n,e[1],e[0]));let o,s;t.forEach((a,l)=>{let u=$l.angleDegrees($l.subtract(n,a[1],a[0]))-r;u<-180&&(u+=360),u>=180&&(u-=360),(s===void 0||u>o)&&(s=l,o=u)});const i=t[s];return t.splice(s,1),i};var W$=LL;const DL=Nc,IL=e=>{const n=DL(e).map(r=>r[0]);return n.length>0&&n.push(n.shift()),n};var zL=IL;const U5=mt,BL=Nc,GL=e=>{const t=BL(e);let n="geom2 ("+t.length+` sides):
[
`;return t.forEach(r=>{n+="  ["+U5.toString(r[0])+", "+U5.toString(r[1])+`]
`}),n+=`]
`,n};var VL=GL;const jL=e=>{const t=e.sides,n=e.transforms;let r=[-1,-1,-1,-1];e.color&&(r=e.color);const o=new Float32Array(21+t.length*4);o[0]=0,o[1]=n[0],o[2]=n[1],o[3]=n[2],o[4]=n[3],o[5]=n[4],o[6]=n[5],o[7]=n[6],o[8]=n[7],o[9]=n[8],o[10]=n[9],o[11]=n[10],o[12]=n[11],o[13]=n[12],o[14]=n[13],o[15]=n[14],o[16]=n[15],o[17]=r[0],o[18]=r[1],o[19]=r[2],o[20]=r[3];for(let s=0;s<t.length;s++){const i=s*4+21,a=t[s][0],l=t[s][1];o[i+0]=a[0],o[i+1]=a[1],o[i+2]=l[0],o[i+3]=l[1]}return o};var UL=jL;const H5=Ct,HL=X$,XL=(e,t)=>{const n=H5.multiply(H5.create(),e,t.transforms),r=Object.assign({},t,{transforms:n});return e[0]*e[5]-e[4]*e[1]<0?HL(r):r};var WL=XL;const YL=mt,qL=H$,ZL=W$,QL=e=>{if(!qL(e))throw new Error("invalid geom2 structure");if(ZL(e),e.sides.forEach(t=>{if(YL.equals(t[0],t[1]))throw new Error(`geom2 self-edge ${t[0]}`)}),!e.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${e.transforms}`)};var KL=QL,ut={clone:EM,create:t1,fromPoints:wL,fromCompactBinary:$L,isA:H$,reverse:X$,toOutlines:W$,toPoints:zL,toSides:Nc,toString:VL,toCompactBinary:UL,transform:WL,validate:KL};const JL=e=>Object.assign({},e);var e7=JL;const t7=Ct,n7=e=>(e===void 0&&(e=[]),{polygons:e,transforms:t7.create()});var Rc=n7;const r7=Mc,X5=e1,W5=V$,o7=(e,t,n)=>{const r=[],o=[],s=[];X5(r,n,t),X5(o,e,t);const i=W5(r7(s,o,r)),a=W5(r);if(a===0)throw Error("a and b are the same point");return i/a},s7=(e,t,n)=>Math.sqrt(o7(e,t,n));var i7=s7;const a7=Mc,l7=kv,Y5=e1,c7=(e,t,n,r)=>{const o=[0,0,0];return Y5(e,t,n),Y5(o,n,r),a7(e,e,o),l7(e,e)};var u7=c7;let f7=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(t,n){n.prev=t.prev,n.next=t,n.prev?n.prev.next=n:this.head=n,t.prev=n}insertAfter(t,n){n.prev=t,n.next=t.next,n.next?n.next.prev=n:this.tail=n,t.next=n}add(t){this.head?this.tail.next=t:this.head=t,t.prev=this.tail,t.next=null,this.tail=t}addAll(t){for(this.head?this.tail.next=t:this.head=t,t.prev=this.tail;t.next;)t=t.next;this.tail=t}remove(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev}removeChain(t,n){t.prev?t.prev.next=n.next:this.head=n.next,n.next?n.next.prev=t.prev:this.tail=t.prev}first(){return this.head}isEmpty(){return!this.head}};var d7=f7;let h7=class{constructor(t,n){this.point=t,this.index=n,this.next=null,this.prev=null,this.face=null}};var p7=h7;const m7=F$,v7=G$;let g7=class{constructor(t,n){this.vertex=t,this.face=n,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?m7(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?v7(this.tail().point,this.head().point):-1}setOpposite(t){this.opposite=t,t.opposite=this}};var y7=g7;const eh=O$,w7=L$,x7=Mc,th=Kd,E7=D$,_7=kv,Wu=B$,nh=e1,rh=y7,Y$=0,$7=1,rm=2;let S7=class q${constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=Y$,this.edge=null,this.nVertices=0}getEdge(t){if(typeof t!="number")throw Error("requires a number");let n=this.edge;for(;t>0;)n=n.next,t-=1;for(;t<0;)n=n.prev,t+=1;return n}computeNormal(){const t=this.edge,n=t.next;let r=n.next;const o=nh([],n.head().point,t.head().point),s=[],i=[];for(this.nVertices=2,this.normal=[0,0,0];r!==t;)w7(i,o),nh(o,r.head().point,t.head().point),eh(this.normal,this.normal,x7(s,i,o)),r=r.next,this.nVertices+=1;this.area=E7(this.normal),this.normal=Wu(this.normal,this.normal,1/this.area)}computeNormalMinArea(t){if(this.computeNormal(),this.area<t){let n,r=0,o=this.edge;do{const u=o.lengthSquared();u>r&&(n=o,r=u),o=o.next}while(o!==this.edge);const s=n.tail().point,i=n.head().point,a=nh([],i,s),l=Math.sqrt(r);Wu(a,a,1/l);const c=th(this.normal,a);Wu(a,a,-c),eh(this.normal,this.normal,a),_7(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let t=this.edge;do eh(this.centroid,this.centroid,t.head().point),t=t.next;while(t!==this.edge);Wu(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(t){typeof t<"u"?this.computeNormalMinArea(t):this.computeNormal(),this.computeCentroid(),this.offset=th(this.normal,this.centroid)}distanceToPlane(t){return th(this.normal,t)-this.offset}connectHalfEdges(t,n){let r;if(t.opposite.face===n.opposite.face){const o=n.opposite.face;let s;t===this.edge&&(this.edge=n),o.nVertices===3?(s=n.opposite.prev.opposite,o.mark=rm,r=o):(s=n.opposite.next,o.edge===s.prev&&(o.edge=s),s.prev=s.prev.prev,s.prev.next=s),n.prev=t.prev,n.prev.next=n,n.setOpposite(s),o.computeNormalAndCentroid()}else t.next=n,n.prev=t;return r}mergeAdjacentFaces(t,n){const r=t.opposite,o=r.face;n.push(o),o.mark=rm;let s=t.prev,i=t.next,a=r.prev,l=r.next;for(;s.opposite.face===o;)s=s.prev,l=l.next;for(;i.opposite.face===o;)i=i.next,a=a.prev;let c;for(c=l;c!==a.next;c=c.next)c.face=this;this.edge=i;let u;return u=this.connectHalfEdges(a,i),u&&n.push(u),u=this.connectHalfEdges(s,l),u&&n.push(u),this.computeNormalAndCentroid(),n}collectIndices(){const t=[];let n=this.edge;do t.push(n.head().index),n=n.next;while(n!==this.edge);return t}static createTriangle(t,n,r,o=0){const s=new q$,i=new rh(t,s),a=new rh(n,s),l=new rh(r,s);return i.next=l.prev=a,a.next=i.prev=l,l.next=a.prev=i,s.edge=i,s.computeNormalAndCentroid(o),s}};var A7={VISIBLE:Y$,NON_CONVEX:$7,DELETED:rm,Face:S7};const oh=Kd,b7=i7,T7=u7,q5=d7,P7=p7,{Face:po,VISIBLE:Di,NON_CONVEX:Z5,DELETED:C7}=A7,k7=1,Q5=2;let M7=class{constructor(t){if(!Array.isArray(t))throw TypeError("input is not a valid array");if(t.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=t.length,this.faces=[],this.newFaces=[],this.claimed=new q5,this.unclaimed=new q5,this.vertices=[];for(let n=0;n<t.length;n+=1)this.vertices.push(new P7(t[n],n));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(t,n){t.face=n,n.outside?this.claimed.insertBefore(n.outside,t):this.claimed.add(t),n.outside=t}removeVertexFromFace(t,n){t===n.outside&&(t.next&&t.next.face===n?n.outside=t.next:n.outside=null),this.claimed.remove(t)}removeAllVerticesFromFace(t){if(t.outside){let n=t.outside;for(;n.next&&n.next.face===t;)n=n.next;return this.claimed.removeChain(t.outside,n),n.next=null,t.outside}}deleteFaceVertices(t,n){const r=this.removeAllVerticesFromFace(t);if(r)if(!n)this.unclaimed.addAll(r);else{let o;for(let s=r;s;s=o)o=s.next,n.distanceToPlane(s.point)>this.tolerance?this.addVertexToFace(s,n):this.unclaimed.add(s)}}resolveUnclaimedPoints(t){let n=this.unclaimed.first();for(let r=n;r;r=n){n=r.next;let o=this.tolerance,s;for(let i=0;i<t.length;i+=1){const a=t[i];if(a.mark===Di){const l=a.distanceToPlane(r.point);if(l>o&&(o=l,s=a),o>1e3*this.tolerance)break}}s&&this.addVertexToFace(r,s)}}computeExtremes(){const t=[],n=[],r=[],o=[];let s,i;for(s=0;s<3;s+=1)r[s]=o[s]=this.vertices[0];for(s=0;s<3;s+=1)t[s]=n[s]=this.vertices[0].point[s];for(s=1;s<this.vertices.length;s+=1){const a=this.vertices[s],l=a.point;for(i=0;i<3;i+=1)l[i]<t[i]&&(t[i]=l[i],r[i]=a);for(i=0;i<3;i+=1)l[i]>n[i]&&(n[i]=l[i],o[i]=a)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(t[0]),Math.abs(n[0]))+Math.max(Math.abs(t[1]),Math.abs(n[1]))+Math.max(Math.abs(t[2]),Math.abs(n[2]))),[r,o]}createInitialSimplex(){const t=this.vertices,[n,r]=this.computeExtremes();let o,s,i,a,l=0,c=0;for(i=0;i<3;i+=1){const v=r[i].point[i]-n[i].point[i];v>l&&(l=v,c=i)}const u=n[c],f=r[c];for(l=0,i=0;i<this.vertices.length;i+=1){const v=this.vertices[i];if(v!==u&&v!==f){const x=b7(v.point,u.point,f.point);x>l&&(l=x,o=v)}}const d=T7([],u.point,f.point,o.point),p=oh(u.point,d);for(l=-1,i=0;i<this.vertices.length;i+=1){const v=this.vertices[i];if(v!==u&&v!==f&&v!==o){const x=Math.abs(oh(d,v.point)-p);x>l&&(l=x,s=v)}}const y=[];if(oh(s.point,d)-p<0)for(y.push(po.createTriangle(u,f,o),po.createTriangle(s,f,u),po.createTriangle(s,o,f),po.createTriangle(s,u,o)),i=0;i<3;i+=1){const v=(i+1)%3;y[i+1].getEdge(2).setOpposite(y[0].getEdge(v)),y[i+1].getEdge(1).setOpposite(y[v+1].getEdge(0))}else for(y.push(po.createTriangle(u,o,f),po.createTriangle(s,u,f),po.createTriangle(s,f,o),po.createTriangle(s,o,u)),i=0;i<3;i+=1){const v=(i+1)%3;y[i+1].getEdge(2).setOpposite(y[0].getEdge((3-i)%3)),y[i+1].getEdge(0).setOpposite(y[v+1].getEdge(1))}for(i=0;i<4;i+=1)this.faces.push(y[i]);for(i=0;i<t.length;i+=1){const v=t[i];if(v!==u&&v!==f&&v!==o&&v!==s){l=this.tolerance;let x;for(a=0;a<4;a+=1){const m=y[a].distanceToPlane(v.point);m>l&&(l=m,x=y[a])}x&&this.addVertexToFace(v,x)}}}reindexFaceAndVertices(){const t=[];for(let n=0;n<this.faces.length;n+=1){const r=this.faces[n];r.mark===Di&&t.push(r)}this.faces=t}collectFaces(t){const n=[];for(let r=0;r<this.faces.length;r+=1){if(this.faces[r].mark!==Di)throw Error("attempt to include a destroyed face in the hull");const o=this.faces[r].collectIndices();if(t)n.push(o);else for(let s=0;s<o.length-2;s+=1)n.push([o[0],o[s+1],o[s+2]])}return n}nextVertexToAdd(){if(!this.claimed.isEmpty()){let t,n,r=0;const o=this.claimed.first().face;for(n=o.outside;n&&n.face===o;n=n.next){const s=o.distanceToPlane(n.point);s>r&&(r=s,t=n)}return t}}computeHorizon(t,n,r,o){this.deleteFaceVertices(r),r.mark=C7;let s;n?s=n.next:s=n=r.getEdge(0);do{const i=s.opposite,a=i.face;a.mark===Di&&(a.distanceToPlane(t)>this.tolerance?this.computeHorizon(t,i,a,o):o.push(s)),s=s.next}while(s!==n)}addAdjoiningFace(t,n){const r=po.createTriangle(t,n.tail(),n.head());return this.faces.push(r),r.getEdge(-1).setOpposite(n.opposite),r.getEdge(0)}addNewFaces(t,n){this.newFaces=[];let r,o;for(let s=0;s<n.length;s+=1){const i=n[s],a=this.addAdjoiningFace(t,i);r?a.next.setOpposite(o):r=a,this.newFaces.push(a.face),o=a}r.next.setOpposite(o)}oppositeFaceDistance(t){return t.face.distanceToPlane(t.opposite.face.centroid)}doAdjacentMerge(t,n){let r=t.edge,o=!0,s=0;do{if(s>=t.nVertices)throw Error("merge recursion limit exceeded");const i=r.opposite.face;let a=!1;if(n===Q5?(this.oppositeFaceDistance(r)>-this.tolerance||this.oppositeFaceDistance(r.opposite)>-this.tolerance)&&(a=!0):t.area>i.area?this.oppositeFaceDistance(r)>-this.tolerance?a=!0:this.oppositeFaceDistance(r.opposite)>-this.tolerance&&(o=!1):this.oppositeFaceDistance(r.opposite)>-this.tolerance?a=!0:this.oppositeFaceDistance(r)>-this.tolerance&&(o=!1),a){const l=t.mergeAdjacentFaces(r,[]);for(let c=0;c<l.length;c+=1)this.deleteFaceVertices(l[c],t);return!0}r=r.next,s+=1}while(r!==t.edge);return o||(t.mark=Z5),!1}addVertexToHull(t){const n=[];this.unclaimed.clear(),this.removeVertexFromFace(t,t.face),this.computeHorizon(t.point,null,t.face,n),this.addNewFaces(t,n);for(let r=0;r<this.newFaces.length;r+=1){const o=this.newFaces[r];if(o.mark===Di)for(;this.doAdjacentMerge(o,k7););}for(let r=0;r<this.newFaces.length;r+=1){const o=this.newFaces[r];if(o.mark===Z5)for(o.mark=Di;this.doAdjacentMerge(o,Q5););}this.resolveUnclaimedPoints(this.newFaces)}build(){let t;for(this.createInitialSimplex();t=this.nextVertexToAdd();)this.addVertexToHull(t);this.reindexFaceAndVertices()}};var N7=M7;const R7=N7,O7=(e,t={})=>{const n=new R7(e);return n.build(),n.collectFaces(t.skipTriangulation)};var Z$=O7;const L7=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});var Ra=L7;const F7=Ra,D7=qe,I7=(...e)=>{let t,n;return e.length===1?(t=F7(),n=e[0]):(t=e[0],n=e[1]),t.vertices=n.vertices.map(r=>D7.clone(r)),t};var z7=I7;const B7=qe,G7=Ra,V7=e=>{const t=e.map(n=>B7.clone(n));return G7(t)};var j7=V7;const U7=Ra,H7=(e,t)=>{const n=U7(e);return n.plane=t,n};var X7=H7;const W7=()=>[0,0,0,0];var r1=W7;const Y7=r1,q7=e=>{const t=Y7();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};var Q$=q7;const Z7=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e);var K$=Z7;const Q7=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3];var J$=Q7;const K7=(e,t)=>(e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e);var eS=K7;const sh=qe,J7=(e,t,n)=>{const r=sh.normalize(sh.create(),t),o=sh.dot(n,r);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=o,e};var tS=J7;const eF=r1,tF=(e,t,n,r)=>{const o=eF();return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o};var nS=tF;const ar=qe,nF=tS,rF=(e,...t)=>{e[0]=0,e[1]=0,e[2]=0,e[3]=0;const n=t.length;t.forEach(p=>{ar.add(e,e,p)}),ar.scale(e,e,1/n);let r=0,o=0,s=0,i=0,a=0,l=0;const c=ar.create();t.forEach(p=>{ar.subtract(c,p,e),r+=c[0]*c[0],o+=c[0]*c[1],s+=c[0]*c[2],i+=c[1]*c[1],a+=c[1]*c[2],l+=c[2]*c[2]}),r/=n,o/=n,s/=n,i/=n,a/=n,l/=n,c[0]=0,c[1]=0,c[2]=0;const u=ar.create();let f=i*l-a*a;u[0]=f,u[1]=s*a-o*l,u[2]=o*a-s*i;let d=f*f;return ar.add(c,c,ar.scale(u,u,d)),f=r*l-s*s,u[0]=s*a-o*l,u[1]=f,u[2]=o*s-a*r,d=f*f,ar.dot(c,u)<0&&(d=-d),ar.add(c,c,ar.scale(u,u,d)),f=r*i-o*o,u[0]=o*a-s*i,u[1]=o*s-a*r,u[2]=f,d=f*f,ar.dot(c,u)<0&&(d=-d),ar.add(c,c,ar.scale(u,u,d)),nF(e,c,e)};var oF=rF;const Zr=qe,sF=(e,...t)=>{const n=t.length,r=Zr.create(),o=Zr.create(),s=i=>{const a=t[i],l=t[(i+1)%n],c=t[(i+2)%n];return Zr.subtract(r,l,a),Zr.subtract(o,c,a),Zr.cross(r,r,o),Zr.normalize(r,r),r};return e[0]=0,e[1]=0,e[2]=0,n===3?Zr.copy(e,s(0)):(t.forEach((i,a)=>{Zr.add(e,e,s(a))}),Zr.normalize(e,e)),e[3]=Zr.dot(e,t[0]),e};var rS=sF;const{EPS:ih}=wt,Fn=qe,iF=(e,t,n,r)=>{let o=Fn.subtract(Fn.create(),n,t),s=Fn.subtract(Fn.create(),r,t);Fn.length(o)<ih&&(o=Fn.orthogonal(o,s)),Fn.length(s)<ih&&(s=Fn.orthogonal(s,o));let i=Fn.cross(Fn.create(),o,s);Fn.length(i)<ih&&(s=Fn.orthogonal(s,o),i=Fn.cross(i,o,s)),i=Fn.normalize(i,i);const a=Fn.dot(i,t);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=a,e};var aF=iF;const lF=qe,cF=(e,t)=>{const n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]-e[3],r=t[0]-n*e[0],o=t[1]-n*e[1],s=t[2]-n*e[2];return lF.fromValues(r,o,s)};var uF=cF;const fF=qe,dF=(e,t)=>fF.dot(e,t)-e[3];var oS=dF;const hF=e=>`(${e[0].toFixed(9)}, ${e[1].toFixed(9)}, ${e[2].toFixed(9)}, ${e[3].toFixed(9)})`;var sS=hF;const pF=Ct,Dn=qe,mF=rS,vF=eS,gF=(e,t,n)=>{const r=pF.isMirroring(n),o=Dn.orthogonal(Dn.create(),t),s=Dn.cross(o,t,o),i=Dn.cross(Dn.create(),t,s);let a=Dn.fromScalar(Dn.create(),t[3]);Dn.multiply(a,a,t);let l=Dn.add(Dn.create(),a,s),c=Dn.add(Dn.create(),a,i);return a=Dn.transform(a,a,n),l=Dn.transform(l,l,n),c=Dn.transform(c,c,n),mF(e,a,l,c),r&&vF(e,e),e};var yF=gF,lo={clone:Q$,copy:K$,create:r1,equals:J$,flip:eS,fromNormalAndPoint:tS,fromValues:nS,fromNoisyPoints:oF,fromPoints:rS,fromPointsRandom:aF,projectionOfPoint:uF,signedDistanceToPoint:oS,toString:sS,transform:yF};const K5=lo,wF=Ra,xF=e=>{const t=e.vertices.slice().reverse(),n=wF(t);return e.plane&&(n.plane=K5.flip(K5.create(),e.plane)),n};var EF=xF;const _F=e=>!!(e&&typeof e=="object"&&"vertices"in e&&Array.isArray(e.vertices));var iS=_F;const J5=lo,Bs=qe,$F=e=>SF(e.vertices),SF=e=>{const t=e.length;if(t>2){const n=J5.fromPoints(J5.create(),...e);let r=e[t-2],o=e[t-1];for(let s=0;s<t;s++){const i=e[s];if(!AF(r,o,i,n))return!1;r=o,o=i}}return!0},AF=(e,t,n,r)=>{const o=Bs.cross(Bs.create(),Bs.subtract(Bs.create(),t,e),Bs.subtract(Bs.create(),n,t));return Bs.dot(o,r)>=0};var aS=$F;const ew=lo,bF=e=>(e.plane||(e.plane=ew.fromPoints(ew.create(),...e.vertices)),e.plane);var Nv=bF;const TF=Nv,PF=e=>{const t=e.vertices.length;if(t<3)return 0;const n=e.vertices,r=TF(e),o=Math.abs(r[0]),s=Math.abs(r[1]),i=Math.abs(r[2]);if(o+s+i===0)return 0;let a=3;o>s&&o>i?a=1:s>i&&(a=2);let l=0,c=0,u=1,f=2;switch(a){case 1:for(u=1;u<t;u++)c=u-1,f=(u+1)%t,l+=n[u][1]*(n[f][2]-n[c][2]);l+=n[0][1]*(n[1][2]-n[t-1][2]),l/=2*r[0];break;case 2:for(u=1;u<t;u++)c=u-1,f=(u+1)%t,l+=n[u][2]*(n[f][0]-n[c][0]);l+=n[0][2]*(n[1][0]-n[t-1][0]),l/=2*r[1];break;case 3:default:for(u=1;u<t;u++)c=u-1,f=(u+1)%t,l+=n[u][0]*(n[f][1]-n[c][1]);l+=n[0][0]*(n[1][1]-n[t-1][1]),l/=2*r[2];break}return l};var lS=PF;const Sl=qe,CF=e=>{const t=e.vertices,n=t.length,r=n===0?Sl.create():Sl.clone(t[0]),o=Sl.clone(r);for(let s=1;s<n;s++)Sl.min(r,r,t[s]),Sl.max(o,o,t[s]);return[r,o]};var kF=CF;const MF=(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3];var NF=MF;const RF=(e,t)=>(e[0]=t,e[1]=t,e[2]=t,e[3]=t,e);var OF=RF;const LF=(e,t,n)=>{const[r,o,s,i]=t;return e[0]=n[0]*r+n[4]*o+n[8]*s+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*s+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*s+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*s+n[15]*i,e};var FF=LF,cS={clone:Q$,copy:K$,create:r1,dot:NF,equals:J$,fromScalar:OF,fromValues:nS,toString:sS,transform:FF};const DF=cS,tw=new WeakMap,IF=e=>{const t=tw.get(e);if(t)return t;const n=e.vertices,r=DF.create();if(n.length===0)return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r;let o=n[0],s=o,i=o,a=o,l=o,c=o;n.forEach(p=>{o[0]>p[0]&&(o=p),s[1]>p[1]&&(s=p),i[2]>p[2]&&(i=p),a[0]<p[0]&&(a=p),l[1]<p[1]&&(l=p),c[2]<p[2]&&(c=p)}),r[0]=(o[0]+a[0])*.5,r[1]=(s[1]+l[1])*.5,r[2]=(i[2]+c[2])*.5;const u=r[0]-a[0],f=r[1]-l[1],d=r[2]-c[2];return r[3]=Math.sqrt(u*u+f*f+d*d),tw.set(e,r),r};var zF=IF;const ah=qe,BF=e=>{let t=0;const n=e.vertices,r=ah.create();for(let o=0;o<n.length-2;o++)ah.cross(r,n[o+1],n[o+2]),t+=ah.dot(n[0],r);return t/=6,t};var GF=BF;const VF=e=>e.vertices;var jF=VF;const UF=qe,HF=e=>{let t="poly3: vertices: [";return e.vertices.forEach(n=>{t+=`${UF.toString(n)}, `}),t+="]",t};var XF=HF;const WF=Ct,nw=qe,YF=Ra,qF=(e,t)=>{const n=t.vertices.map(r=>nw.transform(nw.create(),r,e));return WF.isMirroring(e)&&n.reverse(),YF(n)};var ZF=qF;const QF=oS,{NEPS:KF}=wt,JF=qe,eD=iS,tD=aS,nD=lS,rD=Nv,oD=e=>{if(!eD(e))throw new Error("invalid poly3 structure");if(e.vertices.length<3)throw new Error(`poly3 not enough vertices ${e.vertices.length}`);if(nD(e)<=0)throw new Error("poly3 area must be greater than zero");for(let t=0;t<e.vertices.length;t++)if(JF.equals(e.vertices[t],e.vertices[(t+1)%e.vertices.length]))throw new Error(`poly3 duplicate vertex ${e.vertices[t]}`);if(!tD(e))throw new Error("poly3 must be convex");if(e.vertices.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${t}`)}),e.vertices.length>3){const t=rD(e);e.vertices.forEach(n=>{const r=Math.abs(QF(t,n));if(r>KF)throw new Error(`poly3 must be coplanar: vertex ${n} distance ${r}`)})}};var sD=oD,gt={clone:z7,create:Ra,fromPoints:j7,fromPointsAndPlane:X7,invert:EF,isA:iS,isConvex:aS,measureArea:lS,measureBoundingBox:kF,measureBoundingSphere:zF,measureSignedVolume:GF,plane:Nv,toPoints:jF,toString:XF,transform:ZF,validate:sD};const iD=Z$,aD=Rc,lD=gt,cD=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");const n=iD(e,{skipTriangulation:!0}).map(r=>{const o=r.map(s=>e[s]);return lD.create(o)});return aD(n)};var uD=cD;const fD=gt,dD=Rc,hD=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");const t=e.map((r,o)=>fD.create(r));return dD(t)};var pD=hD;const mD=qe,vD=Ct,gD=gt,yD=Rc,wD=e=>{if(e[0]!==1)throw new Error("invalid compact binary data");const t=yD();t.transforms=vD.clone(e.slice(1,17));const n=e[21];let r=22,o=e.length-n*3;for(;o<e.length;){const s=e[r];r++;const i=[];for(let a=0;a<s;a++)i.push(mD.fromValues(e[o],e[o+1],e[o+2])),o+=3;t.polygons.push(gD.create(i))}return e[17]>=0&&(t.color=[e[17],e[18],e[19],e[20]]),t};var xD=wD;const rw=Ct,ED=gt,_D=e=>(rw.isIdentity(e.transforms)||(e.polygons=e.polygons.map(t=>ED.transform(e.transforms,t)),e.transforms=rw.create()),e);var $D=_D;const SD=$D,AD=e=>SD(e).polygons;var o1=AD;const bD=gt,TD=Rc,PD=o1,CD=e=>{const n=PD(e).map(r=>bD.invert(r));return TD(n)};var kD=CD;const MD=e=>!!(e&&typeof e=="object"&&"polygons"in e&&"transforms"in e&&Array.isArray(e.polygons)&&"length"in e.transforms);var uS=MD;const ND=gt,RD=o1,OD=e=>RD(e).map(r=>ND.toPoints(r));var LD=OD;const FD=gt,DD=o1,ID=e=>{const t=DD(e);let n="geom3 ("+t.length+` polygons):
`;return t.forEach(r=>{n+="  "+FD.toString(r)+`
`}),n};var zD=ID;const BD=gt,GD=e=>{const t=e.polygons,n=e.transforms,r=t.length,o=t.reduce((c,u)=>c+u.vertices.length,0);let s=[-1,-1,-1,-1];e.color&&(s=e.color);const i=new Float32Array(22+r+o*3);i[0]=1,i[1]=n[0],i[2]=n[1],i[3]=n[2],i[4]=n[3],i[5]=n[4],i[6]=n[5],i[7]=n[6],i[8]=n[7],i[9]=n[8],i[10]=n[9],i[11]=n[10],i[12]=n[11],i[13]=n[12],i[14]=n[13],i[15]=n[14],i[16]=n[15],i[17]=s[0],i[18]=s[1],i[19]=s[2],i[20]=s[3],i[21]=o;let a=22,l=a+r;return t.forEach(c=>{const u=BD.toPoints(c);i[a]=u.length,a++;for(let f=0;f<u.length;f++){const d=u[f];i[l+0]=d[0],i[l+1]=d[1],i[l+2]=d[2],l+=3}}),i};var VD=GD;const ow=Ct,jD=(e,t)=>{const n=ow.multiply(ow.create(),e,t.transforms);return Object.assign({},t,{transforms:n})};var UD=jD;const HD=gt,XD=uS,WD=e=>{if(!XD(e))throw new Error("invalid geom3 structure");if(e.polygons.forEach(HD.validate),YD(e),!e.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${e.transforms}`)},YD=e=>{const t=new Map;e.polygons.forEach(({vertices:r})=>{r.forEach((o,s)=>{const i=`${o}`,a=`${r[(s+1)%r.length]}`,l=`${i}/${a}`,c=t.has(l)?t.get(l):0;t.set(l,c+1)})});const n=[];if(t.forEach((r,o)=>{const s=o.split("/").reverse().join("/"),i=t.get(s);r!==i&&n.push(o.replace("/"," -> "))}),n.length>0)throw new Error(`non-manifold edges ${n.length}
${n.join(`
`)}`)};var qD=WD,ft={clone:e7,create:Rc,fromPointsConvex:uD,fromPoints:pD,fromCompactBinary:xD,invert:kD,isA:uS,toPoints:LD,toPolygons:o1,toString:zD,toCompactBinary:VD,transform:UD,validate:qD};const ZD=e=>Object.assign({},e);var Rv=ZD;const{EPS:sw}=wt,QD=mt,KD=Rv,JD=e=>{if(e.isClosed)return e;const t=KD(e);if(t.isClosed=!0,t.points.length>1){const n=t.points,r=n[0];let o=n[n.length-1];for(;QD.distance(r,o)<sw*sw&&(n.pop(),n.length!==1);)o=n[n.length-1]}return t};var fS=JD;const eI=Ct,tI=e=>(e===void 0&&(e=[]),{points:e,isClosed:!1,transforms:eI.create()});var s1=tI;const{EPS:iw}=wt,aw=mt,nI=fS,rI=s1,oI=(e,t)=>{const n={closed:!1};let{closed:r}=Object.assign({},n,e),o=rI();if(o.points=t.map(s=>aw.clone(s)),o.points.length>1){const s=o.points[0],i=o.points[o.points.length-1];aw.distance(s,i)<iw*iw&&(r=!0)}return r===!0&&(o=nI(o)),o};var Ov=oI;const lw=Ct,cw=mt,sI=e=>(lw.isIdentity(e.transforms)||(e.points=e.points.map(t=>cw.transform(cw.create(),t,e.transforms)),e.transforms=lw.create()),e);var iI=sI;const aI=iI,lI=e=>aI(e).points;var Oa=lI;const{TAU:Yu}=wt,sn=mt,cI=Ov,uI=Oa,fI=(e,t)=>{const n={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16};let{endpoint:r,radius:o,xaxisrotation:s,clockwise:i,large:a,segments:l}=Object.assign({},n,e);if(!Array.isArray(r))throw new Error("endpoint must be an array of X and Y values");if(r.length<2)throw new Error("endpoint must contain X and Y values");if(r=sn.clone(r),!Array.isArray(o))throw new Error("radius must be an array of X and Y values");if(o.length<2)throw new Error("radius must contain X and Y values");if(l<4)throw new Error("segments must be four or more");const c=1e5;if(t.isClosed)throw new Error("the given path cannot be closed");const u=uI(t);if(u.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let f=o[0],d=o[1];const p=u[u.length-1];f=Math.round(f*c)/c,d=Math.round(d*c)/c,r=sn.fromValues(Math.round(r[0]*c)/c,Math.round(r[1]*c)/c);const y=!i;let v=[];if(f===0||d===0)v.push(r);else{f=Math.abs(f),d=Math.abs(d);const m=s,g=Math.cos(m),w=Math.sin(m),E=sn.subtract(sn.create(),p,r);sn.scale(E,E,.5);const A=Math.round((g*E[0]+w*E[1])*c)/c,$=Math.round((-w*E[0]+g*E[1])*c)/c,k=sn.fromValues(A,$),N=k[0]*k[0]/(f*f)+k[1]*k[1]/(d*d);if(N>1){const ye=Math.sqrt(N);f*=ye,d*=ye,f=Math.round(f*c)/c,d=Math.round(d*c)/c}let X=Math.sqrt((f*f*d*d-f*f*k[1]*k[1]-d*d*k[0]*k[0])/(f*f*k[1]*k[1]+d*d*k[0]*k[0]));y===a&&(X=-X);const j=sn.fromValues(f*k[1]/d,-d*k[0]/f);sn.scale(j,j,X);let J=sn.fromValues(g*j[0]-w*j[1],w*j[0]+g*j[1]);J=sn.add(J,J,sn.scale(sn.create(),sn.add(sn.create(),p,r),.5));const le=sn.fromValues((k[0]-j[0])/f,(k[1]-j[1])/d),_e=sn.fromValues((-k[0]-j[0])/f,(-k[1]-j[1])/d),Z=sn.angleRadians(le);let we=sn.angleRadians(_e)-Z;we=we%Yu,!y&&we>0?we-=Yu:y&&we<0&&(we+=Yu);let Je=Math.ceil(Math.abs(we)/Yu*l)+1;Je<1&&(Je=1);for(let ye=1;ye<Je;ye++){const Ge=Z+ye/Je*we,De=Math.cos(Ge),rt=Math.sin(Ge),st=sn.fromValues(g*f*De-w*d*rt,w*f*De+g*d*rt);sn.add(st,st,J),v.push(st)}Je&&v.push(e.endpoint)}return v=u.concat(v),cI({},v)};var dI=fI;const hI=Ov,pI=Oa,{equals:mI}=mt,vI=(...e)=>{let t=!1,n=[];return e.forEach((r,o)=>{const s=pI(r).slice();if(n.length>0&&s.length>0&&mI(s[0],n[n.length-1])&&s.shift(),s.length>0&&t)throw new Error(`Cannot concatenate to a closed path; check the ${o}th path`);t=r.isClosed,n=n.concat(s)}),hI({closed:t},n)};var dS=vI;const gI=dS,yI=s1,wI=(e,t)=>gI(t,yI(e));var hS=wI;const{TAU:xI}=wt,lr=mt,EI=mt,_I=hS,$I=Oa,SI=(e,t)=>{const n={segments:16};let{controlPoints:r,segments:o}=Object.assign({},n,e);if(!Array.isArray(r))throw new Error("controlPoints must be an array of one or more points");if(r.length<1)throw new Error("controlPoints must be an array of one or more points");if(o<4)throw new Error("segments must be four or more");if(t.isClosed)throw new Error("the given geometry cannot be closed");const s=$I(t);if(s.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(r=r.slice(),r[0]===null){if(r.length<2)throw new Error("a null control point must be passed with one more control points");let $=s[s.length-2];if("lastBezierControlPoint"in t&&($=t.lastBezierControlPoint),!Array.isArray($))throw new Error("the given path must contain TWO or more points if given a null control point");const k=lr.scale(lr.create(),s[s.length-1],2);lr.subtract(k,k,$),r[0]=k}r.unshift(s[s.length-1]);const a=r.length-1,l=[];let c=1;for(let $=0;$<=a;++$)$>0&&(c*=$),l.push(c);const u=[];for(let $=0;$<=a;++$){const k=l[a]/(l[$]*l[a-$]);u.push(k)}const f=lr.create(),d=lr.create(),p=EI.create(),y=$=>{let k=1,N=Math.pow(1-$,a);const X=$!==1?1/(1-$):1,j=lr.create();for(let J=0;J<=a;++J){J===a&&(N=1);const le=u[J]*k*N,_e=lr.scale(f,r[J],le);lr.add(j,j,_e),k*=$,N*=X}return j},v=[],x=[],m=a+1;for(let $=0;$<m;++$){const k=$/(m-1),N=y(k);v.push(N),x.push(k)}let g=1;const w=xI/o,E=Math.sin(w);for(;g<v.length-1;){const $=lr.subtract(f,v[g],v[g-1]);lr.normalize($,$);const k=lr.subtract(d,v[g+1],v[g]);lr.normalize(k,k);const N=lr.cross(p,$,k);if(Math.abs(N[2])>E){const X=x[g-1],j=x[g+1],J=X+(j-X)*1/3,le=X+(j-X)*2/3,_e=y(J),Z=y(le);v.splice(g,1,_e,Z),x.splice(g,1,J,le),g--,g<1&&(g=1)}else++g}v.shift();const A=_I(v,t);return A.lastBezierControlPoint=r[r.length-2],A};var AI=SI;const bI=mt,uw=Oa,TI=(e,t)=>{if(e.isClosed!==t.isClosed||e.points.length!==t.points.length)return!1;const n=uw(e),r=uw(t),o=n.length;let s=0;do{let i=!1;for(let a=0;a<o;a++)if(!bI.equals(n[a],r[(a+s)%o])){i=!0;break}if(i===!1)return!0;if(!e.isClosed)return!1}while(++s<o);return!1};var PI=TI;const CI=Ct,kI=mt,MI=s1,NI=e=>{if(e[0]!==2)throw new Error("invalid compact binary data");const t=MI();t.transforms=CI.clone(e.slice(1,17)),t.isClosed=!!e[17];for(let n=22;n<e.length;n+=2){const r=kI.fromValues(e[n],e[n+1]);t.points.push(r)}return e[18]>=0&&(t.color=[e[18],e[19],e[20],e[21]]),t};var RI=NI;const OI=e=>!!(e&&typeof e=="object"&&"points"in e&&"transforms"in e&&"isClosed"in e&&Array.isArray(e.points)&&"length"in e.transforms);var pS=OI;const LI=Rv,FI=e=>{const t=LI(e);return t.points=e.points.slice().reverse(),t};var DI=FI;const II=mt,zI=Oa,BI=e=>{const t=zI(e);let n="path ("+t.length+" points, "+e.isClosed+`):
[
`;return t.forEach(r=>{n+="  "+II.toString(r)+`,
`}),n+=`]
`,n};var GI=BI;const VI=e=>{const t=e.points,n=e.transforms;let r=[-1,-1,-1,-1];e.color&&(r=e.color);const o=new Float32Array(22+t.length*2);o[0]=2,o[1]=n[0],o[2]=n[1],o[3]=n[2],o[4]=n[3],o[5]=n[4],o[6]=n[5],o[7]=n[6],o[8]=n[7],o[9]=n[8],o[10]=n[9],o[11]=n[10],o[12]=n[11],o[13]=n[12],o[14]=n[13],o[15]=n[14],o[16]=n[15],o[17]=e.isClosed?1:0,o[18]=r[0],o[19]=r[1],o[20]=r[2],o[21]=r[3];for(let s=0;s<t.length;s++){const i=s*2+22,a=t[s];o[i]=a[0],o[i+1]=a[1]}return o};var jI=VI;const fw=Ct,UI=(e,t)=>{const n=fw.multiply(fw.create(),e,t.transforms);return Object.assign({},t,{transforms:n})};var HI=UI;const XI=mt,WI=pS,YI=e=>{if(!WI(e))throw new Error("invalid path2 structure");if(e.points.length>1){for(let t=0;t<e.points.length;t++)if(XI.equals(e.points[t],e.points[(t+1)%e.points.length]))throw new Error(`path2 duplicate points ${e.points[t]}`)}if(e.points.forEach(t=>{if(!t.every(Number.isFinite))throw new Error(`path2 invalid point ${t}`)}),!e.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${e.transforms}`)};var qI=YI,bt={appendArc:dI,appendBezier:AI,appendPoints:hS,clone:Rv,close:fS,concat:dS,create:s1,equals:PI,fromPoints:Ov,fromCompactBinary:RI,isA:pS,reverse:DI,toPoints:Oa,toString:GI,toCompactBinary:jI,transform:HI,validate:qI};const ZI=lt,mS=ut,vS=ft,gS=bt,yS=gt,QI=(e,t)=>{const n=mS.clone(t);return n.color=e,n},KI=(e,t)=>{const n=vS.clone(t);return n.color=e,n},JI=(e,t)=>{const n=gS.clone(t);return n.color=e,n},ez=(e,t)=>{const n=yS.clone(t);return n.color=e,n},tz=(e,...t)=>{if(!Array.isArray(e))throw new Error("color must be an array");if(e.length<3)throw new Error("color must contain R, G and B values");if(e.length===3&&(e=[e[0],e[1],e[2],1]),t=ZI(t),t.length===0)throw new Error("wrong number of arguments");const n=t.map(r=>mS.isA(r)?QI(e,r):vS.isA(r)?KI(e,r):gS.isA(r)?JI(e,r):yS.isA(r)?ez(e,r):(r.color=e,r));return n.length===1?n[0]:n};var nz=tz;const rz={black:[0/255,0/255,0/255],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[255/255,255/255,255/255],maroon:[128/255,0/255,0/255],red:[255/255,0/255,0/255],purple:[128/255,0/255,128/255],fuchsia:[255/255,0/255,255/255],green:[0/255,128/255,0/255],lime:[0/255,255/255,0/255],olive:[128/255,128/255,0/255],yellow:[255/255,255/255,0/255],navy:[0/255,0/255,128/255],blue:[0/255,0/255,255/255],teal:[0/255,128/255,128/255],aqua:[0/255,255/255,255/255],aliceblue:[240/255,248/255,255/255],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,255/255,212/255],azure:[240/255,255/255,255/255],beige:[245/255,245/255,220/255],bisque:[255/255,228/255,196/255],blanchedalmond:[255/255,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,255/255,0/255],chocolate:[210/255,105/255,30/255],coral:[255/255,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[255/255,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0/255,255/255,255/255],darkblue:[0/255,0/255,139/255],darkcyan:[0/255,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0/255,100/255,0/255],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0/255,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[255/255,140/255,0/255],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0/255,0/255],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0/255,206/255,209/255],darkviolet:[148/255,0/255,211/255],deeppink:[255/255,20/255,147/255],deepskyblue:[0/255,191/255,255/255],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,255/255],firebrick:[178/255,34/255,34/255],floralwhite:[255/255,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,255/255],gold:[255/255,215/255,0/255],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,255/255,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,255/255,240/255],hotpink:[255/255,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0/255,130/255],ivory:[255/255,255/255,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[255/255,240/255,245/255],lawngreen:[124/255,252/255,0/255],lemonchiffon:[255/255,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,255/255,255/255],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[255/255,182/255,193/255],lightsalmon:[255/255,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[255/255,255/255,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[255/255,0/255,255/255],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0/255,0/255,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0/255,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,255/255,250/255],mistyrose:[255/255,228/255,225/255],moccasin:[255/255,228/255,181/255],navajowhite:[255/255,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[255/255,165/255,0/255],orangered:[255/255,69/255,0/255],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[255/255,239/255,213/255],peachpuff:[255/255,218/255,185/255],peru:[205/255,133/255,63/255],pink:[255/255,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[255/255,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[255/255,250/255,250/255],springgreen:[0/255,255/255,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[255/255,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]};var wS=rz;const oz=wS,sz=e=>oz[e.toLowerCase()];var iz=sz;const az=e=>{if(e=e.replace("#",""),e.length<6)throw new Error("the given notation must contain 3 or more hex values");const t=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255;if(e.length>=8){const o=parseInt(e.substring(6,8),16)/255;return[t,n,r,o]}return[t,n,r]};var lz=az;const cz=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e);var xS=cz;const uz=lt,lh=xS,fz=(...e)=>{if(e=uz(e),e.length<3)throw new Error("values must contain H, S and L values");const t=e[0],n=e[1],r=e[2];let o=r,s=r,i=r;if(n!==0){const a=r<.5?r*(1+n):r+n-r*n,l=2*r-a;o=lh(l,a,t+1/3),s=lh(l,a,t),i=lh(l,a,t-1/3)}if(e.length>3){const a=e[3];return[o,s,i,a]}return[o,s,i]};var dz=fz;const hz=lt,pz=(...e)=>{if(e=hz(e),e.length<3)throw new Error("values must contain H, S and V values");const t=e[0],n=e[1],r=e[2];let o=0,s=0,i=0;const a=Math.floor(t*6),l=t*6-a,c=r*(1-n),u=r*(1-l*n),f=r*(1-(1-l)*n);switch(a%6){case 0:o=r,s=f,i=c;break;case 1:o=u,s=r,i=c;break;case 2:o=c,s=r,i=f;break;case 3:o=c,s=u,i=r;break;case 4:o=f,s=c,i=r;break;case 5:o=r,s=c,i=u;break}if(e.length>3){const d=e[3];return[o,s,i,d]}return[o,s,i]};var mz=pz;const vz=lt,gz=(...e)=>{if(e=vz(e),e.length<3)throw new Error("values must contain R, G and B values");const t=e[0]*255,n=e[1]*255,r=e[2]*255;let o=`#${Number(16777216+t*65536+n*256+r).toString(16).substring(1,7)}`;return e.length>3&&(o=o+Number(e[3]*255).toString(16)),o};var yz=gz;const wz=lt,xz=(...e)=>{if(e=wz(e),e.length<3)throw new Error("values must contain R, G and B values");const t=e[0],n=e[1],r=e[2],o=Math.max(t,n,r),s=Math.min(t,n,r);let i,a;const l=(o+s)/2;if(o===s)i=a=0;else{const c=o-s;switch(a=l>.5?c/(2-o-s):c/(o+s),o){case t:i=(n-r)/c+(n<r?6:0);break;case n:i=(r-t)/c+2;break;case r:i=(t-n)/c+4;break}i/=6}if(e.length>3){const c=e[3];return[i,a,l,c]}return[i,a,l]};var Ez=xz;const _z=lt,$z=(...e)=>{if(e=_z(e),e.length<3)throw new Error("values must contain R, G and B values");const t=e[0],n=e[1],r=e[2],o=Math.max(t,n,r),s=Math.min(t,n,r);let i;const a=o,l=o-s,c=o===0?0:l/o;if(o===s)i=0;else{switch(o){case t:i=(n-r)/l+(n<r?6:0);break;case n:i=(r-t)/l+2;break;case r:i=(t-n)/l+4;break}i/=6}if(e.length>3){const u=e[3];return[i,c,a,u]}return[i,c,a]};var Sz=$z,Az={colorize:nz,colorNameToRgb:iz,cssColors:wS,hexToRgb:lz,hslToRgb:dz,hsvToRgb:mz,hueToColorComponent:xS,rgbToHex:yz,rgbToHsl:Ez,rgbToHsv:Sz};const bz=e=>{if(!Array.isArray(e))throw new Error("Bezier points must be a valid array/");if(e.length<2)throw new Error("Bezier points must contain at least 2 values.");const t=Tz(e);return{points:e,pointType:t,dimensions:t==="float_single"?0:e[0].length,permutations:dw(e.length-1),tangentPermutations:dw(e.length-2)}},Tz=function(e){let t=null;return e.forEach(n=>{let r="";if(Number.isFinite(n))r="float_single";else if(Array.isArray(n))n.forEach(o=>{if(!Number.isFinite(o))throw new Error("Bezier point values must all be numbers.")}),r="float_"+n.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(t==null)t=r;else if(t!==r)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),t},dw=function(e){const t=[];for(let n=0;n<=e;n++)t.push(ch(e)/(ch(n)*ch(e-n)));return t},ch=function(e){let t=1;for(let n=2;n<=e;n++)t*=n;return t};var Pz=bz;const Cz=(e,t)=>{if(e<0||e>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(t.pointType==="float_single")return hw(t,t.points,e);{const n=[];for(let r=0;r<t.dimensions;r++){const o=[];for(let s=0;s<t.points.length;s++)o.push(t.points[s][r]);n.push(hw(t,o,e))}return n}},hw=function(e,t,n){const r=t.length-1;let o=0;for(let s=0;s<=r;s++)o+=e.permutations[s]*Math.pow(1-n,r-s)*Math.pow(n,s)*t[s];return o};var ES=Cz;const kz=(e,t)=>{if(e<0||e>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(t.pointType==="float_single")return pw(t,t.points,e);{const n=[];for(let r=0;r<t.dimensions;r++){const o=[];for(let s=0;s<t.points.length;s++)o.push(t.points[s][r]);n.push(pw(t,o,e))}return n}},pw=function(e,t,n){const r=t.length-1;let o=0;for(let s=0;s<r;s++){const i=r*(t[s+1]-t[s]);o+=e.tangentPermutations[s]*Math.pow(1-n,r-1-s)*Math.pow(n,s)*i}return o};var Mz=kz;const mw=ES,Nz=(e,t)=>{let n=0;const r=[0];let o=mw(0,t);for(let s=1;s<=e;s++){const i=mw(s/e,t);n+=Rz(i,o),r.push(n),o=i}return r},Rz=(e,t)=>{if(Number.isFinite(e)&&Number.isFinite(t))return Math.abs(e-t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)throw new Error("The operands must have the same number of dimensions.");let n=0;for(let r=0;r<e.length;r++)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)}else throw new Error("The operands must be of the same type, either number or array.")};var Lv=Nz;const Oz=Lv,Lz=(e,t)=>Oz(e,t)[e];var Fz=Lz;const Dz=Lv,Iz=(e,t)=>{const n={distance:0,segments:100},{distance:r,segments:o}=Object.assign({},n,e),s=Dz(o,t);let i=0,a=o;for(;i<=a;){const p=Math.floor(i+(a-i)/2),y=s[p]-r;if(y<0)i=p+1;else if(y>0)a=p-1;else{a=p;break}}const l=a;if(s[l]===r)return l/o;const c=s[l],f=s[l+1]-c,d=(r-c)/f;return(l+d)/o};var zz=Iz,Bz={create:Pz,valueAt:ES,tangentAt:Mz,lengths:Lv,length:Fz,arcLengthToT:zz},Gz={bezier:Bz};const Vz=e=>{let t=0;for(let n=0;n<e.length;n++){const r=(n+1)%e.length;t+=e[n][0]*e[r][1],t-=e[r][0]*e[n][1]}return t/2};var i1=Vz;const jz=i1,Uz=e=>jz(e.vertices);var _S=Uz;const Hz=e=>((e===void 0||e.length<3)&&(e=[]),{vertices:e});var $S=Hz;const Xz=$S,Wz=e=>{const t=e.vertices.slice().reverse();return Xz(t)};var SS=Wz;const Yz=_S,qz=SS,Zz=(e,t)=>{if(e.length===0)return 0;const n=t.vertices;return n.length<3?0:(Yz(t)<0&&(t=qz(t)),e.reduce((o,s)=>o+Qz(s,n),0)===e.length?1:0)},Qz=(e,t)=>{const n=t.length,r=e[0],o=e[1];let s=t[n-1],i=t[0],a=s[1]>o,l=0,c=0;for(let u=n+1;--u;){const f=i[1]>o;if(a!==f){const d=s[0]>r,p=i[0]>r;(d&&p||i[0]-(i[1]-o)*(s[0]-i[0])/(s[1]-i[1])>=r)&&(l=!l)}a=f,s=i,i=t[++c]}return l};var Kz=Zz,Fv={arePointsInside:Kz,create:$S,flip:SS,measureArea:_S},Dv={geom2:ut,geom3:ft,path2:bt,poly2:Fv,poly3:gt};const Jz=()=>[0,1,0];var Iv=Jz;const e9=Iv,t9=e=>{const t=e9();return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};var n9=t9;const uh=mt,r9=e=>{const t=uh.normal(uh.create(),e);return uh.negate(t,t),t};var zv=r9;const vw=mt,o9=e=>vw.scale(vw.create(),e,e[2]);var a1=o9;const Al=mt,s9=zv,i9=a1,a9=(e,t)=>{const n=i9(e),r=s9(e),o=Al.subtract(Al.create(),t,n),s=Al.dot(o,r);return Al.scale(o,r,s),Al.add(o,o,n),o};var l9=a9;const c9=(e,t)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],e);var AS=c9;const u9=mt,f9=(e,t)=>{let n=u9.dot(t,e);return n=Math.abs(n-e[2]),n};var d9=f9;const h9=(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2];var p9=h9;const bl=mt,m9=(e,t,n)=>{const r=bl.subtract(bl.create(),n,t);bl.normal(r,r),bl.normalize(r,r);const o=bl.dot(t,r);return e[0]=r[0],e[1]=r[1],e[2]=o,e};var bS=m9;const v9=Iv,g9=(e,t,n)=>{const r=v9();return r[0]=e,r[1]=t,r[2]=n,r};var TS=g9;const{NEPS:fh}=wt,y9=(e,t)=>Math.abs(e[0]-t[0])<=fh&&Math.abs(e[1]-t[1])<=fh&&Math.abs(e[2]-t[2])<=fh;var Bv=y9;const w9=(e,t,n)=>{let r=n-e[1],o=t[1]-e[1];o<0&&(r=-r,o=-o);let s;return r<=0?s=0:r>=o?s=1:o<1e-10?s=.5:s=r/o,e[0]+s*(t[0]-e[0])};var PS=w9;const x9=(e,t,n,r)=>{if(e[0]===t[0]&&e[1]===t[1]||n[0]===r[0]&&n[1]===r[1])return;const o=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(Math.abs(o)<Number.MIN_VALUE)return;const s=((r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]))/o,i=((t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]))/o;if(s<0||s>1||i<0||i>1)return;const a=e[0]+s*(t[0]-e[0]),l=e[1]+s*(t[1]-e[1]);return[a,l]};var CS=x9;const E9=(e,t,n,r,o,s)=>{const a=1/(e*r-t*n);let l=o*r-t*s,c=-o*n+e*s;return l*=a,c*=a,[l,c]};var _9=E9,Oc={aboutEqualNormals:Bv,area:i1,cos:Pn.cos,interpolateBetween2DPointsForY:PS,intersect:CS,sin:Pn.sin,solve2Linear:_9};const $9=mt,{solve2Linear:S9}=Oc,A9=(e,t)=>{const n=S9(e[0],e[1],t[0],t[1],e[2],t[2]);return $9.clone(n)};var b9=A9;const gw=mt,T9=AS,P9=TS,C9=(e,t)=>{const n=gw.negate(gw.create(),t),r=-t[2];return T9(e,P9(n[0],n[1],r))};var k9=C9;const M9=e=>`line2: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)})`;var N9=M9;const yw=mt,R9=bS,O9=a1,L9=zv,F9=(e,t,n)=>{const r=O9(t),o=L9(t);return yw.transform(r,r,n),yw.transform(o,o,n),R9(e,r,o)};var D9=F9;const I9=a1,z9=(e,t)=>{let n=(e[2]-e[1]*t)/e[0];return Number.isNaN(n)&&(n=I9(e)[0]),n};var B9=z9,Gv={clone:n9,closestPoint:l9,copy:AS,create:Iv,direction:zv,distanceToPoint:d9,equals:p9,fromPoints:bS,fromValues:TS,intersectPointOfLines:b9,origin:a1,reverse:k9,toString:N9,transform:D9,xAtY:B9};const ww=qe,G9=()=>[ww.fromValues(0,0,0),ww.fromValues(0,0,1)];var kS=G9;const xw=qe,V9=kS,j9=e=>{const t=V9();return xw.copy(t[0],e[0]),xw.copy(t[1],e[1]),t};var U9=j9;const Gs=qe,H9=(e,t)=>{const n=e[0],r=e[1],o=Gs.dot(Gs.subtract(Gs.create(),t,n),r),s=Gs.dot(r,r),i=o/s,a=Gs.scale(Gs.create(),r,i);return Gs.add(a,a,n),a};var MS=H9;const Ew=qe,X9=(e,t)=>(Ew.copy(e[0],t[0]),Ew.copy(e[1],t[1]),e);var W9=X9;const Y9=e=>e[1];var q9=Y9;const dh=qe,Z9=MS,Q9=(e,t)=>{const n=Z9(e,t),r=dh.subtract(dh.create(),t,n);return dh.length(r)};var K9=Q9;const _w=qe,J9=(e,t)=>!(!_w.equals(e[1],t[1])||!_w.equals(e[0],t[0]));var eB=J9;const qu=qe,tB=(e,t,n)=>{const r=qu.normalize(qu.create(),n);return qu.copy(e[0],t),qu.copy(e[1],r),e};var Lc=tB;const Vs=qe,{solve2Linear:hh}=Oc,{EPS:nB}=wt,rB=Lc,oB=(e,t,n)=>{let r=Vs.cross(Vs.create(),t,n),o=Vs.length(r);if(o<nB)throw new Error("parallel planes do not intersect");o=1/o,r=Vs.scale(r,r,o);const s=Math.abs(r[0]),i=Math.abs(r[1]),a=Math.abs(r[2]);let l,c;return s>=i&&s>=a?(c=hh(t[1],t[2],n[1],n[2],t[3],n[3]),l=Vs.fromValues(0,c[0],c[1])):i>=s&&i>=a?(c=hh(t[0],t[2],n[0],n[2],t[3],n[3]),l=Vs.fromValues(c[0],0,c[1])):(c=hh(t[0],t[1],n[0],n[1],t[3],n[3]),l=Vs.fromValues(c[0],c[1],0)),rB(e,l,r)};var sB=oB;const $w=qe,iB=Lc,aB=(e,t,n)=>{const r=$w.subtract($w.create(),n,t);return iB(e,t,r)};var lB=aB;const Ii=qe,cB=(e,t)=>{const n=t,r=t[3],o=e[0],s=e[1],i=(r-Ii.dot(n,o))/Ii.dot(n,s);return Ii.add(Ii.create(),o,Ii.scale(Ii.create(),s,i))};var uB=cB;const fB=e=>e[0];var dB=fB;const ph=qe,hB=Lc,pB=(e,t)=>{const n=ph.clone(t[0]),r=ph.negate(ph.create(),t[1]);return hB(e,n,r)};var mB=pB;const vB=e=>{const t=e[0],n=e[1];return`line3: point: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}) direction: (${n[0].toFixed(7)}, ${n[1].toFixed(7)}, ${n[2].toFixed(7)})`};var gB=vB;const zi=qe,yB=Lc,wB=(e,t,n)=>{const r=t[0],o=t[1],s=zi.add(zi.create(),r,o),i=zi.transform(zi.create(),r,n),a=zi.transform(s,s,n),l=zi.subtract(a,a,i);return yB(e,i,l)};var xB=wB,EB={clone:U9,closestPoint:MS,copy:W9,create:kS,direction:q9,distanceToPoint:K9,equals:eB,fromPlanes:sB,fromPointAndDirection:Lc,fromPoints:lB,intersectPointOfLineAndPlane:uB,origin:dB,reverse:mB,toString:gB,transform:xB},_B={constants:wt,line2:Gv,line3:EB,mat4:Ct,plane:lo,utils:Oc,vec2:mt,vec3:qe,vec4:cS};const $B=lt,NS=ut,RS=ft,SB=bt,AB=gt,cd=new WeakMap,bB=()=>0,TB=e=>{let t=cd.get(e);return t||(t=NS.toSides(e).reduce((r,o)=>r+(o[0][0]*o[1][1]-o[0][1]*o[1][0]),0),t*=.5,cd.set(e,t),t)},PB=e=>{let t=cd.get(e);return t||(t=RS.toPolygons(e).reduce((r,o)=>r+AB.measureArea(o),0),cd.set(e,t),t)},CB=(...e)=>{if(e=$B(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>SB.isA(n)?bB():NS.isA(n)?TB(n):RS.isA(n)?PB(n):0);return t.length===1?t[0]:t};var OS=CB;const kB=lt,MB=OS,NB=(...e)=>{if(e=kB(e),e.length===0)throw new Error("measureAggregateArea: no geometries supplied");const t=MB(e);return e.length===1?t:t.reduce((r,o)=>r+o,0)};var RB=NB;const OB=lt,ro=mt,Tl=qe,LS=ut,FS=ft,DS=bt,Sw=gt,Sa=new WeakMap,LB=e=>{let t=Sa.get(e);if(t)return t;const n=DS.toPoints(e);let r;n.length===0?r=ro.create():r=ro.clone(n[0]);let o=ro.clone(r);return n.forEach(s=>{ro.min(r,r,s),ro.max(o,o,s)}),r=[r[0],r[1],0],o=[o[0],o[1],0],t=[r,o],Sa.set(e,t),t},FB=e=>{let t=Sa.get(e);if(t)return t;const n=LS.toPoints(e);let r;n.length===0?r=ro.create():r=ro.clone(n[0]);let o=ro.clone(r);return n.forEach(s=>{ro.min(r,r,s),ro.max(o,o,s)}),r=[r[0],r[1],0],o=[o[0],o[1],0],t=[r,o],Sa.set(e,t),t},DB=e=>{let t=Sa.get(e);if(t)return t;const n=FS.toPolygons(e);let r=Tl.create();if(n.length>0){const s=Sw.toPoints(n[0]);Tl.copy(r,s[0])}let o=Tl.clone(r);return n.forEach(s=>{Sw.toPoints(s).forEach(i=>{Tl.min(r,r,i),Tl.max(o,o,i)})}),r=[r[0],r[1],r[2]],o=[o[0],o[1],o[2]],t=[r,o],Sa.set(e,t),t},IB=(...e)=>{if(e=OB(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>DS.isA(n)?LB(n):LS.isA(n)?FB(n):FS.isA(n)?DB(n):[[0,0,0],[0,0,0]]);return t.length===1?t[0]:t};var hi=IB;const zB=lt,BB=z$,GB=I$,VB=hi,jB=(...e)=>{if(e=zB(e),e.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");const t=VB(e);if(e.length===1)return t;const n=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return t.reduce((r,o)=>(r=[BB(r[0],r[0],o[0]),GB(r[1],r[1],o[1])],r),n)};var Vv=jB;const{EPS:UB}=wt,HB=(e,t)=>{let n=0;for(let r=0;r<t;r++)n+=e[1][r]-e[0][r];return UB*n/t};var IS=HB;const XB=lt,WB=Vv,YB=IS,{geom2:qB,geom3:ZB,path2:QB}=Dv,KB=(...e)=>{if(e=XB(e),e.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");const t=WB(e);let n=0;return n=e.reduce((r,o)=>QB.isA(o)||qB.isA(o)?Math.max(r,2):ZB.isA(o)?Math.max(r,3):0,n),YB(t,n)};var JB=KB;const eG=lt,tG=ut,zS=ft,nG=bt,rG=gt,Aw=new WeakMap,oG=()=>0,sG=()=>0,iG=e=>{let t=Aw.get(e);return t||(t=zS.toPolygons(e).reduce((r,o)=>r+rG.measureSignedVolume(o),0),Aw.set(e,t),t)},aG=(...e)=>{if(e=eG(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>nG.isA(n)?oG():tG.isA(n)?sG():zS.isA(n)?iG(n):0);return t.length===1?t[0]:t};var BS=aG;const lG=lt,cG=BS,uG=(...e)=>{if(e=lG(e),e.length===0)throw new Error("measureAggregateVolume: no geometries supplied");const t=cG(e);return e.length===1?t:t.reduce((r,o)=>r+o,0)};var fG=uG;const dG=lt,GS=mt,Zn=qe,VS=ut,jS=ft,US=bt,bw=gt,Aa=new WeakMap,hG=e=>{let t=Aa.get(e);if(t!==void 0)return t;const n=Zn.create();let r=0;const o=US.toPoints(e);if(o.length>0){let s=0;const i=Zn.create();o.forEach(a=>{Zn.add(n,n,Zn.fromVec2(i,a,0)),s++}),Zn.scale(n,n,1/s),o.forEach(a=>{r=Math.max(r,GS.squaredDistance(n,a))}),r=Math.sqrt(r)}return t=[n,r],Aa.set(e,t),t},pG=e=>{let t=Aa.get(e);if(t!==void 0)return t;const n=Zn.create();let r=0;const o=VS.toSides(e);if(o.length>0){let s=0;const i=Zn.create();o.forEach(a=>{Zn.add(n,n,Zn.fromVec2(i,a[0],0)),s++}),Zn.scale(n,n,1/s),o.forEach(a=>{r=Math.max(r,GS.squaredDistance(n,a[0]))}),r=Math.sqrt(r)}return t=[n,r],Aa.set(e,t),t},mG=e=>{let t=Aa.get(e);if(t!==void 0)return t;const n=Zn.create();let r=0;const o=jS.toPolygons(e);if(o.length>0){let s=0;o.forEach(i=>{bw.toPoints(i).forEach(a=>{Zn.add(n,n,a),s++})}),Zn.scale(n,n,1/s),o.forEach(i=>{bw.toPoints(i).forEach(a=>{r=Math.max(r,Zn.squaredDistance(n,a))})}),r=Math.sqrt(r)}return t=[n,r],Aa.set(e,t),t},vG=(...e)=>{e=dG(e);const t=e.map(n=>US.isA(n)?hG(n):VS.isA(n)?pG(n):jS.isA(n)?mG(n):[[0,0,0],0]);return t.length===1?t[0]:t};var gG=vG;const yG=lt,wG=hi,xG=(...e)=>{e=yG(e);const t=e.map(n=>{const r=wG(n);return[r[0][0]+(r[1][0]-r[0][0])/2,r[0][1]+(r[1][1]-r[0][1])/2,r[0][2]+(r[1][2]-r[0][2])/2]});return t.length===1?t[0]:t};var EG=xG;const _G=lt,Jr=qe,HS=ut,XS=ft,ud=new WeakMap,$G=e=>{let t=ud.get(e);if(t!==void 0)return t;const n=HS.toSides(e);let r=0,o=0,s=0;if(n.length>0){for(let a=0;a<n.length;a++){const l=n[a][0],c=n[a][1],u=l[0]*c[1]-l[1]*c[0];r+=u,o+=(l[0]+c[0])*u,s+=(l[1]+c[1])*u}r/=2;const i=1/(r*6);o*=i,s*=i}return t=Jr.fromValues(o,s,0),ud.set(e,t),t},SG=e=>{let t=ud.get(e);if(t!==void 0)return t;t=Jr.create();const n=XS.toPolygons(e);if(n.length===0)return t;let r=0;const o=Jr.create();return n.forEach(s=>{const i=s.vertices;for(let a=0;a<i.length-2;a++){Jr.cross(o,i[a+1],i[a+2]);const l=Jr.dot(i[0],o)/6;r+=l,Jr.add(o,i[0],i[a+1]),Jr.add(o,o,i[a+2]);const c=Jr.scale(o,o,1/4*l);Jr.add(t,t,c)}}),Jr.scale(t,t,1/r),ud.set(e,t),t},AG=(...e)=>{e=_G(e);const t=e.map(n=>HS.isA(n)?$G(n):XS.isA(n)?SG(n):[0,0,0]);return t.length===1?t[0]:t};var bG=AG;const TG=lt,PG=hi,CG=(...e)=>{e=TG(e);const t=e.map(n=>{const r=PG(n);return[r[1][0]-r[0][0],r[1][1]-r[0][1],r[1][2]-r[0][2]]});return t.length===1?t[0]:t};var kG=CG;const MG=lt,{geom2:NG,geom3:RG,path2:OG}=Dv,jv=IS,Uv=hi,LG=e=>jv(Uv(e),2),FG=e=>jv(Uv(e),2),DG=e=>jv(Uv(e),3),IG=(...e)=>{if(e=MG(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>OG.isA(n)?LG(n):NG.isA(n)?FG(n):RG.isA(n)?DG(n):0);return t.length===1?t[0]:t};var Es=IG,zG={measureAggregateArea:RB,measureAggregateBoundingBox:Vv,measureAggregateEpsilon:JB,measureAggregateVolume:fG,measureArea:OS,measureBoundingBox:hi,measureBoundingSphere:gG,measureCenter:EG,measureCenterOfMass:bG,measureDimensions:kG,measureEpsilon:Es,measureVolume:BS};const BG=(e,t)=>Array.isArray(e)&&e.length>=t?e.every(n=>Number.isFinite(n)):!1,GG=(e,t)=>Number.isFinite(e)&&e>t,VG=(e,t)=>Number.isFinite(e)&&e>=t;var hn={isNumberArray:BG,isGT:GG,isGTE:VG};const{EPS:Tw,TAU:Bi}=wt,mo=mt,jG=bt,{isGT:UG,isGTE:mh,isNumberArray:HG}=hn,XG=e=>{const t={center:[0,0],radius:1,startAngle:0,endAngle:Bi,makeTangent:!1,segments:32};let{center:n,radius:r,startAngle:o,endAngle:s,makeTangent:i,segments:a}=Object.assign({},t,e);if(!HG(n,2))throw new Error("center must be an array of X and Y values");if(!UG(r,0))throw new Error("radius must be greater than zero");if(!mh(o,0))throw new Error("startAngle must be positive");if(!mh(s,0))throw new Error("endAngle must be positive");if(!mh(a,4))throw new Error("segments must be four or more");o=o%Bi,s=s%Bi;let l=Bi;o<s&&(l=s-o),o>s&&(l=s+(Bi-o));const c=Math.acos((r*r+r*r-Tw*Tw)/(2*r*r)),u=mo.clone(n);let f;const d=[];if(l<c)f=mo.fromAngleRadians(mo.create(),o),mo.scale(f,f,r),mo.add(f,f,u),d.push(f);else{const p=Math.max(1,Math.floor(a*(l/Bi)))+1;let y=p*.5/l;y>.25&&(y=.25);const v=i?p+2:p;for(let x=0;x<=v;x++){let m=x;i&&(m=(x-1)*(p-2*y)/p+y,m<0&&(m=0),m>p&&(m=p));const g=o+m*(l/p);f=mo.fromAngleRadians(mo.create(),g),mo.scale(f,f,r),mo.add(f,f,u),d.push(f)}}return jG.fromPoints({closed:!1},d)};var WG=XG;const{EPS:Pw,TAU:Vo}=wt,vh=mt,Cw=ut,{sin:YG,cos:qG}=Pn,{isGTE:gh,isNumberArray:kw}=hn,ZG=e=>{const t={center:[0,0],radius:[1,1],startAngle:0,endAngle:Vo,segments:32};let{center:n,radius:r,startAngle:o,endAngle:s,segments:i}=Object.assign({},t,e);if(!kw(n,2))throw new Error("center must be an array of X and Y values");if(!kw(r,2))throw new Error("radius must be an array of X and Y values");if(!r.every(p=>p>=0))throw new Error("radius values must be positive");if(!gh(o,0))throw new Error("startAngle must be positive");if(!gh(s,0))throw new Error("endAngle must be positive");if(!gh(i,3))throw new Error("segments must be three or more");if(r[0]===0||r[1]===0)return Cw.create();o=o%Vo,s=s%Vo;let a=Vo;o<s&&(a=s-o),o>s&&(a=s+(Vo-o));const l=Math.min(r[0],r[1]),c=Math.acos((l*l+l*l-Pw*Pw)/(2*l*l));if(a<c)throw new Error("startAngle and endAngle do not define a significant rotation");i=Math.floor(i*(a/Vo));const u=vh.clone(n),f=a/i,d=[];i=a<Vo?i+1:i;for(let p=0;p<i;p++){const y=f*p+o,v=vh.fromValues(r[0]*qG(y),r[1]*YG(y));vh.add(v,u,v),d.push(v)}return a<Vo&&d.push(u),Cw.fromPoints(d)};var WS=ZG;const{TAU:QG}=wt,KG=WS,{isGTE:JG}=hn,eV=e=>{const t={center:[0,0],radius:1,startAngle:0,endAngle:QG,segments:32};let{center:n,radius:r,startAngle:o,endAngle:s,segments:i}=Object.assign({},t,e);if(!JG(r,0))throw new Error("radius must be positive");return r=[r,r],KG({center:n,radius:r,startAngle:o,endAngle:s,segments:i})};var YS=eV;const Mw=ft,tV=gt,{isNumberArray:Nw}=hn,nV=e=>{const t={center:[0,0,0],size:[2,2,2]},{center:n,size:r}=Object.assign({},t,e);if(!Nw(n,3))throw new Error("center must be an array of X, Y and Z values");if(!Nw(r,3))throw new Error("size must be an array of width, depth and height values");if(!r.every(s=>s>=0))throw new Error("size values must be positive");return r[0]===0||r[1]===0||r[2]===0?Mw.create():Mw.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(s=>{const i=s[0].map(a=>[n[0]+r[0]/2*(2*!!(a&1)-1),n[1]+r[1]/2*(2*!!(a&2)-1),n[2]+r[2]/2*(2*!!(a&4)-1)]);return tV.create(i)}))};var Hv=nV;const rV=Hv,{isGTE:oV}=hn,sV=e=>{const t={center:[0,0,0],size:2};let{center:n,size:r}=Object.assign({},t,e);if(!oV(r,0))throw new Error("size must be positive");return r=[r,r,r],rV({center:n,size:r})};var iV=sV;const{EPS:Rw,TAU:jo}=wt,wn=qe,aV=ft,lV=gt,{sin:cV,cos:uV}=Pn,{isGT:fV,isGTE:yh,isNumberArray:wh}=hn,dV=e=>{const t={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:jo,segments:32};let{center:n,height:r,startRadius:o,startAngle:s,endRadius:i,endAngle:a,segments:l}=Object.assign({},t,e);if(!wh(n,3))throw new Error("center must be an array of X, Y and Z values");if(!fV(r,0))throw new Error("height must be greater then zero");if(!wh(o,2))throw new Error("startRadius must be an array of X and Y values");if(!o.every(X=>X>=0))throw new Error("startRadius values must be positive");if(!wh(i,2))throw new Error("endRadius must be an array of X and Y values");if(!i.every(X=>X>=0))throw new Error("endRadius values must be positive");if(i.every(X=>X===0)&&o.every(X=>X===0))throw new Error("at least one radius must be positive");if(!yh(s,0))throw new Error("startAngle must be positive");if(!yh(a,0))throw new Error("endAngle must be positive");if(!yh(l,4))throw new Error("segments must be four or more");s=s%jo,a=a%jo;let c=jo;s<a&&(c=a-s),s>a&&(c=a+(jo-s));const u=Math.min(o[0],o[1],i[0],i[1]),f=Math.acos((u*u+u*u-Rw*Rw)/(2*u*u));if(c<f)throw new Error("startAngle and endAngle do not define a significant rotation");const d=Math.floor(l*(c/jo)),p=wn.fromValues(0,0,-(r/2)),y=wn.fromValues(0,0,r/2),v=wn.subtract(wn.create(),y,p),x=wn.fromValues(1,0,0),m=wn.fromValues(0,1,0),g=wn.create(),w=wn.create(),E=wn.create(),A=(X,j,J)=>{const le=j*c+s;return wn.scale(g,x,J[0]*uV(le)),wn.scale(w,m,J[1]*cV(le)),wn.add(g,g,w),wn.scale(E,v,X),wn.add(E,E,p),wn.add(wn.create(),g,E)},$=(...X)=>{const j=X.map(J=>wn.add(wn.create(),J,n));return lV.create(j)},k=[];for(let X=0;X<d;X++){const j=X/d;let J=(X+1)/d;c===jo&&X===d-1&&(J=0),i[0]===o[0]&&i[1]===o[1]?(k.push($(p,A(0,J,i),A(0,j,i))),k.push($(A(0,J,i),A(1,J,i),A(1,j,i),A(0,j,i))),k.push($(y,A(1,j,i),A(1,J,i)))):(o[0]>0&&o[1]>0&&k.push($(p,A(0,J,o),A(0,j,o))),(o[0]>0||o[1]>0)&&k.push($(A(0,j,o),A(0,J,o),A(1,j,i))),i[0]>0&&i[1]>0&&k.push($(y,A(1,j,i),A(1,J,i))),(i[0]>0||i[1]>0)&&k.push($(A(1,j,i),A(0,J,o),A(1,J,i))))}return c<jo&&(k.push($(p,A(0,0,o),y)),k.push($(A(0,0,o),A(1,0,i),y)),k.push($(p,y,A(0,1,o))),k.push($(A(0,1,o),y,A(1,1,i)))),aV.create(k)};var qS=dV;const hV=ft,pV=qS,{isGTE:mV}=hn,vV=e=>{const t={center:[0,0,0],height:2,radius:1,segments:32},{center:n,height:r,radius:o,segments:s}=Object.assign({},t,e);if(!mV(o,0))throw new Error("radius must be positive");return r===0||o===0?hV.create():pV({center:n,height:r,startRadius:[o,o],endRadius:[o,o],segments:s})};var ZS=vV;const{TAU:Ow}=wt,Qe=qe,Lw=ft,Fw=gt,{sin:Dw,cos:Iw}=Pn,{isGTE:gV,isNumberArray:zw}=hn,yV=e=>{const t={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:n,radius:r,segments:o,axes:s}=Object.assign({},t,e);if(!zw(n,3))throw new Error("center must be an array of X, Y and Z values");if(!zw(r,3))throw new Error("radius must be an array of X, Y and Z values");if(!r.every(y=>y>=0))throw new Error("radius values must be positive");if(!gV(o,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0||r[2]===0)return Lw.create();const i=Qe.scale(Qe.create(),Qe.normalize(Qe.create(),s[0]),r[0]),a=Qe.scale(Qe.create(),Qe.normalize(Qe.create(),s[1]),r[1]),l=Qe.scale(Qe.create(),Qe.normalize(Qe.create(),s[2]),r[2]),c=Math.round(o/4);let u;const f=[],d=Qe.create(),p=Qe.create();for(let y=0;y<=o;y++){const v=Ow*y/o,x=Qe.add(Qe.create(),Qe.scale(d,i,Iw(v)),Qe.scale(p,a,Dw(v)));if(y>0){let m,g;for(let w=0;w<=c;w++){const E=Ow/4*w/c,A=Iw(E),$=Dw(E);if(w>0){let k=[],N;N=Qe.subtract(Qe.create(),Qe.scale(d,u,m),Qe.scale(p,l,g)),k.push(Qe.add(N,N,n)),N=Qe.subtract(Qe.create(),Qe.scale(d,x,m),Qe.scale(p,l,g)),k.push(Qe.add(N,N,n)),w<c&&(N=Qe.subtract(Qe.create(),Qe.scale(d,x,A),Qe.scale(p,l,$)),k.push(Qe.add(N,N,n))),N=Qe.subtract(Qe.create(),Qe.scale(d,u,A),Qe.scale(p,l,$)),k.push(Qe.add(N,N,n)),f.push(Fw.create(k)),k=[],N=Qe.add(Qe.create(),Qe.scale(d,u,m),Qe.scale(p,l,g)),k.push(Qe.add(Qe.create(),n,N)),N=Qe.add(N,Qe.scale(d,x,m),Qe.scale(p,l,g)),k.push(Qe.add(Qe.create(),n,N)),w<c&&(N=Qe.add(N,Qe.scale(d,x,A),Qe.scale(p,l,$)),k.push(Qe.add(Qe.create(),n,N))),N=Qe.add(N,Qe.scale(d,u,A),Qe.scale(p,l,$)),k.push(Qe.add(Qe.create(),n,N)),k.reverse(),f.push(Fw.create(k))}m=A,g=$}}u=x}return Lw.create(f)};var QS=yV;const wV=ft,xV=gt,{isNumberArray:Bw}=hn,EV=e=>{const t={points:[],faces:[],colors:void 0,orientation:"outward"},{points:n,faces:r,colors:o,orientation:s}=Object.assign({},t,e);if(!(Array.isArray(n)&&Array.isArray(r)))throw new Error("points and faces must be arrays");if(n.length<3)throw new Error("three or more points are required");if(r.length<1)throw new Error("one or more faces are required");if(o){if(!Array.isArray(o))throw new Error("colors must be an array");if(o.length!==r.length)throw new Error("faces and colors must have the same length")}n.forEach((a,l)=>{if(!Bw(a,3))throw new Error(`point ${l} must be an array of X, Y, Z values`)}),r.forEach((a,l)=>{if(a.length<3)throw new Error(`face ${l} must contain 3 or more indexes`);if(!Bw(a,a.length))throw new Error(`face ${l} must be an array of numbers`)}),s!=="outward"&&r.forEach(a=>a.reverse());const i=r.map((a,l)=>{const c=xV.create(a.map(u=>n[u]));return o&&o[l]&&(c.color=o[l]),c});return wV.create(i)};var KS=EV;const Gw=Ct,Vw=qe,jw=ft,_V=KS,{isGTE:Uw}=hn,$V=e=>{const t={radius:1,frequency:6};let{radius:n,frequency:r}=Object.assign({},t,e);if(!Uw(n,0))throw new Error("radius must be positive");if(!Uw(r,6))throw new Error("frequency must be six or more");if(n===0)return jw.create();r=Math.floor(r/6);const o=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],s=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],i=(d,p,y)=>{const v=d[0],x=d[1],m=d[2];let g=y;const w=[],E=[];for(let A=0;A<p;A++)for(let $=0;$<p-A;$++){const k=A/p,N=(A+1)/p,X=$/(p-A),j=($+1)/(p-A),J=p-A-1?$/(p-A-1):1,le=[];le[0]=a(a(v,x,X),m,k),le[1]=a(a(v,x,j),m,k),le[2]=a(a(v,x,J),m,N);for(let _e=0;_e<3;_e++){const Z=Vw.length(le[_e]);for(let Me=0;Me<3;Me++)le[_e][Me]/=Z}if(w.push(le[0],le[1],le[2]),E.push([g,g+1,g+2]),g+=3,$<p-A-1){const _e=p-A-1?($+1)/(p-A-1):1;le[0]=a(a(v,x,j),m,k),le[1]=a(a(v,x,_e),m,N),le[2]=a(a(v,x,J),m,N);for(let Z=0;Z<3;Z++){const Me=Vw.length(le[Z]);for(let we=0;we<3;we++)le[Z][we]/=Me}w.push(le[0],le[1],le[2]),E.push([g,g+1,g+2]),g+=3}}return{points:w,triangles:E,offset:g}},a=(d,p,y)=>{const v=1-y,x=[];for(let m=0;m<3;m++)x[m]=d[m]*v+p[m]*y;return x};let l=[],c=[],u=0;for(let d=0;d<s.length;d++){const p=i([o[s[d][0]],o[s[d][1]],o[s[d][2]]],r,u);l=l.concat(p.points),c=c.concat(p.triangles),u=p.offset}let f=_V({points:l,faces:c,orientation:"inward"});return n!==1&&(f=jw.transform(Gw.fromScaling(Gw.create(),[n,n,n]),f)),f};var SV=$V;const AV=bt,bV=e=>{if(!Array.isArray(e))throw new Error("points must be an array");return AV.fromPoints({},e)};var TV=bV;const Zu=ut,PV=e=>{const t={points:[],paths:[],orientation:"counterclockwise"},{points:n,paths:r,orientation:o}=Object.assign({},t,e);if(!(Array.isArray(n)&&Array.isArray(r)))throw new Error("points and paths must be arrays");let s=n;Array.isArray(n[0])&&(Array.isArray(n[0][0])||(s=[n])),s.forEach((u,f)=>{if(!Array.isArray(u))throw new Error("list of points "+f+" must be an array");if(u.length<3)throw new Error("list of points "+f+" must contain three or more points");u.forEach((d,p)=>{if(!Array.isArray(d))throw new Error("list of points "+f+", point "+p+" must be an array");if(d.length<2)throw new Error("list of points "+f+", point "+p+" must contain by X and Y values")})});let i=r;if(r.length===0){let u=0;i=s.map(f=>f.map(d=>u++))}const a=[];s.forEach(u=>u.forEach(f=>a.push(f)));let l=[];i.forEach(u=>{const f=u.map(p=>a[p]),d=Zu.fromPoints(f);l=l.concat(Zu.toSides(d))});let c=Zu.create(l);return o=="clockwise"&&(c=Zu.reverse(c)),c};var CV=PV;const Uo=mt,Hw=ut,{isNumberArray:Xw}=hn,kV=e=>{const t={center:[0,0],size:[2,2]},{center:n,size:r}=Object.assign({},t,e);if(!Xw(n,2))throw new Error("center must be an array of X and Y values");if(!Xw(r,2))throw new Error("size must be an array of X and Y values");if(!r.every(a=>a>=0))throw new Error("size values must be positive");if(r[0]===0||r[1]===0)return Hw.create();const o=[r[0]/2,r[1]/2],s=[o[0],-o[1]],i=[Uo.subtract(Uo.create(),n,o),Uo.add(Uo.create(),n,s),Uo.add(Uo.create(),n,o),Uo.subtract(Uo.create(),n,s)];return Hw.fromPoints(i)};var Xv=kV;const{EPS:kf,TAU:Pl}=wt,xh=mt,tn=qe,Ww=ft,ba=gt,{sin:MV,cos:NV}=Pn,{isGTE:Yw,isNumberArray:qw}=hn,RV=Hv,Zw=(e,t,n,r,o,s)=>{const i=Pl/4*o/r,a=NV(i),l=MV(i),c=r-o;let u=n*a,f=t[2]-(n-n*l);s||(f=n-n*l-t[2]),u=u>kf?u:0;const d=tn.add(tn.create(),e,[t[0]-n,t[1]-n,f]),p=tn.add(tn.create(),e,[n-t[0],t[1]-n,f]),y=tn.add(tn.create(),e,[n-t[0],n-t[1],f]),v=tn.add(tn.create(),e,[t[0]-n,n-t[1],f]),x=[],m=[],g=[],w=[];for(let E=0;E<=c;E++){const A=c>0?Pl/4*E/c:0,$=xh.fromAngleRadians(xh.create(),A);xh.scale($,$,u);const k=tn.fromVec2(tn.create(),$);x.push(tn.add(tn.create(),d,k)),tn.rotateZ(k,k,[0,0,0],Pl/4),m.push(tn.add(tn.create(),p,k)),tn.rotateZ(k,k,[0,0,0],Pl/4),g.push(tn.add(tn.create(),y,k)),tn.rotateZ(k,k,[0,0,0],Pl/4),w.push(tn.add(tn.create(),v,k))}return s?[x,m,g,w]:(x.reverse(),m.reverse(),g.reverse(),w.reverse(),[w,g,m,x])},Qw=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r];for(let i=0;i<o.length-1;i++)n.push(ba.create([o[i],o[i+1],s[i]])),i<s.length-1&&n.push(ba.create([s[i],o[i+1],s[i+1]]))}return n},Kw=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t[r];const i=o[o.length-1],a=s[s.length-1],l=(r+1)%e.length;o=e[l],s=t[l];const c=o[0],u=s[0];n.push(ba.create([i,c,u,a]))}return n},OV=(e,t)=>{e=[e[3],e[2],e[1],e[0]],e=e.map(s=>s.slice().reverse());const n=[];e.forEach(s=>{s.forEach(i=>n.push(i))});const r=[];t.forEach(s=>{s.forEach(i=>r.push(i))});const o=[];for(let s=0;s<r.length;s++){const i=(s+1)%r.length;o.push(ba.create([n[s],n[i],r[i],r[s]]))}return o},LV=e=>{const t={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32};let{center:n,size:r,roundRadius:o,segments:s}=Object.assign({},t,e);if(!qw(n,3))throw new Error("center must be an array of X, Y and Z values");if(!qw(r,3))throw new Error("size must be an array of X, Y and Z values");if(!r.every(c=>c>=0))throw new Error("size values must be positive");if(!Yw(o,0))throw new Error("roundRadius must be positive");if(!Yw(s,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0||r[2]===0)return Ww.create();if(o===0)return RV({center:n,size:r});if(r=r.map(c=>c/2),o>r[0]-kf||o>r[1]-kf||o>r[2]-kf)throw new Error("roundRadius must be smaller than the radius of all dimensions");s=Math.floor(s/4);let i=null,a=null,l=[];for(let c=0;c<=s;c++){const u=Zw(n,r,o,s,c,!0),f=Zw(n,r,o,s,c,!1);if(c===0&&(l=l.concat(OV(f,u))),i&&(l=l.concat(Qw(i,u),Kw(i,u))),a&&(l=l.concat(Qw(a,f),Kw(a,f))),c===s){let d=u.map(p=>p[0]);l.push(ba.create(d)),d=f.map(p=>p[0]),l.push(ba.create(d))}i=u,a=f}return Ww.create(l)};var FV=LV;const{EPS:DV,TAU:Jw}=wt,ze=qe,e3=ft,IV=gt,{sin:t3,cos:n3}=Pn,{isGTE:Qu,isNumberArray:zV}=hn,BV=ZS,GV=e=>{const t={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:n,height:r,radius:o,roundRadius:s,segments:i}=Object.assign({},t,e);if(!zV(n,3))throw new Error("center must be an array of X, Y and Z values");if(!Qu(r,0))throw new Error("height must be positive");if(!Qu(o,0))throw new Error("radius must be positive");if(!Qu(s,0))throw new Error("roundRadius must be positive");if(s>o)throw new Error("roundRadius must be smaller than the radius");if(!Qu(i,4))throw new Error("segments must be four or more");if(r===0||o===0)return e3.create();if(s===0)return BV({center:n,height:r,radius:o});const a=[0,0,-(r/2)],l=[0,0,r/2],c=ze.subtract(ze.create(),l,a),u=ze.length(c);if(2*s>u-DV)throw new Error("height must be larger than twice roundRadius");let f;Math.abs(c[0])>Math.abs(c[1])?f=ze.fromValues(0,1,0):f=ze.fromValues(1,0,0);const d=ze.scale(ze.create(),ze.normalize(ze.create(),c),s),p=ze.scale(ze.create(),ze.normalize(ze.create(),ze.cross(ze.create(),d,f)),o),y=ze.scale(ze.create(),ze.normalize(ze.create(),ze.cross(ze.create(),p,d)),o);ze.add(a,a,d),ze.subtract(l,l,d);const v=Math.floor(.25*i),x=$=>{const k=$.map(N=>ze.add(N,N,n));return IV.create(k)},m=[],g=ze.create(),w=ze.create();let E;for(let $=0;$<=i;$++){const k=Jw*$/i,N=ze.add(ze.create(),ze.scale(g,p,n3(k)),ze.scale(w,y,t3(k)));if($>0){let X=[];X.push(ze.add(ze.create(),a,N)),X.push(ze.add(ze.create(),a,E)),X.push(ze.add(ze.create(),l,E)),X.push(ze.add(ze.create(),l,N)),m.push(x(X));let j,J;for(let le=0;le<=v;le++){const _e=Jw/4*le/v,Z=n3(_e),Me=t3(_e);if(le>0){X=[];let we;we=ze.add(ze.create(),a,ze.subtract(g,ze.scale(g,E,j),ze.scale(w,d,J))),X.push(we),we=ze.add(ze.create(),a,ze.subtract(g,ze.scale(g,N,j),ze.scale(w,d,J))),X.push(we),le<v&&(we=ze.add(ze.create(),a,ze.subtract(g,ze.scale(g,N,Z),ze.scale(w,d,Me))),X.push(we)),we=ze.add(ze.create(),a,ze.subtract(g,ze.scale(g,E,Z),ze.scale(w,d,Me))),X.push(we),m.push(x(X)),X=[],we=ze.add(ze.create(),ze.scale(g,E,j),ze.scale(w,d,J)),ze.add(we,we,l),X.push(we),we=ze.add(ze.create(),ze.scale(g,N,j),ze.scale(w,d,J)),ze.add(we,we,l),X.push(we),le<v&&(we=ze.add(ze.create(),ze.scale(g,N,Z),ze.scale(w,d,Me)),ze.add(we,we,l),X.push(we)),we=ze.add(ze.create(),ze.scale(g,E,Z),ze.scale(w,d,Me)),ze.add(we,we,l),X.push(we),X.reverse(),m.push(x(X))}j=Z,J=Me}}E=N}return e3.create(m)};var VV=GV;const{EPS:r3,TAU:Ku}=wt,Ft=mt,o3=ut,{isGTE:s3,isNumberArray:i3}=hn,jV=Xv,UV=e=>{const t={center:[0,0],size:[2,2],roundRadius:.2,segments:32};let{center:n,size:r,roundRadius:o,segments:s}=Object.assign({},t,e);if(!i3(n,2))throw new Error("center must be an array of X and Y values");if(!i3(r,2))throw new Error("size must be an array of X and Y values");if(!r.every(v=>v>=0))throw new Error("size values must be positive");if(!s3(o,0))throw new Error("roundRadius must be positive");if(!s3(s,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0)return o3.create();if(o===0)return jV({center:n,size:r});if(r=r.map(v=>v/2),o>r[0]-r3||o>r[1]-r3)throw new Error("roundRadius must be smaller than the radius of all dimensions");const i=Math.floor(s/4),a=Ft.add(Ft.create(),n,[r[0]-o,r[1]-o]),l=Ft.add(Ft.create(),n,[o-r[0],r[1]-o]),c=Ft.add(Ft.create(),n,[o-r[0],o-r[1]]),u=Ft.add(Ft.create(),n,[r[0]-o,o-r[1]]),f=[],d=[],p=[],y=[];for(let v=0;v<=i;v++){const x=Ku/4*v/i,m=Ft.fromAngleRadians(Ft.create(),x);Ft.scale(m,m,o),f.push(Ft.add(Ft.create(),a,m)),Ft.rotate(m,m,Ft.create(),Ku/4),d.push(Ft.add(Ft.create(),l,m)),Ft.rotate(m,m,Ft.create(),Ku/4),p.push(Ft.add(Ft.create(),c,m)),Ft.rotate(m,m,Ft.create(),Ku/4),y.push(Ft.add(Ft.create(),u,m))}return o3.fromPoints(f.concat(d,p,y))};var HV=UV;const XV=QS,{isGTE:WV}=hn,YV=e=>{const t={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]};let{center:n,radius:r,segments:o,axes:s}=Object.assign({},t,e);if(!WV(r,0))throw new Error("radius must be positive");return r=[r,r,r],XV({center:n,radius:r,segments:o,axes:s})};var JS=YV;const qV=Xv,{isGTE:ZV}=hn,QV=e=>{const t={center:[0,0],size:2};let{center:n,size:r}=Object.assign({},t,e);if(!ZV(r,0))throw new Error("size must be positive");return r=[r,r],qV({center:n,size:r})};var KV=QV;const{TAU:e4}=wt,zl=mt,JV=ut,{isGT:ej,isGTE:Ju,isNumberArray:tj}=hn,nj=(e,t)=>e>0&&t>1&&t<e/2?Math.cos(Math.PI*t/e)/Math.cos(Math.PI*(t-1)/e):0,a3=(e,t,n,r)=>{const o=e4/e,s=[];for(let i=0;i<e;i++){const a=zl.fromAngleRadians(zl.create(),o*i+n);zl.scale(a,a,t),zl.add(a,r,a),s.push(a)}return s},rj=e=>{const t={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0};let{center:n,vertices:r,outerRadius:o,innerRadius:s,density:i,startAngle:a}=Object.assign({},t,e);if(!tj(n,2))throw new Error("center must be an array of X and Y values");if(!Ju(r,2))throw new Error("vertices must be two or more");if(!ej(o,0))throw new Error("outerRadius must be greater than zero");if(!Ju(s,0))throw new Error("innerRadius must be greater than zero");if(!Ju(a,0))throw new Error("startAngle must be greater than zero");if(r=Math.floor(r),i=Math.floor(i),a=a%e4,s===0){if(!Ju(i,2))throw new Error("density must be two or more");s=o*nj(r,i)}const l=zl.clone(n),c=a3(r,o,a,l),u=a3(r,s,a+Math.PI/r,l),f=[];for(let d=0;d<r;d++)f.push(c[d]),f.push(u[d]);return JV.fromPoints(f)};var oj=rj;const sj=lt,l3=Ct,c3=lo,u3=ut,f3=ft,d3=bt,l1=(e,...t)=>{const n={origin:[0,0,0],normal:[0,0,1]},{origin:r,normal:o}=Object.assign({},n,e);if(t=sj(t),t.length===0)throw new Error("wrong number of arguments");const s=c3.fromNormalAndPoint(c3.create(),o,r);if(Number.isNaN(s[0]))throw new Error("the given origin and normal do not define a proper plane");const i=l3.mirrorByPlane(l3.create(),s),a=t.map(l=>d3.isA(l)?d3.transform(i,l):u3.isA(l)?u3.transform(i,l):f3.isA(l)?f3.transform(i,l):l);return a.length===1?a[0]:a},ij=(...e)=>l1({normal:[1,0,0]},e),aj=(...e)=>l1({normal:[0,1,0]},e),lj=(...e)=>l1({normal:[0,0,1]},e);var Bl={mirror:l1,mirrorX:ij,mirrorY:aj,mirrorZ:lj};const h3=lo,js=qe,cj=e=>{const t=e.edges;if(t.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const n=t.reduce((i,a)=>js.add(js.create(),i,a[0]),js.create());js.scale(n,n,1/t.length);let r,o=0;t.forEach(i=>{if(!js.equals(i[0],i[1])){const a=js.squaredDistance(n,i[0]);a>o&&(r=i,o=a)}});const s=t.find(i=>js.equals(i[1],r[0]));return h3.fromPoints(h3.create(),s[0],r[0],r[1])};var t4=cj;const uj=e=>(e||(e=[]),{edges:e});var pi=uj;const fj=pi,p3=qe,dj=(...e)=>{let t,n;return e.length===1?(t=fj(),n=e[0]):(t=e[0],n=e[1]),t.edges=n.edges.map(r=>[p3.clone(r[0]),p3.clone(r[1])]),t};var hj=dj;const pj=qe,mj=(e,t)=>{const n=e.edges,r=t.edges;return n.length!==r.length?!1:n.reduce((s,i,a)=>{const l=r[a],c=pj.squaredDistance(i[0],l[0]);return s&&c<Number.EPSILON},!0)};var vj=mj;const ef=qe,gj=pi,yj=e=>{if(!Array.isArray(e))throw new Error("the given points must be an array");if(e.length<3)throw new Error("the given points must contain THREE or more points");const t=[];let n=e[e.length-1];return e.forEach(r=>{r.length===2&&t.push([ef.fromVec2(ef.create(),n),ef.fromVec2(ef.create(),r)]),r.length===3&&t.push([n,r]),n=r}),gj(t)};var wj=yj;const tf=qe,xj=pi,Ej=e=>{if(!Array.isArray(e))throw new Error("the given sides must be an array");const t=[];return e.forEach(n=>{t.push([tf.fromVec2(tf.create(),n[0]),tf.fromVec2(tf.create(),n[1])])}),xj(t)};var _j=Ej;const $j=e=>!!(e&&typeof e=="object"&&"edges"in e&&Array.isArray(e.edges));var Sj=$j;const Aj=pi,bj=(...e)=>{let t,n;return e.length===1?(t=Aj(),n=e[0]):(t=e[0],n=e[1]),t.edges=n.edges.map(r=>[r[1],r[0]]),t};var Tj=bj;const Pj=e=>e.edges;var Cj=Pj;const kj=(e,t)=>{let n,r,o,s,i,a=1;do{r=e,e=null;let l=null;for(i=0;r;){i++,o=r;let c=0;for(n=0;n<a&&(c++,o=o.nextZ,!!o);n++);let u=a;for(;c>0||u>0&&o;)c!==0&&(u===0||!o||t(r)<=t(o))?(s=r,r=r.nextZ,c--):(s=o,o=o.nextZ,u--),l?l.nextZ=s:e=s,s.prevZ=l,l=s;r=o}l.nextZ=null,a*=2}while(i>1);return e};var Mj=kj;const Nj=Mj;let n4=class{constructor(t,n,r){this.i=t,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}};const Rj=(e,t,n,r)=>{const o=new n4(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o},Oj=e=>{e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)};var r4={Node:n4,insertNode:Rj,removeNode:Oj,sortLinked:Nj};const Lj=(e,t,n,r,o,s,i,a)=>(o-i)*(t-a)-(e-i)*(s-a)>=0&&(e-i)*(r-a)-(n-i)*(t-a)>=0&&(n-i)*(s-a)-(o-i)*(r-a)>=0,Fj=(e,t,n)=>(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);var Wv={area:Fj,pointInTriangle:Lj};const{Node:m3,insertNode:v3,removeNode:fd}=r4,{area:Qn}=Wv,Dj=(e,t,n,r,o)=>{let s;if(o===jj(e,t,n,r)>0)for(let i=t;i<n;i+=r)s=v3(i,e[i],e[i+1],s);else for(let i=n-r;i>=t;i-=r)s=v3(i,e[i],e[i+1],s);return s&&c1(s,s.next)&&(fd(s),s=s.next),s},o4=(e,t)=>{if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(c1(n,n.next)||Qn(n.prev,n,n.next)===0)){if(fd(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t},Ij=(e,t,n)=>{let r=e;do{const o=r.prev,s=r.next.next;!c1(o,s)&&s4(o,r,r.next,s)&&gc(o,s)&&gc(s,o)&&(t.push(o.i/n),t.push(r.i/n),t.push(s.i/n),fd(r),fd(r.next),r=e=s),r=r.next}while(r!==e);return o4(r)},zj=(e,t)=>{let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&s4(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1},gc=(e,t)=>Qn(e.prev,e,e.next)<0?Qn(e,t,e.next)>=0&&Qn(e,e.prev,t)>=0:Qn(e,t,e.prev)<0||Qn(e,e.next,t)<0,Bj=(e,t)=>{let n=e,r=!1;const o=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&o<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r},Gj=(e,t)=>{const n=new m3(e.i,e.x,e.y),r=new m3(t.i,t.x,t.y),o=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r},Vj=(e,t)=>e.next.i!==t.i&&e.prev.i!==t.i&&!zj(e,t)&&(gc(e,t)&&gc(t,e)&&Bj(e,t)&&(Qn(e.prev,e,t.prev)||Qn(e,t.prev,t))||c1(e,t)&&Qn(e.prev,e,e.next)>0&&Qn(t.prev,t,t.next)>0),s4=(e,t,n,r)=>{const o=Math.sign(Qn(e,t,n)),s=Math.sign(Qn(e,t,r)),i=Math.sign(Qn(n,r,e)),a=Math.sign(Qn(n,r,t));return!!(o!==s&&i!==a||o===0&&nf(e,n,t)||s===0&&nf(e,r,t)||i===0&&nf(n,e,r)||a===0&&nf(n,t,r))},nf=(e,t,n)=>t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y),jj=(e,t,n,r)=>{let o=0;for(let s=t,i=n-r;s<n;s+=r)o+=(e[i]-e[s])*(e[s+1]+e[i+1]),i=s;return o},c1=(e,t)=>e.x===t.x&&e.y===t.y;var i4={cureLocalIntersections:Ij,filterPoints:o4,isValidDiagonal:Vj,linkedPolygon:Dj,locallyInside:gc,splitPolygon:Gj};const{filterPoints:om,linkedPolygon:Uj,locallyInside:Hj,splitPolygon:Xj}=i4,{area:g3,pointInTriangle:Wj}=Wv,Yj=(e,t,n,r)=>{const o=[];for(let s=0,i=t.length;s<i;s++){const a=t[s]*r,l=s<i-1?t[s+1]*r:e.length,c=Uj(e,a,l,r,!1);c===c.next&&(c.steiner=!0),o.push(Kj(c))}o.sort((s,i)=>s.x-i.x);for(let s=0;s<o.length;s++)n=qj(o[s],n),n=om(n,n.next);return n},qj=(e,t)=>{const n=Zj(e,t);if(!n)return t;const r=Xj(n,e),o=om(n,n.next);return om(r,r.next),t===n?o:t},Zj=(e,t)=>{let n=t;const r=e.x,o=e.y;let s=-1/0,i;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=r&&f>s){if(s=f,f===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===s)return i;const a=i,l=i.x,c=i.y;let u=1/0;n=i;do{if(r>=n.x&&n.x>=l&&r!==n.x&&Wj(o<c?r:s,o,l,c,o<c?s:r,o,n.x,n.y)){const f=Math.abs(o-n.y)/(r-n.x);Hj(n,e)&&(f<u||f===u&&(n.x>i.x||n.x===i.x&&Qj(i,n)))&&(i=n,u=f)}n=n.next}while(n!==a);return i},Qj=(e,t)=>g3(e.prev,e,t.prev)<0&&g3(t.next,e,e.next)<0,Kj=e=>{let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n};var Jj=Yj;const eU=Jj,{removeNode:tU,sortLinked:nU}=r4,{cureLocalIntersections:rU,filterPoints:dd,isValidDiagonal:oU,linkedPolygon:sU,splitPolygon:iU}=i4,{area:Ws,pointInTriangle:Gl}=Wv,aU=(e,t,n=2)=>{const r=t&&t.length,o=r?t[0]*n:e.length;let s=sU(e,0,o,n,!0);const i=[];if(!s||s.next===s.prev)return i;let a,l,c,u,f;if(r&&(s=eU(e,t,s,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let d=n;d<o;d+=n){const p=e[d],y=e[d+1];p<a&&(a=p),y<l&&(l=y),p>c&&(c=p),y>u&&(u=y)}f=Math.max(c-a,u-l),f=f!==0?1/f:0}return yc(s,i,n,a,l,f),i},yc=(e,t,n,r,o,s,i)=>{if(!e)return;!i&&s&&fU(e,r,o,s);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?cU(e,r,o,s):lU(e)){t.push(l.i/n),t.push(e.i/n),t.push(c.i/n),tU(e),e=c.next,a=c.next;continue}if(e=c,e===a){i?i===1?(e=rU(dd(e),t,n),yc(e,t,n,r,o,s,2)):i===2&&uU(e,t,n,r,o,s):yc(dd(e),t,n,r,o,s,1);break}}},lU=e=>{const t=e.prev,n=e,r=e.next;if(Ws(t,n,r)>=0)return!1;let o=e.next.next;for(;o!==e.prev;){if(Gl(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&&Ws(o.prev,o,o.next)>=0)return!1;o=o.next}return!0},cU=(e,t,n,r)=>{const o=e.prev,s=e,i=e.next;if(Ws(o,s,i)>=0)return!1;const a=o.x<s.x?o.x<i.x?o.x:i.x:s.x<i.x?s.x:i.x,l=o.y<s.y?o.y<i.y?o.y:i.y:s.y<i.y?s.y:i.y,c=o.x>s.x?o.x>i.x?o.x:i.x:s.x>i.x?s.x:i.x,u=o.y>s.y?o.y>i.y?o.y:i.y:s.y>i.y?s.y:i.y,f=sm(a,l,t,n,r),d=sm(c,u,t,n,r);let p=e.prevZ,y=e.nextZ;for(;p&&p.z>=f&&y&&y.z<=d;){if(p!==e.prev&&p!==e.next&&Gl(o.x,o.y,s.x,s.y,i.x,i.y,p.x,p.y)&&Ws(p.prev,p,p.next)>=0||(p=p.prevZ,y!==e.prev&&y!==e.next&&Gl(o.x,o.y,s.x,s.y,i.x,i.y,y.x,y.y)&&Ws(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&Gl(o.x,o.y,s.x,s.y,i.x,i.y,p.x,p.y)&&Ws(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=d;){if(y!==e.prev&&y!==e.next&&Gl(o.x,o.y,s.x,s.y,i.x,i.y,y.x,y.y)&&Ws(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0},uU=(e,t,n,r,o,s)=>{let i=e;do{let a=i.next.next;for(;a!==i.prev;){if(i.i!==a.i&&oU(i,a)){let l=iU(i,a);i=dd(i,i.next),l=dd(l,l.next),yc(i,t,n,r,o,s),yc(l,t,n,r,o,s);return}a=a.next}i=i.next}while(i!==e)},fU=(e,t,n,r)=>{let o=e;do o.z===null&&(o.z=sm(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,nU(o,s=>s.z)},sm=(e,t,n,r,o)=>(e=32767*(e-n)*o,t=32767*(t-r)*o,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1);var dU=aU;const{area:hU}=Oc,{toOutlines:pU}=ut,{arePointsInside:mU}=Fv,vU=e=>{const t=pU(e),n=[],r=[];t.forEach((i,a)=>{const l=hU(i);l<0?r.push(a):l>0&&n.push(a)});const o=[],s=[];return n.forEach((i,a)=>{const l=t[i];o[a]=[],r.forEach((c,u)=>{const f=t[c];mU([f[0]],{vertices:l})&&(o[a].push(c),s[u]||(s[u]=[]),s[u].push(a))})}),r.forEach((i,a)=>{if(s[a]&&s[a].length>1){const l=gU(s[a],c=>o[c].length);s[a].forEach((c,u)=>{u!==l&&(o[c]=o[c].filter(f=>f!==i))})}}),o.map((i,a)=>({solid:t[n[a]],holes:i.map(l=>t[l])}))},gU=(e,t)=>{let n,r;return e.forEach((o,s)=>{const i=t(o);(r===void 0||i<r)&&(n=s,r=i)}),n};var yU=vU;const wU=ut,y3=lo,xU=mt,$n=qe,EU=t4,_U=yU;let $U=class{constructor(t){this.plane=EU(t);const n=$n.orthogonal($n.create(),this.plane),r=$n.cross($n.create(),this.plane,n);this.v=$n.normalize(r,r),this.u=$n.cross($n.create(),this.v,this.plane),this.basisMap=new Map;const o=t.edges.map(i=>i.map(a=>this.to2D(a))),s=wU.create(o);this.roots=_U(s)}to2D(t){const n=xU.fromValues($n.dot(t,this.u),$n.dot(t,this.v));return this.basisMap.set(n,t),n}to3D(t){const n=this.basisMap.get(t);if(n)return n;{console.log("Warning: point not in original slice");const r=$n.scale($n.create(),this.u,t[0]),o=$n.scale($n.create(),this.v,t[1]),s=$n.scale($n.create(),y3,y3[3]),i=$n.add(r,r,s);return $n.add(o,o,i)}}};var SU=$U;const AU=gt,bU=dU,TU=SU,PU=e=>{const t=new TU(e),n=[];return t.roots.forEach(({solid:r,holes:o})=>{let s=r.length;const i=[];o.forEach((f,d)=>{i.push(s),s+=f.length});const a=[r,...o].flat(),l=a.flat(),c=f=>t.to3D(a[f]),u=bU(l,i);for(let f=0;f<u.length;f+=3){const d=u.slice(f,f+3).map(c);n.push(AU.fromPointsAndPlane(d,t.plane))}}),n};var CU=PU;const w3=qe,kU=e=>e.reduce((t,n)=>t+=`[${w3.toString(n[0])}, ${w3.toString(n[1])}], `,""),MU=e=>`[${kU(e.edges)}]`;var NU=MU;const rf=qe,RU=pi,OU=(e,t)=>{const n=t.edges.map(r=>[rf.transform(rf.create(),r[0],e),rf.transform(rf.create(),r[1],e)]);return RU(n)};var LU=OU,La={calculatePlane:t4,clone:hj,create:pi,equals:vj,fromPoints:wj,fromSides:_j,isA:Sj,reverse:Tj,toEdges:Cj,toPolygons:CU,toString:NU,transform:LU};const x3=qe,FU=pi,DU=e=>{if(!e.edges)return e;let t=e.edges;const n=new Map,r=new Map;t=t.filter(i=>!x3.equals(i[0],i[1])),t.forEach(i=>{const a=i[0].toString(),l=i[1].toString();n.set(a,i[0]),n.set(l,i[1]),r.set(a,(r.get(a)||0)+1),r.set(l,(r.get(l)||0)-1)});const o=[],s=[];return r.forEach((i,a)=>{i<0&&o.push(a),i>0&&s.push(a)}),o.forEach(i=>{const a=n.get(i);let l=1/0,c;s.forEach(u=>{const f=n.get(u),d=x3.distance(a,f);d<l&&(l=d,c=f)}),console.warn(`slice.repair: repairing vertex gap ${a} to ${c} distance ${l}`),t=t.map(u=>u[0].toString()===i?[c,u[1]]:u[1].toString()===i?[u[0],c]:u)}),FU(t)};var IU=DU;const{EPS:E3}=wt,Gi=qe,of=gt,_3=La,im=(e,t)=>e===t?e:e<t?im(t,e):t===1?1:t===0?e:im(t,e%t),zU=(e,t)=>e*t/im(e,t),$3=(e,t)=>{const n=e/t.length;if(n===1)return t;const r=Gi.fromValues(n,n,n),o=[];return t.forEach(s=>{const i=Gi.subtract(Gi.create(),s[1],s[0]);Gi.divide(i,i,r);let a=s[0];for(let l=1;l<=n;++l){const c=Gi.add(Gi.create(),a,i);o.push([a,c]),a=c}}),o},S3=E3*E3/2*Math.sin(Math.PI/3),BU=(e,t)=>{let n=_3.toEdges(e),r=_3.toEdges(t);if(n.length!==r.length){const s=zU(n.length,r.length);s!==n.length&&(n=$3(s,n)),s!==r.length&&(r=$3(s,r))}const o=[];return n.forEach((s,i)=>{const a=r[i],l=of.create([s[0],s[1],a[1]]),c=of.measureArea(l);Number.isFinite(c)&&c>S3&&o.push(l);const u=of.create([s[0],a[1],a[0]]),f=of.measureArea(u);Number.isFinite(f)&&f>S3&&o.push(u)}),o};var GU=BU;const A3=Ct,b3=ut,VU=ft,am=gt,ns=La,jU=IU,T3=GU,UU=(e,t,n)=>{let r=null;return b3.isA(n)&&(r=ns.fromSides(b3.toSides(n))),am.isA(n)&&(r=ns.fromPoints(am.toPoints(n))),e===0||e===1?ns.transform(A3.fromTranslation(A3.create(),[0,0,e]),r):null},HU=(e,t)=>{const n={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:UU},{numberOfSlices:r,capStart:o,capEnd:s,close:i,repair:a,callback:l}=Object.assign({},n,e);if(r<2)throw new Error("numberOfSlices must be 2 or more");a&&(t=jU(t));const c=r-1;let u=null,f=null,d=null,p=[];for(let y=0;y<r;y++){const v=l(y/c,y,t);if(v){if(!ns.isA(v))throw new Error("the callback function must return slice objects");if(ns.toEdges(v).length===0)throw new Error("the callback function must return slices with one or more edges");d&&(p=p.concat(T3(d,v))),y===0&&(u=v),y===r-1&&(f=v),d=v}}if(s){const y=ns.toPolygons(f);p=p.concat(y)}if(o){const y=ns.toPolygons(u).map(am.invert);p=p.concat(y)}return!o&&!s&&i&&!ns.equals(f,u)&&(p=p.concat(T3(f,u))),VU.create(p)};var u1=HU;const{TAU:cr}=wt,Cl=Ct,{mirrorX:XU}=Bl,sf=ut,Eh=La,WU=u1,YU=(e,t)=>{const n={segments:12,startAngle:0,angle:cr,overflow:"cap"};let{segments:r,startAngle:o,angle:s,overflow:i}=Object.assign({},n,e);if(r<3)throw new Error("segments must be greater then 3");o=Math.abs(o)>cr?o%cr:o,s=Math.abs(s)>cr?s%cr:s;let a=o+s;if(a=Math.abs(a)>cr?a%cr:a,a<o){const g=o;o=a,a=g}let l=a-o;if(l<=0&&(l=cr),Math.abs(l)<cr){const g=cr/r;r=Math.floor(Math.abs(l)/g),Math.abs(l)>r*g&&r++}let c=sf.toSides(t);if(c.length===0)throw new Error("the given geometry cannot be empty");const u=c.filter(g=>g[0][0]<0),f=c.filter(g=>g[0][0]>=0);u.length>0&&f.length>0&&i==="cap"&&(u.length>f.length?(c=c.map(g=>{let w=g[0],E=g[1];return w=[Math.min(w[0],0),w[1]],E=[Math.min(E[0],0),E[1]],[w,E]}),t=sf.create(c),t=XU(t)):f.length>=u.length&&(c=c.map(g=>{let w=g[0],E=g[1];return w=[Math.max(w[0],0),w[1]],E=[Math.max(E[0],0),E[1]],[w,E]}),t=sf.create(c)));const p=l/r,y=Math.abs(l)<cr,v=Eh.fromSides(sf.toSides(t));Eh.reverse(v,v);const x=Cl.create(),m=(g,w,E)=>{let A=p*w+o;return l===cr&&w===r&&(A=o),Cl.multiply(x,Cl.fromZRotation(x,A),Cl.fromXRotation(Cl.create(),cr/4)),Eh.transform(x,E)};return e={numberOfSlices:r+1,capStart:y,capEnd:y,close:!y,callback:m},WU(e,v)};var a4=YU;const qU=lt,P3=Ct,C3=ut,k3=ft,M3=bt,f1=(e,...t)=>{if(!Array.isArray(e))throw new Error("angles must be an array");if(t=qU(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);const n=e[2],r=e[1],o=e[0],s=P3.fromTaitBryanRotation(P3.create(),n,r,o),i=t.map(a=>M3.isA(a)?M3.transform(s,a):C3.isA(a)?C3.transform(s,a):k3.isA(a)?k3.transform(s,a):a);return i.length===1?i[0]:i},ZU=(e,...t)=>f1([e,0,0],t),QU=(e,...t)=>f1([0,e,0],t),KU=(e,...t)=>f1([0,0,e],t);var Vl={rotate:f1,rotateX:ZU,rotateY:QU,rotateZ:KU};const JU=lt,N3=Ct,R3=ut,O3=ft,L3=bt,d1=(e,...t)=>{if(!Array.isArray(e))throw new Error("offset must be an array");if(t=JU(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(0);const n=N3.fromTranslation(N3.create(),e),r=t.map(o=>L3.isA(o)?L3.transform(n,o):R3.isA(o)?R3.transform(n,o):O3.isA(o)?O3.transform(n,o):o);return r.length===1?r[0]:r},eH=(e,...t)=>d1([e,0,0],t),tH=(e,...t)=>d1([0,e,0],t),nH=(e,...t)=>d1([0,0,e],t);var Ks={translate:d1,translateX:eH,translateY:tH,translateZ:nH};const{TAU:rH}=wt,oH=a4,{rotate:sH}=Vl,{translate:iH}=Ks,aH=YS,{isGT:_h,isGTE:$h}=hn,lH=e=>{const t={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:rH},{innerRadius:n,innerSegments:r,outerRadius:o,outerSegments:s,innerRotation:i,startAngle:a,outerRotation:l}=Object.assign({},t,e);if(!_h(n,0))throw new Error("innerRadius must be greater than zero");if(!$h(r,3))throw new Error("innerSegments must be three or more");if(!_h(o,0))throw new Error("outerRadius must be greater than zero");if(!$h(s,3))throw new Error("outerSegments must be three or more");if(!$h(a,0))throw new Error("startAngle must be positive");if(!_h(l,0))throw new Error("outerRotation must be greater than zero");if(n>=o)throw new Error("inner circle is two large to rotate about the outer circle");let c=aH({radius:n,segments:r});return i!==0&&(c=sH([0,0,i],c)),c=iH([o,0],c),oH({startAngle:a,angle:l,segments:s},c)};var cH=lH;const{NEPS:Ta}=wt,kl=mt,uH=ut,{isNumberArray:fH}=hn,lm=(e,t,n)=>Math.acos((e*e+t*t-n*n)/(2*e*t)),dH=(e,t,n)=>t>Ta?Math.sqrt(e*e+n*n-2*e*n*Math.cos(t)):Math.sqrt((e-n)*(e-n)+e*n*t*t*(1-t*t/12)),hH=e=>{if(Math.abs(e[0]+e[1]+e[2]-Math.PI)>Ta)throw new Error("AAA triangles require angles that sum to PI");const n=e[0],r=e[1],o=Math.PI-n-r,s=1,i=s/Math.sin(o)*Math.sin(n),a=s/Math.sin(o)*Math.sin(r);return Fa(n,r,o,i,a,s)},pH=e=>{const t=e[0],n=e[1],r=Math.PI+Ta-t-n;if(r<Ta)throw new Error("AAS triangles require angles that sum to PI");const o=e[2],s=o/Math.sin(t)*Math.sin(n),i=o/Math.sin(t)*Math.sin(r);return Fa(t,n,r,o,s,i)},mH=e=>{const t=e[0],n=e[2],r=Math.PI+Ta-t-n;if(r<Ta)throw new Error("ASA triangles require angles that sum to PI");const o=e[1],s=o/Math.sin(r)*Math.sin(t),i=o/Math.sin(r)*Math.sin(n);return Fa(t,n,r,s,i,o)},vH=e=>{const t=e[0],n=e[1],r=e[2],o=dH(t,n,r),s=lm(o,t,r),i=Math.PI-s-n;return Fa(s,n,i,r,o,t)},gH=e=>{const t=e[0],n=e[1],r=e[2],o=Math.asin(n*Math.sin(r)/t),s=Math.PI-o-r,i=t/Math.sin(r)*Math.sin(s);return Fa(o,s,r,n,i,t)},yH=e=>{const t=e[1],n=e[2],r=e[0];if(t+n<=r||n+r<=t||r+t<=n)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const o=lm(n,r,t),s=lm(r,t,n),i=Math.PI-o-s;return Fa(o,s,i,t,n,r)},Fa=(e,t,n,r,o,s)=>{const i=kl.fromValues(0,0),a=kl.fromValues(s,0),l=kl.fromValues(r,0);return kl.add(l,kl.rotate(l,l,[0,0],Math.PI-t),a),uH.fromPoints([i,a,l])},wH=e=>{const t={type:"SSS",values:[1,1,1]};let{type:n,values:r}=Object.assign({},t,e);if(typeof n!="string")throw new Error("triangle type must be a string");if(n=n.toUpperCase(),!((n[0]==="A"||n[0]==="S")&&(n[1]==="A"||n[1]==="S")&&(n[2]==="A"||n[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!fH(r,3))throw new Error("triangle values must contain three values");if(!r.every(o=>o>0))throw new Error("triangle values must be greater than zero");switch(n){case"AAA":return hH(r);case"AAS":return pH(r);case"ASA":return mH(r);case"SAS":return vH(r);case"SSA":return gH(r);case"SSS":return yH(r);default:throw new Error("invalid triangle type, try again")}};var xH=wH,EH={arc:WG,circle:YS,cube:iV,cuboid:Hv,cylinder:ZS,cylinderElliptic:qS,ellipse:WS,ellipsoid:QS,geodesicSphere:SV,line:TV,polygon:CV,polyhedron:KS,rectangle:Xv,roundedCuboid:FV,roundedCylinder:VV,roundedRectangle:HV,sphere:JS,square:KV,star:oj,torus:cH,triangle:xH},_H={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]};const $H=_H,SH={xOffset:0,yOffset:0,input:"?",align:"left",font:$H,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},AH=(e,t)=>{!t&&typeof e=="string"&&(e={input:e}),e=e||{};const n=Object.assign({},SH,e);return n.input=t||n.input,n};var l4=AH;const bH=l4,TH=(e,t)=>{const{xOffset:n,yOffset:r,input:o,font:s,height:i,extrudeOffset:a}=bH(e,t);let l=o.charCodeAt(0);(!l||!s[l])&&(l=63);const c=[].concat(s[l]),u=(i-a)/s.height,f=a/2,d=c.shift()*u,p=[];let y=[];for(let v=0,x=c.length;v<x;v+=2){const m=u*c[v]+n,g=u*c[v+1]+r+f;if(c[v]!==void 0){y.push([m,g]);continue}p.push(y),y=[],v--}return y.length&&p.push(y),{width:d,height:i,segments:p}};var c4=TH;const PH=c4,CH=l4,F3=(e,t)=>{const{x:n,y:r}=Object.assign({x:0,y:0},e||{}),o=t.segments;let s=null,i=null;for(let a=0,l=o.length;a<l;a++){s=o[a];for(let c=0,u=s.length;c<u;c++)i=s[c],s[c]=[i[0]+n,i[1]+r]}return t},kH=(e,t)=>{const{xOffset:n,yOffset:r,input:o,font:s,height:i,align:a,extrudeOffset:l,lineSpacing:c,letterSpacing:u}=CH(e,t);let[f,d]=[n,r],p,y,v,x,m,g,w={width:0,segments:[]};const E=[];let A=[],$=0;const k=f,N=()=>{E.push(w),$=Math.max($,w.width),w={width:0,segments:[]}};for(p=0,y=o.length;p<y;p++){if(v=o[p],x=PH({xOffset:f,yOffset:d,font:s,height:i,extrudeOffset:l},v),v===`
`){f=k,d-=x.height*c,N();continue}m=x.width*u,w.width+=m,f+=m,v!==" "&&(w.segments=w.segments.concat(x.segments))}for(w.segments.length&&N(),p=0,y=E.length;p<y;p++)w=E[p],$>w.width&&(g=$-w.width,a==="right"?w=F3({x:g},w):a==="center"&&(w=F3({x:g/2},w))),A=A.concat(w.segments);return A};var MH=kH,NH={vectorChar:c4,vectorText:MH};const RH=ut,OH=ft,LH=bt,FH=e=>{let t;for(const n of e){let r=0;if(RH.isA(n)&&(r=1),OH.isA(n)&&(r=2),LH.isA(n)&&(r=3),t&&r!==t)return!1;t=r}return!0};var Fc=FH;const DH=e=>e*.017453292519943295;var IH=DH;const zH=(e,t)=>e-t;var u4=zH;const BH=(e,t,n)=>{let r=0,o=e.length;for(;o>r;){const s=Math.floor((r+o)/2),i=e[s];n(t,i)>0?r=s+1:o=s}e.splice(r,0,t)};var GH=BH;const{TAU:D3}=wt,VH=(e,t,n)=>{const r=t>0?e*D3/t:0,o=n>0?D3/n:0;return Math.ceil(Math.max(r,o,4))};var jH=VH;const UH=e=>e*57.29577951308232;var HH=UH,f4={areAllShapesTheSameType:Fc,degToRad:IH,flatten:lt,fnNumberSort:u4,insertSorted:GH,radiusToSegments:jH,radToDeg:HH};const I3=mt,XH=ut,WH=(e,t)=>{if(t.vertices.length<4)return null;const n=[],r=t.vertices.filter((i,a)=>i[2]>0?(n.push(a),!0):!1);if(r.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const o=r.map(i=>{const a=Math.round(i[0]/e)*e+0,l=Math.round(i[1]/e)*e+0;return I3.fromValues(a,l)});if(I3.equals(o[0],o[1]))return null;const s=n[1]-n[0];if(s===1||s===3)s===1&&o.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return o},YH=(e,t)=>{const n=t.map(r=>WH(e,r)).filter(r=>r!==null);return XH.create(n)};var Yv=YH;const Ho=qe,qH=ut,ZH=ft,QH=gt,KH=(e,t,n)=>{const r=[Ho.fromVec2(Ho.create(),n[0],e),Ho.fromVec2(Ho.create(),n[1],e),Ho.fromVec2(Ho.create(),n[1],t),Ho.fromVec2(Ho.create(),n[0],t)];return QH.create(r)},JH=(e,t)=>{const r=qH.toSides(t).map(s=>KH(e.z0,e.z1,s));return ZH.create(r)};var qv=JH;const z3=Ct,eX=mt,an=qe,ai=function(e,t){arguments.length<2&&(t=an.orthogonal(an.create(),e)),this.v=an.normalize(an.create(),an.cross(an.create(),e,t)),this.u=an.cross(an.create(),this.v,e),this.plane=e,this.planeorigin=an.scale(an.create(),e,e[3])};ai.GetCartesian=function(e,t){const n=e+"/"+t;let r,o;if(n==="X/Y")r=[0,0,1],o=[1,0,0];else if(n==="Y/-X")r=[0,0,1],o=[0,1,0];else if(n==="-X/-Y")r=[0,0,1],o=[-1,0,0];else if(n==="-Y/X")r=[0,0,1],o=[0,-1,0];else if(n==="-X/Y")r=[0,0,-1],o=[-1,0,0];else if(n==="-Y/-X")r=[0,0,-1],o=[0,-1,0];else if(n==="X/-Y")r=[0,0,-1],o=[1,0,0];else if(n==="Y/X")r=[0,0,-1],o=[0,1,0];else if(n==="X/Z")r=[0,-1,0],o=[1,0,0];else if(n==="Z/-X")r=[0,-1,0],o=[0,0,1];else if(n==="-X/-Z")r=[0,-1,0],o=[-1,0,0];else if(n==="-Z/X")r=[0,-1,0],o=[0,0,-1];else if(n==="-X/Z")r=[0,1,0],o=[-1,0,0];else if(n==="-Z/-X")r=[0,1,0],o=[0,0,-1];else if(n==="X/-Z")r=[0,1,0],o=[1,0,0];else if(n==="Z/X")r=[0,1,0],o=[0,0,1];else if(n==="Y/Z")r=[1,0,0],o=[0,1,0];else if(n==="Z/-Y")r=[1,0,0],o=[0,0,1];else if(n==="-Y/-Z")r=[1,0,0],o=[0,-1,0];else if(n==="-Z/Y")r=[1,0,0],o=[0,0,-1];else if(n==="-Y/Z")r=[-1,0,0],o=[0,-1,0];else if(n==="-Z/-Y")r=[-1,0,0],o=[0,0,-1];else if(n==="Y/-Z")r=[-1,0,0],o=[0,1,0];else if(n==="Z/Y")r=[-1,0,0],o=[0,0,1];else throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");return new ai(new Plane(new Vector3D(r),0),new Vector3D(o))};ai.Z0Plane=function(){const e=new Plane(new Vector3D([0,0,1]),0);return new ai(e,new Vector3D([1,0,0]))};ai.prototype={getProjectionMatrix:function(){return z3.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const e=an.scale(an.create(),this.plane,this.plane[3]);return z3.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,e[0],e[1],e[2],1)},to2D:function(e){return eX.fromValues(an.dot(e,this.u),an.dot(e,this.v))},to3D:function(e){const t=an.scale(an.create(),this.u,e[0]),n=an.scale(an.create(),this.v,e[1]),r=an.add(t,t,this.planeorigin);return an.add(n,n,r)},line3Dto2D:function(e){const t=e.point,n=e.direction.plus(t),r=this.to2D(t),o=this.to2D(n);return Line2D.fromPoints(r,o)},line2Dto3D:function(e){const t=e.origin(),n=e.direction().plus(t),r=this.to3D(t),o=this.to3D(n);return Line3D.fromPoints(r,o)},transform:function(e){const t=this.plane.transform(e),n=this.u.transform(e),r=new Vector3D(0,0,0).transform(e),o=n.minus(r);return new ai(t,o)}};var tX=ai;const{EPS:vo}=wt,Xo=Gv,Lr=mt,nX=tX,Vi=PS,{insertSorted:rX,fnNumberSort:oX}=f4,B3=gt,sX=e=>{if(e.length<2)return e;const t=[],n=e.length,r=B3.plane(e[0]),o=new nX(r),s=[],i=[],a=new Map,l=new Map,c=new Map,u=10/vo;for(let y=0;y<n;y++){const v=e[y];let x=[],m=v.vertices.length,g=-1;if(m>0){let w,E;for(let A=0;A<m;A++){let $=o.to2D(v.vertices[A]);const k=Math.floor($[1]*u);let N;c.has(k)?N=c.get(k):c.has(k+1)?N=c.get(k+1):c.has(k-1)?N=c.get(k-1):(N=$[1],c.set(k,$[1])),$=Lr.fromValues($[0],N),x.push($);const X=$[1];(A===0||X<w)&&(w=X,g=A),(A===0||X>E)&&(E=X);let j=l.get(X);j||(j={},l.set(X,j)),j[y]=!0}if(w>=E)x=[],m=0,g=-1;else{let A=a.get(w);A||(A=[],a.set(w,A)),A.push(y)}}x.reverse(),g=m-g-1,s.push(x),i.push(g)}const f=[];l.forEach((y,v)=>f.push(v)),f.sort(oX);let d=[],p=[];for(let y=0;y<f.length;y++){const v=[],x=f[y],m=l.get(x);for(let w=0;w<d.length;++w){const E=d[w],A=E.polygonindex;if(m[A]){const $=s[A],k=$.length;let N=E.leftvertexindex,X=E.rightvertexindex;for(;;){let J=N+1;if(J>=k&&(J=0),$[J][1]!==x)break;N=J}let j=X-1;if(j<0&&(j=k-1),$[j][1]===x&&(X=j),N!==E.leftvertexindex&&N===X)d.splice(w,1),--w;else{E.leftvertexindex=N,E.rightvertexindex=X,E.topleft=$[N],E.topright=$[X];let J=N+1;J>=k&&(J=0),E.bottomleft=$[J];let le=X-1;le<0&&(le=k-1),E.bottomright=$[le]}}}let g;if(y>=f.length-1)d=[],g=null;else{g=Number(f[y+1]);const w=.5*(x+g),E=a.get(x);for(const A in E){const $=E[A],k=s[$],N=k.length,X=i[$];let j=X;for(;;){let Me=j+1;if(Me>=N&&(Me=0),k[Me][1]!==x||Me===X)break;j=Me}let J=X;for(;;){let Me=J-1;if(Me<0&&(Me=N-1),k[Me][1]!==x||Me===j)break;J=Me}let le=j+1;le>=N&&(le=0);let _e=J-1;_e<0&&(_e=N-1);const Z={polygonindex:$,leftvertexindex:j,rightvertexindex:J,topleft:k[j],topright:k[J],bottomleft:k[le],bottomright:k[_e]};rX(d,Z,(Me,we)=>{const Je=Vi(Me.topleft,Me.bottomleft,w),ye=Vi(we.topleft,we.bottomleft,w);return Je>ye?1:Je<ye?-1:0})}}for(const w in d){const E=d[w];let A=Vi(E.topleft,E.bottomleft,x);const $=Lr.fromValues(A,x);A=Vi(E.topright,E.bottomright,x);const k=Lr.fromValues(A,x);A=Vi(E.topleft,E.bottomleft,g);const N=Lr.fromValues(A,g);A=Vi(E.topright,E.bottomright,g);const X=Lr.fromValues(A,g),j={topleft:$,topright:k,bottomleft:N,bottomright:X,leftline:Xo.fromPoints(Xo.create(),$,N),rightline:Xo.fromPoints(Xo.create(),X,k)};if(v.length>0){const J=v[v.length-1],le=Lr.distance(j.topleft,J.topright),_e=Lr.distance(j.bottomleft,J.bottomright);le<vo&&_e<vo&&(j.topleft=J.topleft,j.leftline=J.leftline,j.bottomleft=J.bottomleft,v.splice(v.length-1,1))}v.push(j)}if(y>0){const w=new Set,E=new Set;for(let A=0;A<v.length;A++){const $=v[A];for(let k=0;k<p.length;k++)if(!E.has(k)){const N=p[k];if(Lr.distance(N.bottomleft,$.topleft)<vo&&Lr.distance(N.bottomright,$.topright)<vo){E.add(k);const X=Xo.direction($.leftline),j=Xo.direction(N.leftline),J=X[0]-j[0],le=Xo.direction($.rightline),_e=Xo.direction(N.rightline),Z=le[0]-_e[0],Me=Math.abs(J)<vo,we=Math.abs(Z)<vo,Je=Me||J>=0,ye=we||Z>=0;Je&&ye&&($.outpolygon=N.outpolygon,$.leftlinecontinues=Me,$.rightlinecontinues=we,w.add(k));break}}}for(let A=0;A<p.length;A++)if(!w.has(A)){const $=p[A];$.outpolygon.rightpoints.push($.bottomright),Lr.distance($.bottomright,$.bottomleft)>vo&&$.outpolygon.leftpoints.push($.bottomleft),$.outpolygon.leftpoints.reverse();const N=$.outpolygon.rightpoints.concat($.outpolygon.leftpoints).map(j=>o.to3D(j)),X=B3.fromPointsAndPlane(N,r);X.vertices.length&&t.push(X)}}for(let w=0;w<v.length;w++){const E=v[w];E.outpolygon?(E.leftlinecontinues||E.outpolygon.leftpoints.push(E.topleft),E.rightlinecontinues||E.outpolygon.rightpoints.push(E.topright)):(E.outpolygon={leftpoints:[],rightpoints:[]},E.outpolygon.leftpoints.push(E.topleft),Lr.distance(E.topleft,E.topright)>vo&&E.outpolygon.rightpoints.push(E.topright))}p=v}return t};var iX=sX;const G3=ft,aX=gt,{NEPS:lX}=wt,cX=iX,uX=e=>{if(e.isRetesselated)return e;const t=G3.toPolygons(e).map((s,i)=>({vertices:s.vertices,plane:aX.plane(s),index:i})),n=fX(t),r=[];n.forEach(s=>{if(Array.isArray(s)){const i=cX(s);r.push(...i)}else r.push(s)});const o=G3.create(r);return o.isRetesselated=!0,o},fX=e=>{let t=[e];const n=[];for(let o=3;o>=0;o--){const s=[],i=o===3?15e-9:lX;t.forEach(a=>{a.sort(dX(o,i));let l=0;for(let c=1;c<a.length;c++)a[c].plane[o]-a[l].plane[o]>i&&(c-l===1?n.push(a[l]):s.push(a.slice(l,c)),l=c);a.length-l===1?n.push(a[l]):s.push(a.slice(l))}),t=s}const r=[];return t.forEach(o=>{o[0]&&(r[o[0].index]=o)}),n.forEach(o=>{r[o.index]=o}),r},dX=(e,t)=>(n,r)=>n.plane[e]-r.plane[e]>t?1:r.plane[e]-n.plane[e]>t?-1:0;var Dc=uX;const{EPS:ji}=wt,V3=hi,hX=(e,t)=>{if(e.polygons.length===0||t.polygons.length===0)return!1;const n=V3(e),r=n[0],o=n[1],s=V3(t),i=s[0],a=s[1];return!(i[0]-o[0]>ji||r[0]-a[0]>ji||i[1]-o[1]>ji||r[1]-a[1]>ji||i[2]-o[2]>ji||r[2]-a[2]>ji)};var Zv=hX;const j3=lo,pX=gt;let mX=class cm{constructor(t){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=t}invert(){const t=[this];let n;for(let r=0;r<t.length;r++){n=t[r],n.plane&&(n.plane=j3.flip(j3.create(),n.plane)),n.front&&t.push(n.front),n.back&&t.push(n.back);const o=n.front;n.front=n.back,n.back=o}}clipPolygons(t,n){let r={node:this,polygontreenodes:t},o;const s=[];do{if(o=r.node,t=r.polygontreenodes,o.plane){const i=o.plane,a=[],l=[],c=n?a:l,u=t.length;for(let d=0;d<u;d++){const p=t[d];p.isRemoved()||p.splitByPlane(i,c,a,l,a)}o.front&&l.length>0&&s.push({node:o.front,polygontreenodes:l});const f=a.length;if(o.back&&f>0)s.push({node:o.back,polygontreenodes:a});else for(let d=0;d<f;d++)a[d].remove()}r=s.pop()}while(r!==void 0)}clipTo(t,n){let r=this;const o=[];do r.polygontreenodes.length>0&&t.rootnode.clipPolygons(r.polygontreenodes,n),r.front&&o.push(r.front),r.back&&o.push(r.back),r=o.pop();while(r!==void 0)}addPolygonTreeNodes(t){let n={node:this,polygontreenodes:t};const r=[];do{const o=n.node,s=n.polygontreenodes;if(s.length===0){n=r.pop();continue}if(!o.plane){let c=0;c=Math.floor(s.length/2);const u=s[c].getPolygon();o.plane=pX.plane(u)}const i=[],a=[],l=s.length;for(let c=0;c<l;++c)s[c].splitByPlane(o.plane,o.polygontreenodes,a,i,a);i.length>0&&(o.front||(o.front=new cm(o)),l===i.length&&a.length===0?o.front.polygontreenodes=i:r.push({node:o.front,polygontreenodes:i})),a.length>0&&(o.back||(o.back=new cm(o)),l===a.length&&i.length===0?o.back.polygontreenodes=a:r.push({node:o.back,polygontreenodes:a})),n=r.pop()}while(n!==void 0)}};var vX=mX;const Ui=qe,gX=(e,t,n)=>{const r=Ui.subtract(Ui.create(),n,t);let o=(e[3]-Ui.dot(e,t))/Ui.dot(e,r);return Number.isNaN(o)&&(o=0),o>1&&(o=1),o<0&&(o=0),Ui.scale(r,r,o),Ui.add(r,t,r),r};var yX=gX;const{EPS:af}=wt,wX=lo,lf=qe,Sh=gt,xX=yX,EX=(e,t)=>{const n={type:null,front:null,back:null},r=t.vertices,o=r.length,s=Sh.plane(t);if(wX.equals(s,e))n.type=0;else{let i=!1,a=!1;const l=[],c=-af;for(let u=0;u<o;u++){const f=lf.dot(e,r[u])-e[3],d=f<c;l.push(d),f>af&&(i=!0),f<c&&(a=!0)}if(!i&&!a){const u=lf.dot(e,s);n.type=u>=0?0:1}else if(!a)n.type=2;else if(!i)n.type=3;else{n.type=4;const u=[],f=[];let d=l[0];for(let y=0;y<o;y++){const v=r[y];let x=y+1;x>=o&&(x=0);const m=l[x];if(d===m)d?f.push(v):u.push(v);else{const g=r[x],w=xX(e,v,g);d?(f.push(v),f.push(w),u.push(w)):(u.push(v),u.push(w),f.push(w))}d=m}const p=af*af;if(f.length>=3){let y=f[f.length-1];for(let v=0;v<f.length;v++){const x=f[v];lf.squaredDistance(x,y)<p&&(f.splice(v,1),v--),y=x}}if(u.length>=3){let y=u[u.length-1];for(let v=0;v<u.length;v++){const x=u[v];lf.squaredDistance(x,y)<p&&(u.splice(v,1),v--),y=x}}u.length>=3&&(n.front=Sh.fromPointsAndPlane(u,s)),f.length>=3&&(n.back=Sh.fromPointsAndPlane(f,s))}}return n};var _X=EX;const{EPS:$X}=wt,SX=qe,U3=gt,AX=_X;let bX=class d4{constructor(t,n){this.parent=t,this.children=[],this.polygon=n,this.removed=!1}addPolygons(t){if(!this.isRootNode())throw new Error("Assertion failed");const n=this;t.forEach(r=>{n.addChild(r)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const t=this.parent.children,n=t.indexOf(this);if(n<0)throw new Error("Assertion failed");t.splice(n,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(t){let n=[this];const r=[n];let o,s,i,a;for(o=0;o<r.length;++o)for(n=r[o],s=0,i=n.length;s<i;s++)a=n[s],a.polygon?t.push(a.polygon):a.children.length>0&&r.push(a.children)}splitByPlane(t,n,r,o,s){if(this.children.length){const i=[this.children];let a,l,c,u,f;for(a=0;a<i.length;a++)for(f=i[a],l=0,c=f.length;l<c;l++)u=f[l],u.children.length>0?i.push(u.children):u._splitByPlane(t,n,r,o,s)}else this._splitByPlane(t,n,r,o,s)}_splitByPlane(t,n,r,o,s){const i=this.polygon;if(i){const a=U3.measureBoundingSphere(i),l=a[3]+$X,c=a,u=SX.dot(t,c)-t[3];if(u>l)o.push(this);else if(u<-l)s.push(this);else{const f=AX(t,i);switch(f.type){case 0:n.push(this);break;case 1:r.push(this);break;case 2:o.push(this);break;case 3:s.push(this);break;case 4:if(f.front){const d=this.addChild(f.front);o.push(d)}if(f.back){const d=this.addChild(f.back);s.push(d)}break}}}}addChild(t){const n=new d4(this,t);return this.children.push(n),n}invertSub(){let t=[this];const n=[t];let r,o,s,i;for(r=0;r<n.length;r++)for(t=n[r],o=0,s=t.length;o<s;o++)i=t[o],i.polygon&&(i.polygon=U3.invert(i.polygon)),i.children.length>0&&n.push(i.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let t=[this];const n=[t];for(let r=0;r<n.length;++r){t=n[r];const o=t.length;for(let s=0;s<o;s++){const i=t[s];i.polygon&&(i.polygon=null),i.parent&&(i.parent=null),i.children.length>0&&n.push(i.children),i.children=[]}}}toString(){let t="",n=[this];const r=[n];let o,s,i,a;for(o=0;o<r.length;++o){n=r[o];const l=" ".repeat(o);for(s=0,i=n.length;s<i;s++)a=n[s],t+=`${l}PolygonTreeNode (${a.isRootNode()}): ${a.children.length}`,a.polygon?t+=`
 ${l}polygon: ${a.polygon.vertices}
`:t+=`
`,a.children.length>0&&r.push(a.children)}return t}};var TX=bX;const PX=vX,CX=TX;let kX=class{constructor(t){this.polygonTree=new CX,this.rootnode=new PX(null),t&&this.addPolygons(t)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(t,n=!1){this.rootnode.clipTo(t,n)}allPolygons(){const t=[];return this.polygonTree.getPolygons(t),t}addPolygons(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=this.polygonTree.addChild(t[r]);this.rootnode.addPolygonTreeNodes(n)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};var MX=kX,Qv={Tree:MX};const cf=ft,NX=Zv,{Tree:H3}=Qv,RX=(e,t)=>{if(!NX(e,t))return cf.create();const n=new H3(cf.toPolygons(e)),r=new H3(cf.toPolygons(t));n.invert(),r.clipTo(n),r.invert(),n.clipTo(r),r.clipTo(n),n.addPolygons(r.allPolygons()),n.invert();const o=n.allPolygons();return cf.create(o)};var OX=RX;const LX=lt,FX=Dc,DX=OX,IX=(...e)=>{e=LX(e);let t=e.shift();return e.forEach(n=>{t=DX(t,n)}),t=FX(t),t};var h4=IX;const zX=lt,BX=ft,GX=Es,VX=Yv,jX=qv,UX=h4,HX=(...e)=>{e=zX(e);const t=e.map(o=>jX({z0:-1,z1:1},o)),n=UX(t),r=GX(n);return VX(r,BX.toPolygons(n))};var XX=HX;const WX=lt,YX=Fc,qX=ut,ZX=ft,QX=XX,KX=h4,JX=(...e)=>{if(e=WX(e),e.length===0)throw new Error("wrong number of arguments");if(!YX(e))throw new Error("only intersect of the types are supported");const t=e[0];return qX.isA(t)?QX(e):ZX.isA(t)?KX(e):t};var eW=JX;const Ah=qe,tW=Es,X3=ft,nW=e=>e.sort((t,n)=>t-n).filter((t,n,r)=>!n||t!==r[n-1]),rW=(e,t,n)=>{const r=`${t}`,o=e.get(r);o===void 0?e.set(r,[n]):o.push(n)},oW=(e,t)=>{const n=`${t}`;return e.get(n)},sW=e=>{const t=tW(e),n=X3.toPolygons(e),r=n.length,o=new Map,s=Ah.create();n.forEach((u,f)=>{u.vertices.forEach(d=>{rW(o,Ah.snap(s,d,t),f)})});const i=n.map(u=>{let f=[];return u.vertices.forEach(d=>{f=f.concat(oW(o,Ah.snap(s,d,t)))}),{e:1,d:nW(f)}});o.clear();let a=0;const l=i.length;for(let u=0;u<l;u++){const f=i[u];if(f.e>0){const d=new Array(r);d[u]=!0;do a=0,d.forEach((p,y)=>{const v=i[y];if(v.e>0){v.e=-1;for(let x=0;x<v.d.length;x++)d[v.d[x]]=!0;a++}});while(a>0);f.indexes=d}}const c=[];for(let u=0;u<l;u++)if(i[u].indexes){const f=[];i[u].indexes.forEach((d,p)=>f.push(n[p])),c.push(X3.create(f))}return c};var iW=sW;const aW=lt,lW=ft,cW=iW,uW=(...e)=>{if(e=aW(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>lW.isA(n)?cW(n):n);return t.length===1?t[0]:t};var fW=uW;const uf=ft,dW=Zv,{Tree:W3}=Qv,hW=(e,t)=>{if(!dW(e,t))return uf.clone(e);const n=new W3(uf.toPolygons(e)),r=new W3(uf.toPolygons(t));n.invert(),n.clipTo(r),r.clipTo(n,!0),n.addPolygons(r.allPolygons()),n.invert();const o=n.allPolygons();return uf.create(o)};var pW=hW;const mW=lt,vW=Dc,gW=pW,yW=(...e)=>{e=mW(e);let t=e.shift();return e.forEach(n=>{t=gW(t,n)}),t=vW(t),t};var p4=yW;const wW=lt,xW=ft,EW=Es,_W=Yv,$W=qv,SW=p4,AW=(...e)=>{e=wW(e);const t=e.map(o=>$W({z0:-1,z1:1},o)),n=SW(t),r=EW(n);return _W(r,xW.toPolygons(n))};var bW=AW;const TW=lt,PW=Fc,CW=ut,kW=ft,MW=bW,NW=p4,RW=(...e)=>{if(e=TW(e),e.length===0)throw new Error("wrong number of arguments");if(!PW(e))throw new Error("only subtract of the types are supported");const t=e[0];return CW.isA(t)?MW(e):kW.isA(t)?NW(e):t};var OW=RW;const ma=ft,LW=Zv,{Tree:Y3}=Qv,FW=(e,t)=>{if(!LW(e,t))return DW(e,t);const n=new Y3(ma.toPolygons(e)),r=new Y3(ma.toPolygons(t));n.clipTo(r,!1),r.clipTo(n),r.invert(),r.clipTo(n),r.invert();const o=n.allPolygons().concat(r.allPolygons());return ma.create(o)},DW=(e,t)=>{let n=ma.toPolygons(e);return n=n.concat(ma.toPolygons(t)),ma.create(n)};var m4=FW;const IW=lt,zW=Dc,BW=m4,GW=(...e)=>{e=IW(e);let t;for(t=1;t<e.length;t+=2)e.push(BW(e[t-1],e[t]));let n=e[t-1];return n=zW(n),n};var v4=GW;const VW=lt,jW=ft,UW=Es,HW=Yv,XW=qv,WW=v4,YW=(...e)=>{e=VW(e);const t=e.map(o=>XW({z0:-1,z1:1},o)),n=WW(t),r=UW(n);return HW(r,jW.toPolygons(n))};var g4=YW;const qW=lt,ZW=Fc,QW=ut,KW=ft,JW=g4,eY=v4,tY=(...e)=>{if(e=qW(e),e.length===0)throw new Error("wrong number of arguments");if(!ZW(e))throw new Error("only unions of the same type are supported");const t=e[0];return QW.isA(t)?JW(e):KW.isA(t)?eY(e):t};var Kv=tY,nY={intersect:eW,scission:fW,subtract:OW,union:Kv};const{EPS:rY,TAU:oY}=wt,q3=CS,Ml=Gv,Ut=mt,sY=i1,iY=(e,t)=>{const n={delta:1,corners:"edge",closed:!1,segments:16};let{delta:r,corners:o,closed:s,segments:i}=Object.assign({},n,e);if(Math.abs(r)<rY)return t;let a=e.closed?sY(t):1;a===0&&(a=1);const l=a>0&&r>=0||a<0&&r<0;r=Math.abs(r);let c=null,u=[];const f=[],d=Ut.create(),p=t.length;for(let y=0;y<p;y++){const v=(y+1)%p,x=t[y],m=t[v];l?Ut.subtract(d,x,m):Ut.subtract(d,m,x),Ut.normal(d,d),Ut.normalize(d,d),Ut.scale(d,d,r);const g=Ut.add(Ut.create(),x,d),w=Ut.add(Ut.create(),m,d),E=[g,w];if(c!=null&&(s||!s&&v!==0)){const A=q3(c[0],c[1],E[0],E[1]);A?(u.pop(),E[0]=A):f.push({c:x,s0:c,s1:E})}c=[g,w],!(v===0&&!s)&&(u.push(E[0]),u.push(E[1]))}if(s&&c!=null){const y=u[0],v=u[1],x=q3(c[0],c[1],y,v);if(x)u[0]=x,u.pop();else{const m=t[0],g=[y,v];f.push({c:m,s0:c,s1:g})}}if(o==="edge"){const y=new Map;u.forEach((m,g)=>y.set(m,g));const v=Ml.create(),x=Ml.create();f.forEach(m=>{Ml.fromPoints(v,m.s0[0],m.s0[1]),Ml.fromPoints(x,m.s1[0],m.s1[1]);const g=Ml.intersectPointOfLines(v,x);if(Number.isFinite(g[0])&&Number.isFinite(g[1])){const w=m.s0[1],E=y.get(w);u[E]=g,u[(E+1)%u.length]=void 0}else{const w=m.s1[0],E=y.get(w);u[E]=void 0}}),u=u.filter(m=>m!==void 0)}if(o==="round"){let y=Math.floor(i/4);const v=Ut.create();f.forEach(x=>{let m=Ut.angle(Ut.subtract(v,x.s1[0],x.c));if(m-=Ut.angle(Ut.subtract(v,x.s0[1],x.c)),l&&m<0&&(m=m+Math.PI,m<0&&(m=m+Math.PI)),!l&&m>0&&(m=m-Math.PI,m>0&&(m=m-Math.PI)),m!==0){y=Math.floor(i*(Math.abs(m)/oY));const g=m/y,w=Ut.angle(Ut.subtract(v,x.s0[1],x.c)),E=[];for(let A=1;A<y;A++){const $=w+g*A,k=Ut.fromAngleRadians(Ut.create(),$);Ut.scale(k,k,r),Ut.add(k,k,x.c),E.push(k)}if(E.length>0){const A=x.s0[1];let $=u.findIndex(k=>Ut.equals(A,k));$=($+1)%u.length,u.splice($,0,...E)}}else{const g=x.s1[0],w=u.findIndex(E=>Ut.equals(g,E));u.splice(w,1)}})}return u};var h1=iY;const ff=ut,aY=h1,lY=(e,t)=>{const n={delta:1,corners:"edge",segments:16},{delta:r,corners:o,segments:s}=Object.assign({},n,e);if(!(o==="edge"||o==="chamfer"||o==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const l=ff.toOutlines(t).map(c=>(e={delta:r,corners:o,closed:!0,segments:s},aY(e,c))).reduce((c,u)=>c.concat(ff.toSides(ff.fromPoints(u))),[]);return ff.create(l)};var cY=lY;const Z3=Ct,uY=qe,fY=ft,Nl=gt,dY=(e,t)=>{uY.dot(Nl.plane(t),e)>0&&(t=Nl.invert(t));const r=[t],o=Nl.transform(Z3.fromTranslation(Z3.create(),e),t),s=t.vertices.length;for(let i=0;i<s;i++){const a=i<s-1?i+1:0,l=Nl.create([t.vertices[i],o.vertices[i],o.vertices[a],t.vertices[a]]);r.push(l)}return r.push(Nl.invert(o)),fY.create(r)};var hY=dY;const{EPS:pY,TAU:bh}=wt,Q3=Ct,kt=qe,mY=u4,Th=ft,Us=gt,vY=JS,gY=Dc,Ph=m4,yY=hY,wY=(e,t,n)=>{const r=t.toString();if(e.has(r))e.get(r)[1].push(n);else{const o=[t,[n]];e.set(r,o)}},xY=(e,t,n)=>{const r=t[0].toString(),o=t[1].toString(),s=r<o?`${r},${o}`:`${o},${r}`;if(e.has(s))e.get(s)[1].push(n);else{const i=[t,[n]];e.set(s,i)}},Ch=(e,t)=>{e.findIndex(r=>r===t)<0&&e.push(t)},EY=(e,t)=>{const n={delta:1,segments:12},{delta:r,segments:o}=Object.assign({},n,e);let s=Th.create();const i=new Map,a=new Map,l=kt.create(),c=kt.create();return Th.toPolygons(t).forEach((f,d)=>{const p=kt.scale(kt.create(),Us.plane(f),2*r),y=Us.transform(Q3.fromTranslation(Q3.create(),kt.scale(kt.create(),p,-.5)),f),v=yY(p,y);s=Ph(s,v);const x=f.vertices;for(let m=0;m<x.length;m++){wY(i,x[m],Us.plane(f));const g=(m+1)%x.length,w=[x[m],x[g]];xY(a,w,Us.plane(f))}}),a.forEach(f=>{const d=f[0],p=f[1],y=d[0],v=d[1],x=kt.subtract(kt.create(),v,y);kt.normalize(x,x);const m=p[0],g=kt.cross(kt.create(),m,x);let w=[];for(let J=0;J<o;J++)Ch(w,J*bh/o);for(let J=0,le=p.length;J<le;J++){const _e=p[J],Z=kt.dot(g,_e),Me=kt.dot(m,_e);let we=Math.atan2(Z,Me);we<0&&(we+=bh),Ch(w,we),we=Math.atan2(-Z,-Me),we<0&&(we+=bh),Ch(w,we)}w=w.sort(mY);const E=w.length;let A,$;const k=[],N=[],X=[];for(let J=-1;J<E;J++){const le=w[J<0?J+E:J],_e=Math.sin(le),Z=Math.cos(le);kt.scale(l,m,Z*r),kt.scale(c,g,_e*r),kt.add(l,l,c);const Me=kt.add(kt.create(),y,l),we=kt.add(kt.create(),v,l);let Je=!1;if(J>=0&&kt.distance(Me,A)<pY&&(Je=!0),!Je){if(J>=0){k.push(Me),N.push(we);const ye=[$,we,Me,A],Ge=Us.create(ye);X.push(Ge)}A=Me,$=we}}N.reverse(),X.push(Us.create(k)),X.push(Us.create(N));const j=Th.create(X);s=Ph(s,j)}),i.forEach(f=>{const d=f[0],p=f[1],y=p[0];let v=null,x=0;for(let E=1;E<p.length;E++){const A=p[E],$=kt.cross(l,y,A),k=kt.length($);k>.05&&k>x&&(x=k,v=A)}v||(v=kt.orthogonal(l,y));const m=kt.cross(l,y,v);kt.normalize(m,m);const g=kt.cross(c,m,y),w=vY({center:[d[0],d[1],d[2]],radius:r,segments:o,axes:[y,m,g]});s=Ph(s,w)}),gY(s)};var _Y=EY;const $Y=ft,SY=Kv,AY=_Y,bY=(e,t)=>{const n={delta:1,corners:"round",segments:12},{delta:r,corners:o,segments:s}=Object.assign({},n,e);if(o!=="round")throw new Error('corners must be "round" for 3D geometries');if($Y.toPolygons(t).length===0)throw new Error("the given geometry cannot be empty");e={delta:r,corners:o,segments:s};const a=AY(e,t);return SY(t,a)};var TY=bY;const PY=i1,Yn=mt,Wi=ut,jl=bt,K3=h1,CY=e=>{let{external:t,internal:n}=e;PY(t)<0?t=t.reverse():n=n.reverse();const r=jl.fromPoints({closed:!0},t),o=jl.fromPoints({closed:!0},n),s=Wi.toSides(Wi.fromPoints(jl.toPoints(r))),i=Wi.toSides(Wi.fromPoints(jl.toPoints(o)));return s.push(...i),Wi.create(s)},kY=(e,t,n,r)=>{const{points:o,external:s,internal:i}=e,a=Math.floor(t/2),l=[],c=[];if(n==="round"&&a>0){const f=Math.PI/a,d=o[o.length-1],p=Yn.angle(Yn.subtract(Yn.create(),s[s.length-1],d)),y=o[0],v=Yn.angle(Yn.subtract(Yn.create(),i[0],y));for(let x=1;x<a;x++){let m=p+f*x,g=Yn.fromAngleRadians(Yn.create(),m);Yn.scale(g,g,r),Yn.add(g,g,d),l.push(g),m=v+f*x,g=Yn.fromAngleRadians(Yn.create(),m),Yn.scale(g,g,r),Yn.add(g,g,y),c.push(g)}}const u=[];return u.push(...s,...l,...i.reverse(),...c),Wi.fromPoints(u)},MY=(e,t)=>{e=Object.assign({},{delta:1,corners:"edge",segments:16},e);const{delta:r,corners:o,segments:s}=e;if(r<=0)throw new Error("the given delta must be positive for paths");if(!(o==="edge"||o==="chamfer"||o==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const i=t.isClosed,a=jl.toPoints(t);if(a.length===0)throw new Error("the given geometry cannot be empty");const l={points:a,external:K3({delta:r,corners:o,segments:s,closed:i},a),internal:K3({delta:-r,corners:o,segments:s,closed:i},a)};return t.isClosed?CY(l):kY(l,s,o,r)};var NY=MY;const RY=lt,OY=ut,LY=ft,FY=bt,DY=cY,IY=TY,zY=NY,BY=(e,...t)=>{if(t=RY(t),t.length===0)throw new Error("wrong number of arguments");const n=t.map(r=>FY.isA(r)?zY(e,r):OY.isA(r)?DY(e,r):LY.isA(r)?IY(e,r):r);return n.length===1?n[0]:n};var Jv=BY;const df=ut,J3=Fv,GY=h1,VY=(e,t)=>{const n={delta:1,corners:"edge",segments:0},{delta:r,corners:o,segments:s}=Object.assign({},n,e);if(!(o==="edge"||o==="chamfer"||o==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const i=df.toOutlines(t),l=i.map(c=>(e={delta:i.reduce((d,p)=>d+J3.arePointsInside(c,J3.create(p)),0)%2===0?r:-r,corners:o,closed:!0,segments:s},GY(e,c))).reduce((c,u)=>c.concat(df.toSides(df.fromPoints(u))),[]);return df.create(l)};var jY=VY;const ex=bt,UY=h1,HY=(e,t)=>{const n={delta:1,corners:"edge",closed:t.isClosed,segments:16},{delta:r,corners:o,closed:s,segments:i}=Object.assign({},n,e);if(!(o==="edge"||o==="chamfer"||o==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');e={delta:r,corners:o,closed:s,segments:i};const a=UY(e,ex.toPoints(t));return ex.fromPoints({closed:s},a)};var XY=HY;const WY=lt,YY=ut,qY=bt,ZY=jY,QY=XY,KY=(e,...t)=>{if(t=WY(t),t.length===0)throw new Error("wrong number of arguments");const n=t.map(r=>qY.isA(r)?QY(e,r):YY.isA(r)?ZY(e,r):r);return n.length===1?n[0]:n};var JY=KY,eq={expand:Jv,offset:JY};const Rl=Ct,kh=qe,tq=ut,Mh=La,nq=u1,rq=(e,t)=>{const n={offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0};let{offset:r,twistAngle:o,twistSteps:s,repair:i}=Object.assign({},n,e);if(s<1)throw new Error("twistSteps must be 1 or more");o===0&&(s=1);const a=kh.clone(r),l=tq.toSides(t);if(l.length===0)throw new Error("the given geometry cannot be empty");const c=Mh.fromSides(l);a[2]<0&&Mh.reverse(c,c);const u=Rl.create(),f=(d,p,y)=>{const v=p/s*o,x=kh.scale(kh.create(),a,p/s);return Rl.multiply(u,Rl.fromZRotation(u,v),Rl.fromTranslation(Rl.create(),x)),Mh.transform(u,y)};return e={numberOfSlices:s+1,capStart:!0,capEnd:!0,repair:i,callback:f},nq(e,c)};var p1=rq;const oq=ut,sq=bt,iq=p1,aq=(e,t)=>{if(!t.isClosed)throw new Error("extruded path must be closed");const n=sq.toPoints(t),r=oq.fromPoints(n);return iq(e,r)};var lq=aq;const cq=lt,uq=ut,fq=bt,dq=p1,hq=lq,pq=(e,...t)=>{const n={height:1,twistAngle:0,twistSteps:1,repair:!0},{height:r,twistAngle:o,twistSteps:s,repair:i}=Object.assign({},n,e);if(t=cq(t),t.length===0)throw new Error("wrong number of arguments");e={offset:[0,0,r],twistAngle:o,twistSteps:s,repair:i};const a=t.map(l=>fq.isA(l)?hq(e,l):uq.isA(l)?dq(e,l):l);return a.length===1?a[0]:a};var mq=pq;const vq=bt,gq=Jv,yq=p1,wq=(e,t)=>{const n={size:1,height:1},{size:r,height:o}=Object.assign({},n,e);if(e.delta=r,e.offset=[0,0,o],vq.toPoints(t).length===0)throw new Error("the given geometry cannot be empty");const i=gq(e,t);return yq(e,i)};var xq=wq;const{area:Eq}=Oc,Nh=ut,_q=bt,$q=Jv,Sq=p1,Aq=(e,t)=>{const n={size:1,height:1},{size:r,height:o}=Object.assign({},n,e);e.delta=r,e.offset=[0,0,o];const s=Nh.toOutlines(t);if(s.length===0)throw new Error("the given geometry cannot be empty");const a=s.map(c=>(Eq(c)<0&&c.reverse(),$q(e,_q.fromPoints({closed:!0},c)))).reduce((c,u)=>c.concat(Nh.toSides(u)),[]),l=Nh.create(a);return Sq(e,l)};var bq=Aq;const Tq=lt,Pq=ut,Cq=bt,kq=xq,Mq=bq,Nq=(e,...t)=>{const n={size:1,height:1},{size:r,height:o}=Object.assign({},n,e);if(t=Tq(t),t.length===0)throw new Error("wrong number of arguments");if(r<=0)throw new Error("size must be positive");if(o<=0)throw new Error("height must be positive");const s=t.map(i=>Cq.isA(i)?kq(e,i):Pq.isA(i)?Mq(e,i):i);return s.length===1?s[0]:s};var Rq=Nq;const{TAU:Ol}=wt,Rh=La,Qr=Ct,Oq=u1,Lq=ut,Fq=(e,t)=>{const n={angle:Ol,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:r,endOffset:o,segmentsPerRotation:s,startAngle:i}=Object.assign({},n,e);let a;if(!e.pitch&&e.height?a=e.height/(r/Ol):a=e.pitch?e.pitch:n.pitch,s<3)throw new Error("The number of segments per rotation needs to be at least 3.");const c=Lq.toSides(t);if(c.length===0)throw new Error("the given geometry cannot be empty");const u=c.filter(m=>m[0][0]>=0);let f=Rh.fromSides(c);u.length===0&&(f=Rh.reverse(f));const d=Math.round(s/Ol*Math.abs(r)),p=d>=2?d:2,y=Qr.create();let v;const x=(m,g,w)=>{const E=i+r/p*g,A=o/p*g,$=(E-i)/Ol*a;return Qr.multiply(y,Qr.fromTranslation(Qr.create(),[A,0,$*Math.sign(r)]),Qr.fromXRotation(Qr.create(),-Ol/4*Math.sign(r))),v=Qr.create(),Qr.multiply(v,Qr.fromZRotation(Qr.create(),E),y),Rh.transform(v,w)};return Oq({numberOfSlices:p+1,callback:x},f)};var Dq=Fq;const Iq=lt,tx=Bv,Oh=lo,nx=Ct,rx=ut,y4=ft,Hi=gt,zq=Es,Bq=g4,Gq=(e,t)=>{const n=Oh.fromNormalAndPoint(Oh.create(),e.axis,e.origin);if(Number.isNaN(n[0])||Number.isNaN(n[1])||Number.isNaN(n[2])||Number.isNaN(n[3]))throw new Error("project: invalid axis or origin");const r=zq(t),o=r*r*Math.sqrt(3)/4;if(r===0)return rx.create();const s=y4.toPolygons(t);let i=[];for(let l=0;l<s.length;l++){const c=s[l].vertices.map(d=>Oh.projectionOfPoint(n,d)),u=Hi.create(c),f=Hi.plane(u);tx(n,f)&&(Hi.measureArea(u)<o||i.push(u))}if(!tx(n,[0,0,1])){const l=nx.fromVectorRotation(nx.create(),n,[0,0,1]);i=i.map(c=>Hi.transform(l,c))}i=i.sort((l,c)=>Hi.measureArea(c)-Hi.measureArea(l));const a=i.map(l=>rx.fromPoints(l.vertices));return Bq(a)},Vq=(e,...t)=>{const n={axis:[0,0,1],origin:[0,0,0]},{axis:r,origin:o}=Object.assign({},n,e);if(t=Iq(t),t.length===0)throw new Error("wrong number of arguments");e={axis:r,origin:o};const s=t.map(i=>y4.isA(i)?Gq(e,i):i);return s.length===1?s[0]:s};var jq=Vq,Uq={extrudeFromSlices:u1,extrudeLinear:mq,extrudeRectangular:Rq,extrudeRotate:a4,extrudeHelical:Dq,project:jq,slice:La};const ox=mt,Hq=e=>{let t=ox.fromValues(1/0,1/0);e.forEach(o=>{(o[1]<t[1]||o[1]===t[1]&&o[0]<t[0])&&(t=o)});const n=[];e.forEach(o=>{const s=Wq(o[1]-t[1],o[0]-t[0]),i=ox.squaredDistance(o,t);n.push({point:o,angle:s,distSq:i})}),n.sort((o,s)=>o.angle!==s.angle?o.angle-s.angle:o.distSq-s.distSq);const r=[];return n.forEach(o=>{let s=r.length;for(;s>1&&Xq(r[s-2],r[s-1],o.point)<=Number.EPSILON;)r.pop(),s=r.length;r.push(o.point)}),r},Xq=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0]),Wq=(e,t)=>e===0&&t===0?-1/0:-t/e;var w4=Hq;const sx=ut,ix=ft,ax=bt,Yq=e=>{const t=new Set,n=[],r=o=>{const s=o.toString();t.has(s)||(n.push(o),t.add(s))};return e.forEach(o=>{sx.isA(o)?sx.toPoints(o).forEach(r):ix.isA(o)?ix.toPoints(o).forEach(s=>s.forEach(r)):ax.isA(o)&&ax.toPoints(o).forEach(r)}),n};var eg=Yq;const qq=lt,Zq=bt,Qq=w4,Kq=eg,Jq=(...e)=>{e=qq(e);const t=Kq(e),n=Qq(t);return Zq.fromPoints({closed:!0},n)};var eZ=Jq;const tZ=lt,lx=ut,nZ=w4,rZ=eg,oZ=(...e)=>{e=tZ(e);const t=rZ(e),n=nZ(t);return n.length<3?lx.create():lx.fromPoints(n)};var sZ=oZ;const iZ=lt,aZ=ft,lZ=gt,cZ=Z$,uZ=eg,fZ=(...e)=>{if(e=iZ(e),e.length===1)return e[0];const t=uZ(e),r=cZ(t,{skipTriangulation:!0}).map(o=>{const s=o.map(i=>t[i]);return lZ.create(s)});return aZ.create(r)};var dZ=fZ;const hZ=lt,pZ=Fc,mZ=ut,vZ=ft,gZ=bt,yZ=eZ,wZ=sZ,xZ=dZ,EZ=(...e)=>{if(e=hZ(e),e.length===0)throw new Error("wrong number of arguments");if(!pZ(e))throw new Error("only hulls of the same type are supported");const t=e[0];return gZ.isA(t)?yZ(e):mZ.isA(t)?wZ(e):vZ.isA(t)?xZ(e):t};var x4=EZ;const _Z=lt,$Z=Kv,SZ=x4,AZ=(...e)=>{if(e=_Z(e),e.length<2)throw new Error("wrong number of arguments");const t=[];for(let n=1;n<e.length;n++)t.push(SZ(e[n-1],e[n]));return $Z(t)};var bZ=AZ,TZ={hull:x4,hullChain:bZ};const Lh=qe,E4=gt,PZ=(e,t)=>{const n=Math.abs(E4.measureArea(t));return Number.isFinite(n)&&n>e},CZ=(e,t)=>{let n=t.map(o=>{const s=o.vertices.map(l=>Lh.snap(Lh.create(),l,e)),i=[];for(let l=0;l<s.length;l++){const c=(l+1)%s.length;Lh.equals(s[l],s[c])||i.push(s[l])}const a=E4.create(i);return o.color&&(a.color=o.color),a});const r=e*e*Math.sqrt(3)/4;return n=n.filter(o=>PZ(r,o)),n};var _4=CZ;const kZ=Bv,la=qe,hd=gt,MZ=e=>{const t=hd.toPoints(e),n=[];for(let r=0;r<t.length;r++){const o=(r+1)%t.length,s={v1:t[r],v2:t[o]};n.push(s)}for(let r=0;r<n.length;r++){const o=(r+1)%t.length;n[r].next=n[o],n[o].prev=n[r]}return n},NZ=(e,t)=>{const n=`${t.v1}:${t.v2}`;e.set(n,t)},Fh=(e,t)=>{const n=`${t.v1}:${t.v2}`;e.delete(n)},RZ=(e,t)=>{const n=`${t.v2}:${t.v1}`;return e.get(n)},OZ=(e,t,n)=>{let r=e.prev.v1,o=e.prev.v2,s=t.next.v2;const i=cx(r,o,s,n);r=t.prev.v1,o=t.prev.v2,s=e.next.v2;const a=cx(r,o,s,n);return[i,a]},LZ=la.create(),FZ=la.create(),cx=(e,t,n,r)=>{const o=la.subtract(LZ,t,e),s=la.subtract(FZ,n,t);return la.cross(o,o,s),la.dot(o,r)},DZ=e=>{let t;const n=[];for(;e.next;){const r=e.next;n.push(e.v1),e.v1=null,e.v2=null,e.next=null,e.prev=null,e=r}return n.length>0&&(t=hd.create(n)),t},IZ=e=>{if(e.length<2)return e;const t=e[0].plane,n=e.slice(),r=new Map;for(;n.length>0;){const s=n.shift(),i=MZ(s);for(let a=0;a<i.length;a++){const l=i[a],c=RZ(r,l);if(c){const u=OZ(l,c,t);if(u[0]>=0&&u[1]>=0){const f=c.next,d=l.next;l.prev.next=c.next,l.next.prev=c.prev,c.prev.next=l.next,c.next.prev=l.prev,l.v1=null,l.v2=null,l.next=null,l.prev=null,Fh(r,c),c.v1=null,c.v2=null,c.next=null,c.prev=null;const p=(y,v,x)=>{const m={v1:x.v1,v2:v.v2,next:v.next,prev:x.prev};x.prev.next=m,v.next.prev=m,Fh(y,v),v.v1=null,v.v2=null,v.next=null,v.prev=null,Fh(y,x),x.v1=null,x.v2=null,x.next=null,x.prev=null};u[0]===0&&p(r,f,f.prev),u[1]===0&&p(r,d,d.prev)}}else l.next&&NZ(r,l)}}const o=[];return r.forEach(s=>{const i=DZ(s);i&&o.push(i)}),r.clear(),o},zZ=(e,t)=>Math.abs(e[3]-t[3])<15e-8?kZ(e,t):!1,BZ=(e,t)=>{const n=[];t.forEach(o=>{const s=n.find(i=>zZ(i[0],hd.plane(o)));s?s[1].push(o):n.push([hd.plane(o),[o]])});let r=[];return n.forEach(o=>{const s=o[1],i=IZ(s);r=r.concat(i)}),r};var GZ=BZ;const ux=wt,Kr=qe,VZ=gt,Bn=e=>`${e}`,fx=(e,t,n,r,o,s)=>{const i=Bn(r),a=Bn(o),l=`${i}/${a}`,c=`${a}/${i}`;if(e.has(c))return Mf(e,t,n,o,r,null),null;const u={vertex0:r,vertex1:o,polygonindex:s};return e.has(l)?e.get(l).push(u):e.set(l,[u]),t.has(i)?t.get(i).push(l):t.set(i,[l]),n.has(a)?n.get(a).push(l):n.set(a,[l]),l},Mf=(e,t,n,r,o,s)=>{const i=Bn(r),a=Bn(o),l=`${i}/${a}`;let c=-1;const u=e.get(l);for(let f=0;f<u.length;f++){const d=u[f];let p=Bn(d.vertex0);if(p===i&&(p=Bn(d.vertex1),p===a&&!(s!==null&&d.polygonindex!==s))){c=f;break}}u.splice(c,1),u.length===0&&e.delete(l),c=t.get(i).indexOf(l),t.get(i).splice(c,1),t.get(i).length===0&&t.delete(i),c=n.get(a).indexOf(l),n.get(a).splice(c,1),n.get(a).length===0&&n.delete(a)},jZ=e=>{const t=new Map;for(let n=0;n<e.length;n++){const r=e[n],o=r.vertices.length;if(o>=3){let s=r.vertices[0],i=Bn(s);for(let a=0;a<o;a++){let l=a+1;l===o&&(l=0);const c=r.vertices[l],u=Bn(c),f=`${i}/${u}`,d=`${u}/${i}`;if(t.has(d)){const p=t.get(d);p.splice(-1,1),p.length===0&&t.delete(d)}else{const p={vertex0:s,vertex1:c,polygonindex:n};t.has(f)?t.get(f).push(p):t.set(f,[p])}s=c,i=u}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(t.size>0){const n=new Map,r=new Map,o=new Map;for(const[i,a]of t)o.set(i,!0),a.forEach(l=>{const c=Bn(l.vertex0),u=Bn(l.vertex1);n.has(c)?n.get(c).push(i):n.set(c,[i]),r.has(u)?r.get(u).push(i):r.set(u,[i])});const s=e.slice(0);for(;t.size!==0;){for(const a of t.keys())o.set(a,!0);let i=!1;for(;;){const a=Array.from(o.keys());if(a.length===0)break;const l=a[0];let c=!0;if(t.has(l)){const f=t.get(l)[0];for(let d=0;d<2;d++){const p=d===0?f.vertex0:f.vertex1,y=d===0?f.vertex1:f.vertex0,v=Bn(p),x=Bn(y);let m=[];d===0?r.has(v)&&(m=r.get(v)):n.has(v)&&(m=n.get(v));for(let g=0;g<m.length;g++){const w=m[g],E=t.get(w)[0],A=d===0?E.vertex0:E.vertex1;if(d===0?E.vertex1:E.vertex0,Bn(A)===x){Mf(t,n,r,p,y,null),Mf(t,n,r,y,p,null),c=!1,d=2,i=!0;break}else{const k=p,N=y,X=A,j=Kr.subtract(Kr.create(),X,k),J=Kr.dot(Kr.subtract(Kr.create(),N,k),j)/Kr.dot(j,j);if(J>0&&J<1){const le=Kr.scale(Kr.create(),j,J);if(Kr.add(le,le,k),Kr.squaredDistance(le,N)<ux.EPS*ux.EPS){const Z=E.polygonindex,Me=s[Z],we=Bn(E.vertex1);let Je=-1;for(let st=0;st<Me.vertices.length;st++)if(Bn(Me.vertices[st])===we){Je=st;break}const ye=Me.vertices.slice(0);ye.splice(Je,0,y);const Ge=VZ.create(ye);s[Z]=Ge,Mf(t,n,r,E.vertex0,E.vertex1,Z);const De=fx(t,n,r,E.vertex0,y,Z),rt=fx(t,n,r,y,E.vertex1,Z);De!==null&&o.set(De,!0),rt!==null&&o.set(rt,!0),c=!1,d=2,i=!0;break}}}}}}c&&o.delete(l)}if(!i)break}e=s}return t.clear(),e};var UZ=jZ;const Dh=qe,Ih=gt,HZ=(e,t,n)=>{const r=t.vertices.length;if(r>3){if(r>4){const i=[0,0,0];t.vertices.forEach(a=>Dh.add(i,i,a)),Dh.snap(i,Dh.divide(i,i,[r,r,r]),e);for(let a=0;a<r;a++){const l=Ih.create([i,t.vertices[a],t.vertices[(a+1)%r]]);t.color&&(l.color=t.color),n.push(l)}return}const o=Ih.create([t.vertices[0],t.vertices[1],t.vertices[2]]),s=Ih.create([t.vertices[0],t.vertices[2],t.vertices[3]]);t.color&&(o.color=t.color,s.color=t.color),n.push(o,s);return}n.push(t)},XZ=(e,t)=>{const n=[];return t.forEach(r=>{HZ(e,r,n)}),n};var WZ=XZ;const YZ=lt,qZ=Es,ZZ=ut,$4=ft,QZ=bt,KZ=_4,JZ=GZ,eQ=UZ,tQ=WZ,nQ=(e,t)=>t,rQ=(e,t)=>t,oQ=(e,t)=>{const n={snap:!1,simplify:!1,triangulate:!1},{snap:r,simplify:o,triangulate:s}=Object.assign({},n,e),i=qZ(t);let a=$4.toPolygons(t);r&&(a=KZ(i,a)),o&&(a=JZ(i,a)),s&&(a=eQ(a),a=tQ(i,a));const l=Object.assign({},t);return l.polygons=a,l},sQ=(e,...t)=>{if(t=YZ(t),t.length===0)throw new Error("wrong number of arguments");const n=t.map(r=>{if(QZ.isA(r))return nQ(e,r);if(ZZ.isA(r))return rQ(e,r);if($4.isA(r))return oQ(e,r);throw new Error("invalid geometry")});return n.length===1?n[0]:n};var iQ=sQ;const aQ=lt,Ys=mt,um=ut,fm=ft,dm=bt,tg=Es,lQ=_4,cQ=e=>{const t=tg(e),r=dm.toPoints(e).map(o=>Ys.snap(Ys.create(),o,t));return dm.create(r)},uQ=e=>{const t=tg(e);let r=um.toSides(e).map(o=>[Ys.snap(Ys.create(),o[0],t),Ys.snap(Ys.create(),o[1],t)]);return r=r.filter(o=>!Ys.equals(o[0],o[1])),um.create(r)},fQ=e=>{const t=tg(e),n=fm.toPolygons(e),r=lQ(t,n);return fm.create(r)},dQ=(...e)=>{if(e=aQ(e),e.length===0)throw new Error("wrong number of arguments");const t=e.map(n=>dm.isA(n)?cQ(n):um.isA(n)?uQ(n):fm.isA(n)?fQ(n):n);return t.length===1?t[0]:t};var hQ=dQ,pQ={generalize:iQ,snap:hQ,retessellate:Dc};const mQ=(e,t,n)=>{for(e=e.slice();e.length<n;)e.push(t);return e};var vQ=mQ;const gQ=lt,dx=vQ,S4=Vv,{translate:yQ}=Ks,wQ=e=>{if(!Array.isArray(e.modes)||e.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(e.modes=dx(e.modes,"none",3),e.modes.filter(t=>["center","max","min","none"].includes(t)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(e.relativeTo)||e.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(e.relativeTo=dx(e.relativeTo,0,3),e.relativeTo.filter(t=>Number.isFinite(t)||t==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof e.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return e},xQ=(e,t,n)=>{for(let r=0;r<3;r++)e[r]==null&&(t[r]==="center"?e[r]=(n[0][r]+n[1][r])/2:t[r]==="max"?e[r]=n[1][r]:t[r]==="min"&&(e[r]=n[0][r]));return e},hx=(e,t,n)=>{const r=S4(e),o=[0,0,0];for(let s=0;s<3;s++)t[s]==="center"?o[s]=n[s]-(r[0][s]+r[1][s])/2:t[s]==="max"?o[s]=n[s]-r[1][s]:t[s]==="min"&&(o[s]=n[s]-r[0][s]);return yQ(o,e)},EQ=(e,...t)=>{e=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},e),e=wQ(e);let{modes:r,relativeTo:o,grouped:s}=e;if(t=gQ(t),t.length===0)throw new Error("align(): No geometries were provided to act upon");if(o.filter(i=>i==null).length){const i=S4(t);o=xQ(o,r,i)}return s?t=hx(t,r,o):t=t.map(i=>hx(i,r,o)),t.length===1?t[0]:t};var _Q=EQ;const $Q=lt,SQ=ut,AQ=ft,bQ=bt,TQ=hi,{translate:PQ}=Ks,zh=(e,t)=>{const n={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:r,relativeTo:o}=Object.assign({},n,e),s=TQ(t),i=[0,0,0];return r[0]&&(i[0]=o[0]-(s[0][0]+(s[1][0]-s[0][0])/2)),r[1]&&(i[1]=o[1]-(s[0][1]+(s[1][1]-s[0][1])/2)),r[2]&&(i[2]=o[2]-(s[0][2]+(s[1][2]-s[0][2])/2)),PQ(i,t)},m1=(e,...t)=>{const n={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:r,relativeTo:o}=Object.assign({},n,e);if(t=$Q(t),t.length===0)throw new Error("wrong number of arguments");if(o.length!==3)throw new Error("relativeTo must be an array of length 3");e={axes:r,relativeTo:o};const s=t.map(i=>bQ.isA(i)||SQ.isA(i)||AQ.isA(i)?zh(e,i):i);return s.length===1?s[0]:s},CQ=(...e)=>m1({axes:[!0,!1,!1]},e),kQ=(...e)=>m1({axes:[!1,!0,!1]},e),MQ=(...e)=>m1({axes:[!1,!1,!0]},e);var hf={center:m1,centerX:CQ,centerY:kQ,centerZ:MQ};const NQ=lt,px=Ct,mx=ut,vx=ft,gx=bt,v1=(e,...t)=>{if(!Array.isArray(e))throw new Error("factors must be an array");if(t=NQ(t),t.length===0)throw new Error("wrong number of arguments");for(e=e.slice();e.length<3;)e.push(1);if(e[0]<=0||e[1]<=0||e[2]<=0)throw new Error("factors must be positive");const n=px.fromScaling(px.create(),e),r=t.map(o=>gx.isA(o)?gx.transform(n,o):mx.isA(o)?mx.transform(n,o):vx.isA(o)?vx.transform(n,o):o);return r.length===1?r[0]:r},RQ=(e,...t)=>v1([e,1,1],t),OQ=(e,...t)=>v1([1,e,1],t),LQ=(e,...t)=>v1([1,1,e],t);var pf={scale:v1,scaleX:RQ,scaleY:OQ,scaleZ:LQ};const FQ=lt,yx=ut,wx=ft,xx=bt,DQ=(e,...t)=>{if(t=FQ(t),t.length===0)throw new Error("wrong number of arguments");const n=t.map(r=>xx.isA(r)?xx.transform(e,r):yx.isA(r)?yx.transform(e,r):wx.isA(r)?wx.transform(e,r):r);return n.length===1?n[0]:n};var IQ=DQ,zQ={align:_Q,center:hf.center,centerX:hf.centerX,centerY:hf.centerY,centerZ:hf.centerZ,mirror:Bl.mirror,mirrorX:Bl.mirrorX,mirrorY:Bl.mirrorY,mirrorZ:Bl.mirrorZ,rotate:Vl.rotate,rotateX:Vl.rotateX,rotateY:Vl.rotateY,rotateZ:Vl.rotateZ,scale:pf.scale,scaleX:pf.scaleX,scaleY:pf.scaleY,scaleZ:pf.scaleZ,transform:IQ,translate:Ks.translate,translateX:Ks.translateX,translateY:Ks.translateY,translateZ:Ks.translateZ},Da={colors:Az,curves:Gz,geometries:Dv,maths:_B,measurements:zG,primitives:EH,text:NH,utils:f4,booleans:nY,expansions:eq,extrusions:Uq,hulls:TZ,modifiers:pQ,transforms:zQ},ot={},A4={};(function(e){var t={};e.default=function(n,r,o,s,i){var a=new Worker(t[r]||(t[r]=URL.createObjectURL(new Blob([n+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(l){var c=l.data,u=c.$e$;if(u){var f=new Error(u[0]);f.code=u[1],f.stack=u[2],i(f,null)}else i(null,c)},a.postMessage(o,s),a}})(A4);var BQ=A4,Et=Uint8Array,Rn=Uint16Array,Ia=Uint32Array,za=new Et([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ba=new Et([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wc=new Et([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b4=function(e,t){for(var n=new Rn(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var o=new Ia(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)o[s]=s-n[r]<<5|r;return[n,o]},T4=b4(za,2),ng=T4[0],pd=T4[1];ng[28]=258,pd[258]=28;var P4=b4(Ba,0),C4=P4[0],hm=P4[1],xc=new Rn(32768);for(var It=0;It<32768;++It){var Wo=(It&43690)>>>1|(It&21845)<<1;Wo=(Wo&52428)>>>2|(Wo&13107)<<2,Wo=(Wo&61680)>>>4|(Wo&3855)<<4,xc[It]=((Wo&65280)>>>8|(Wo&255)<<8)>>>1}var Ar=function(e,t,n){for(var r=e.length,o=0,s=new Rn(t);o<r;++o)e[o]&&++s[e[o]-1];var i=new Rn(t);for(o=0;o<t;++o)i[o]=i[o-1]+s[o-1]<<1;var a;if(n){a=new Rn(1<<t);var l=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],u=t-e[o],f=i[e[o]-1]++<<u,d=f|(1<<u)-1;f<=d;++f)a[xc[f]>>>l]=c}else for(a=new Rn(r),o=0;o<r;++o)e[o]&&(a[o]=xc[i[e[o]-1]++]>>>15-e[o]);return a},Co=new Et(288);for(var It=0;It<144;++It)Co[It]=8;for(var It=144;It<256;++It)Co[It]=9;for(var It=256;It<280;++It)Co[It]=7;for(var It=280;It<288;++It)Co[It]=8;var Pa=new Et(32);for(var It=0;It<32;++It)Pa[It]=5;var k4=Ar(Co,9,0),M4=Ar(Co,9,1),N4=Ar(Pa,5,0),R4=Ar(Pa,5,1),Nf=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},xr=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Rf=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Ic=function(e){return(e+7)/8|0},br=function(e,t,n){(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length);var r=new(e.BYTES_PER_ELEMENT==2?Rn:e.BYTES_PER_ELEMENT==4?Ia:Et)(n-t);return r.set(e.subarray(t,n)),r};ot.FlateErrorCode={UnexpectedEOF:0,InvalidBlockType:1,InvalidLengthLiteral:2,InvalidDistance:3,StreamFinished:4,NoStreamHandler:5,InvalidHeader:6,NoCallback:7,InvalidUTF8:8,ExtraFieldTooLong:9,InvalidDate:10,FilenameTooLong:11,StreamFinishing:12,InvalidZipData:13,UnknownCompressionMethod:14};var O4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],et=function(e,t,n){var r=new Error(t||O4[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,et),!n)throw r;return r},zc=function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new Et(0);var o=!t||n,s=!n||n.i;n||(n={}),t||(t=new Et(r*3));var i=function(pn){var Cn=t.length;if(pn>Cn){var gr=new Et(Math.max(Cn*2,pn));gr.set(t),t=gr}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,f=n.d,d=n.m,p=n.n,y=r*8;do{if(!u){a=xr(e,l,1);var v=xr(e,l+1,3);if(l+=3,v)if(v==1)u=M4,f=R4,d=9,p=5;else if(v==2){var w=xr(e,l,31)+257,E=xr(e,l+10,15)+4,A=w+xr(e,l+5,31)+1;l+=14;for(var $=new Et(A),k=new Et(19),N=0;N<E;++N)k[wc[N]]=xr(e,l+N*3,7);l+=E*3;for(var X=Nf(k),j=(1<<X)-1,J=Ar(k,X,1),N=0;N<A;){var le=J[xr(e,l,j)];l+=le&15;var x=le>>>4;if(x<16)$[N++]=x;else{var _e=0,Z=0;for(x==16?(Z=3+xr(e,l,3),l+=2,_e=$[N-1]):x==17?(Z=3+xr(e,l,7),l+=3):x==18&&(Z=11+xr(e,l,127),l+=7);Z--;)$[N++]=_e}}var Me=$.subarray(0,w),we=$.subarray(w);d=Nf(Me),p=Nf(we),u=Ar(Me,d,1),f=Ar(we,p,1)}else et(1);else{var x=Ic(l)+4,m=e[x-4]|e[x-3]<<8,g=x+m;if(g>r){s&&et(0);break}o&&i(c+m),t.set(e.subarray(x,g),c),n.b=c+=m,n.p=l=g*8,n.f=a;continue}if(l>y){s&&et(0);break}}o&&i(c+131072);for(var Je=(1<<d)-1,ye=(1<<p)-1,Ge=l;;Ge=l){var _e=u[Rf(e,l)&Je],De=_e>>>4;if(l+=_e&15,l>y){s&&et(0);break}if(_e||et(2),De<256)t[c++]=De;else if(De==256){Ge=l,u=null;break}else{var rt=De-254;if(De>264){var N=De-257,st=za[N];rt=xr(e,l,(1<<st)-1)+ng[N],l+=st}var Bt=f[Rf(e,l)&ye],Tt=Bt>>>4;Bt||et(3),l+=Bt&15;var we=C4[Tt];if(Tt>3){var st=Ba[Tt];we+=Rf(e,l)&(1<<st)-1,l+=st}if(l>y){s&&et(0);break}o&&i(c+131072);for(var Mt=c+rt;c<Mt;c+=4)t[c]=t[c-we],t[c+1]=t[c+1-we],t[c+2]=t[c+2-we],t[c+3]=t[c+3-we];c=Mt}}n.l=u,n.p=Ge,n.b=c,n.f=a,u&&(a=1,n.m=d,n.d=f,n.n=p)}while(!a);return c==t.length?t:br(t,0,c)},eo=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Yi=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Of=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,s=n.slice();if(!o)return[_o,0];if(o==1){var i=new Et(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort(function(A,$){return A.f-$.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,f=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=o-1;)a=n[n[c].f<n[f].f?c++:f++],l=n[c!=u&&n[c].f<n[f].f?c++:f++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=s[0].s,r=1;r<o;++r)s[r].s>d&&(d=s[r].s);var p=new Rn(d+1),y=md(n[u-1],p,0);if(y>t){var r=0,v=0,x=y-t,m=1<<x;for(s.sort(function($,k){return p[k.s]-p[$.s]||$.f-k.f});r<o;++r){var g=s[r].s;if(p[g]>t)v+=m-(1<<y-p[g]),p[g]=t;else break}for(v>>>=x;v>0;){var w=s[r].s;p[w]<t?v-=1<<t-p[w]++-1:++r}for(;r>=0&&v;--r){var E=s[r].s;p[E]==t&&(--p[E],++v)}y=t}return[new Et(p),y]},md=function(e,t,n){return e.s==-1?Math.max(md(e.l,t,n+1),md(e.r,t,n+1)):t[e.s]=n},pm=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Rn(++t),r=0,o=e[0],s=1,i=function(l){n[r++]=l},a=1;a<=t;++a)if(e[a]==o&&a!=t)++s;else{if(!o&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(o),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(o);s=1,o=e[a]}return[n.subarray(0,r),t]},qi=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},vd=function(e,t,n){var r=n.length,o=Ic(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var s=0;s<r;++s)e[o+s+4]=n[s];return(o+4+r)*8},mm=function(e,t,n,r,o,s,i,a,l,c,u){eo(t,u++,n),++o[256];for(var f=Of(o,15),d=f[0],p=f[1],y=Of(s,15),v=y[0],x=y[1],m=pm(d),g=m[0],w=m[1],E=pm(v),A=E[0],$=E[1],k=new Rn(19),N=0;N<g.length;++N)k[g[N]&31]++;for(var N=0;N<A.length;++N)k[A[N]&31]++;for(var X=Of(k,7),j=X[0],J=X[1],le=19;le>4&&!j[wc[le-1]];--le);var _e=c+5<<3,Z=qi(o,Co)+qi(s,Pa)+i,Me=qi(o,d)+qi(s,v)+i+14+3*le+qi(k,j)+(2*k[16]+3*k[17]+7*k[18]);if(_e<=Z&&_e<=Me)return vd(t,u,e.subarray(l,l+c));var we,Je,ye,Ge;if(eo(t,u,1+(Me<Z)),u+=2,Me<Z){we=Ar(d,p,0),Je=d,ye=Ar(v,x,0),Ge=v;var De=Ar(j,J,0);eo(t,u,w-257),eo(t,u+5,$-1),eo(t,u+10,le-4),u+=14;for(var N=0;N<le;++N)eo(t,u+3*N,j[wc[N]]);u+=3*le;for(var rt=[g,A],st=0;st<2;++st)for(var Bt=rt[st],N=0;N<Bt.length;++N){var Tt=Bt[N]&31;eo(t,u,De[Tt]),u+=j[Tt],Tt>15&&(eo(t,u,Bt[N]>>>5&127),u+=Bt[N]>>>12)}}else we=k4,Je=Co,ye=N4,Ge=Pa;for(var N=0;N<a;++N)if(r[N]>255){var Tt=r[N]>>>18&31;Yi(t,u,we[Tt+257]),u+=Je[Tt+257],Tt>7&&(eo(t,u,r[N]>>>23&31),u+=za[Tt]);var Mt=r[N]&31;Yi(t,u,ye[Mt]),u+=Ge[Mt],Mt>3&&(Yi(t,u,r[N]>>>5&8191),u+=Ba[Mt])}else Yi(t,u,we[r[N]]),u+=Je[r[N]];return Yi(t,u,we[256]),u+Je[256]},L4=new Ia([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_o=new Et(0),F4=function(e,t,n,r,o,s){var i=e.length,a=new Et(r+i+5*(1+Math.ceil(i/7e3))+o),l=a.subarray(r,a.length-o),c=0;if(!t||i<8)for(var u=0;u<=i;u+=65535){var f=u+65535;f>=i&&(l[c>>3]=s),c=vd(l,c+1,e.subarray(u,f))}else{for(var d=L4[t-1],p=d>>>13,y=d&8191,v=(1<<n)-1,x=new Rn(32768),m=new Rn(v+1),g=Math.ceil(n/3),w=2*g,E=function(No){return(e[No]^e[No+1]<<g^e[No+2]<<w)&v},A=new Ia(25e3),$=new Rn(288),k=new Rn(32),N=0,X=0,u=0,j=0,J=0,le=0;u<i;++u){var _e=E(u),Z=u&32767,Me=m[_e];if(x[Z]=Me,m[_e]=Z,J<=u){var we=i-u;if((N>7e3||j>24576)&&we>423){c=mm(e,l,0,A,$,k,X,j,le,u-le,c),j=N=X=0,le=u;for(var Je=0;Je<286;++Je)$[Je]=0;for(var Je=0;Je<30;++Je)k[Je]=0}var ye=2,Ge=0,De=y,rt=Z-Me&32767;if(we>2&&_e==E(u-rt))for(var st=Math.min(p,we)-1,Bt=Math.min(32767,u),Tt=Math.min(258,we);rt<=Bt&&--De&&Z!=Me;){if(e[u+ye]==e[u+ye-rt]){for(var Mt=0;Mt<Tt&&e[u+Mt]==e[u+Mt-rt];++Mt);if(Mt>ye){if(ye=Mt,Ge=rt,Mt>st)break;for(var pn=Math.min(rt,Mt-2),Cn=0,Je=0;Je<pn;++Je){var gr=u-rt+Je+32768&32767,$s=x[gr],vi=gr-$s+32768&32767;vi>Cn&&(Cn=vi,Me=gr)}}}Z=Me,Me=x[Z],rt+=Z-Me+32768&32767}if(Ge){A[j++]=268435456|pd[ye]<<18|hm[Ge];var gi=pd[ye]&31,Ss=hm[Ge]&31;X+=za[gi]+Ba[Ss],++$[257+gi],++k[Ss],J=u+ye,++N}else A[j++]=e[u],++$[e[u]]}}c=mm(e,l,s,A,$,k,X,j,le,u-le,c),!s&&c&7&&(c=vd(l,c+1,_o))}return br(a,0,r+Ic(c)+o)},D4=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e}(),Ga=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=D4[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},rg=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,s=n.length|0,i=0;i!=s;){for(var a=Math.min(i+2655,s);i<a;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},mi=function(e,t,n,r,o){return F4(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},Bc=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Ex=function(e,t,n){for(var r=e(),o=e.toString(),s=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<r.length;++i){var a=r[i],l=s[i];if(typeof a=="function"){t+=";"+l+"=";var c=a.toString();if(a.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;t+=c.slice(u,c.indexOf("(",u))}else{t+=c;for(var f in a.prototype)t+=";"+l+".prototype."+f+"="+a.prototype[f].toString()}else t+=c}else n[l]=a}return[t,n]},mf=[],GQ=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},I4=function(e,t,n,r){var o;if(!mf[n]){for(var s="",i={},a=e.length-1,l=0;l<a;++l)o=Ex(e[l],s,i),s=o[0],i=o[1];mf[n]=Ex(e[a],s,i)}var c=Bc({},mf[n][1]);return BQ.default(mf[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,c,GQ(c),r)},Va=function(){return[Et,Rn,Ia,za,Ba,wc,ng,C4,M4,R4,xc,O4,Ar,Nf,xr,Rf,Ic,br,et,zc,Xa,_s,og]},ja=function(){return[Et,Rn,Ia,za,Ba,wc,pd,hm,k4,Co,N4,Pa,xc,L4,_o,Ar,eo,Yi,Of,md,pm,qi,vd,mm,Ic,br,F4,mi,Gc,_s]},z4=function(){return[sg,ag,St,Ga,D4]},B4=function(){return[ig,j4]},G4=function(){return[lg,St,rg]},V4=function(){return[U4]},_s=function(e){return postMessage(e,[e.buffer])},og=function(e){return e&&e.size&&new Et(e.size)},Ua=function(e,t,n,r,o,s){var i=I4(n,r,o,function(a,l){i.terminate(),s(a,l)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},Cr=function(e){return e.ondata=function(t,n){return postMessage([t,n],[t.buffer])},function(t){return e.push(t.data[0],t.data[1])}},Ha=function(e,t,n,r,o){var s,i=I4(e,r,o,function(a,l){a?(i.terminate(),t.ondata.call(t,a)):(l[1]&&i.terminate(),t.ondata.call(t,a,l[0],l[1]))});i.postMessage(n),t.push=function(a,l){t.ondata||et(5),s&&t.ondata(et(4,0,1),null,!!l),i.postMessage([a,s=l],[a.buffer])},t.terminate=function(){i.terminate()}},Vn=function(e,t){return e[t]|e[t+1]<<8},rn=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},Bh=function(e,t){return rn(e,t)+rn(e,t+4)*4294967296},St=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},sg=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&St(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},ig=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&et(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},j4=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ag=function(e){return 10+(e.filename&&e.filename.length+1||0)},lg=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},U4=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&et(6,"invalid zlib data"),e[1]&32&&et(6,"invalid zlib data: preset dictionaries not supported")};function cg(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var ao=function(){function e(t,n){!n&&typeof t=="function"&&(n=t,t={}),this.ondata=n,this.o=t||{}}return e.prototype.p=function(t,n){this.ondata(mi(t,this.o,0,0,!n),n)},e.prototype.push=function(t,n){this.ondata||et(5),this.d&&et(4),this.d=n,this.p(t,n||!1)},e}();ot.Deflate=ao;var H4=function(){function e(t,n){Ha([ja,function(){return[Cr,ao]}],this,cg.call(this,t,n),function(r){var o=new ao(r.data);onmessage=Cr(o)},6)}return e}();ot.AsyncDeflate=H4;function X4(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[ja],function(r){return _s(Gc(r.data[0],r.data[1]))},0,n)}ot.deflate=X4;function Gc(e,t){return mi(e,t||{},0,0)}ot.deflateSync=Gc;var nr=function(){function e(t){this.s={},this.p=new Et(0),this.ondata=t}return e.prototype.e=function(t){this.ondata||et(5),this.d&&et(4);var n=this.p.length,r=new Et(n+t.length);r.set(this.p),r.set(t,n),this.p=r},e.prototype.c=function(t){this.d=this.s.i=t||!1;var n=this.s.b,r=zc(this.p,this.o,this.s);this.ondata(br(r,n,this.s.b),this.d),this.o=br(r,this.s.b-32768),this.s.b=this.o.length,this.p=br(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,n){this.e(t),this.c(n)},e}();ot.Inflate=nr;var ug=function(){function e(t){this.ondata=t,Ha([Va,function(){return[Cr,nr]}],this,0,function(){var n=new nr;onmessage=Cr(n)},7)}return e}();ot.AsyncInflate=ug;function fg(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[Va],function(r){return _s(Xa(r.data[0],og(r.data[1])))},1,n)}ot.inflate=fg;function Xa(e,t){return zc(e,t)}ot.inflateSync=Xa;var gd=function(){function e(t,n){this.c=Ga(),this.l=0,this.v=1,ao.call(this,t,n)}return e.prototype.push=function(t,n){ao.prototype.push.call(this,t,n)},e.prototype.p=function(t,n){this.c.p(t),this.l+=t.length;var r=mi(t,this.o,this.v&&ag(this.o),n&&8,!n);this.v&&(sg(r,this.o),this.v=0),n&&(St(r,r.length-8,this.c.d()),St(r,r.length-4,this.l)),this.ondata(r,n)},e}();ot.Gzip=gd;ot.Compress=gd;var W4=function(){function e(t,n){Ha([ja,z4,function(){return[Cr,ao,gd]}],this,cg.call(this,t,n),function(r){var o=new gd(r.data);onmessage=Cr(o)},8)}return e}();ot.AsyncGzip=W4;ot.AsyncCompress=W4;function Y4(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[ja,z4,function(){return[yd]}],function(r){return _s(yd(r.data[0],r.data[1]))},2,n)}ot.gzip=Y4;ot.compress=Y4;function yd(e,t){t||(t={});var n=Ga(),r=e.length;n.p(e);var o=mi(e,t,ag(t),8),s=o.length;return sg(o,t),St(o,s-8,n.d()),St(o,s-4,r),o}ot.gzipSync=yd;ot.compressSync=yd;var wd=function(){function e(t){this.v=1,nr.call(this,t)}return e.prototype.push=function(t,n){if(nr.prototype.e.call(this,t),this.v){var r=this.p.length>3?ig(this.p):4;if(r>=this.p.length&&!n)return;this.p=this.p.subarray(r),this.v=0}n&&(this.p.length<8&&et(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),nr.prototype.c.call(this,n)},e}();ot.Gunzip=wd;var q4=function(){function e(t){this.ondata=t,Ha([Va,B4,function(){return[Cr,nr,wd]}],this,0,function(){var n=new wd;onmessage=Cr(n)},9)}return e}();ot.AsyncGunzip=q4;function Z4(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[Va,B4,function(){return[xd]}],function(r){return _s(xd(r.data[0]))},3,n)}ot.gunzip=Z4;function xd(e,t){return zc(e.subarray(ig(e),-8),t||new Et(j4(e)))}ot.gunzipSync=xd;var vm=function(){function e(t,n){this.c=rg(),this.v=1,ao.call(this,t,n)}return e.prototype.push=function(t,n){ao.prototype.push.call(this,t,n)},e.prototype.p=function(t,n){this.c.p(t);var r=mi(t,this.o,this.v&&2,n&&4,!n);this.v&&(lg(r,this.o),this.v=0),n&&St(r,r.length-4,this.c.d()),this.ondata(r,n)},e}();ot.Zlib=vm;var VQ=function(){function e(t,n){Ha([ja,G4,function(){return[Cr,ao,vm]}],this,cg.call(this,t,n),function(r){var o=new vm(r.data);onmessage=Cr(o)},10)}return e}();ot.AsyncZlib=VQ;function jQ(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[ja,G4,function(){return[gm]}],function(r){return _s(gm(r.data[0],r.data[1]))},4,n)}ot.zlib=jQ;function gm(e,t){t||(t={});var n=rg();n.p(e);var r=mi(e,t,2,4);return lg(r,t),St(r,r.length-4,n.d()),r}ot.zlibSync=gm;var Ed=function(){function e(t){this.v=1,nr.call(this,t)}return e.prototype.push=function(t,n){if(nr.prototype.e.call(this,t),this.v){if(this.p.length<2&&!n)return;this.p=this.p.subarray(2),this.v=0}n&&(this.p.length<4&&et(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),nr.prototype.c.call(this,n)},e}();ot.Unzlib=Ed;var Q4=function(){function e(t){this.ondata=t,Ha([Va,V4,function(){return[Cr,nr,Ed]}],this,0,function(){var n=new Ed;onmessage=Cr(n)},11)}return e}();ot.AsyncUnzlib=Q4;function K4(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),Ua(e,t,[Va,V4,function(){return[_d]}],function(r){return _s(_d(r.data[0],og(r.data[1])))},5,n)}ot.unzlib=K4;function _d(e,t){return zc((U4(e),e.subarray(2,-4)),t)}ot.unzlibSync=_d;var J4=function(){function e(t){this.G=wd,this.I=nr,this.Z=Ed,this.ondata=t}return e.prototype.push=function(t,n){if(this.ondata||et(5),this.s)this.s.push(t,n);else{if(this.p&&this.p.length){var r=new Et(this.p.length+t.length);r.set(this.p),r.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var o=this,s=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,n),this.p=null}}},e}();ot.Decompress=J4;var UQ=function(){function e(t){this.G=q4,this.I=ug,this.Z=Q4,this.ondata=t}return e.prototype.push=function(t,n){J4.prototype.push.call(this,t,n)},e}();ot.AsyncDecompress=UQ;function HQ(e,t,n){return n||(n=t,t={}),typeof n!="function"&&et(7),e[0]==31&&e[1]==139&&e[2]==8?Z4(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?fg(e,t,n):K4(e,t,n)}ot.decompress=HQ;function XQ(e,t){return e[0]==31&&e[1]==139&&e[2]==8?xd(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Xa(e,t):_d(e,t)}ot.decompressSync=XQ;var dg=function(e,t,n,r){for(var o in e){var s=e[o],i=t+o,a=r;Array.isArray(s)&&(a=Bc(r,s[1]),s=s[0]),s instanceof Et?n[i]=[s,a]:(n[i+="/"]=[new Et(0),a],dg(s,i,n,r))}},_x=typeof TextEncoder<"u"&&new TextEncoder,ym=typeof TextDecoder<"u"&&new TextDecoder,eA=0;try{ym.decode(_o,{stream:!0}),eA=1}catch{}var tA=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,br(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},WQ=function(){function e(t){this.ondata=t,eA?this.t=new TextDecoder:this.p=_o}return e.prototype.push=function(t,n){if(this.ondata||et(5),n=!!n,this.t){this.ondata(this.t.decode(t,{stream:!0}),n),n&&(this.t.decode().length&&et(8),this.t=null);return}this.p||et(4);var r=new Et(this.p.length+t.length);r.set(this.p),r.set(t,this.p.length);var o=tA(r),s=o[0],i=o[1];n?(i.length&&et(8),this.p=null):this.p=i,this.ondata(s,n)},e}();ot.DecodeUTF8=WQ;var YQ=function(){function e(t){this.ondata=t}return e.prototype.push=function(t,n){this.ondata||et(5),this.d&&et(4),this.ondata(gs(t),this.d=n||!1)},e}();ot.EncodeUTF8=YQ;function gs(e,t){if(t){for(var n=new Et(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(_x)return _x.encode(e);for(var o=e.length,s=new Et(e.length+(e.length>>1)),i=0,a=function(u){s[i++]=u},r=0;r<o;++r){if(i+5>s.length){var l=new Et(i+8+(o-r<<1));l.set(s),s=l}var c=e.charCodeAt(r);c<128||t?a(c):c<2048?(a(192|c>>6),a(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++r)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63)):(a(224|c>>12),a(128|c>>6&63),a(128|c&63))}return br(s,0,i)}ot.strToU8=gs;function hg(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(ym)return ym.decode(e);var o=tA(e),s=o[0],i=o[1];return i.length&&et(8),s}}ot.strFromU8=hg;var nA=function(e){return e==1?3:e<6?2:e==9?1:0},rA=function(e,t){return t+30+Vn(e,t+26)+Vn(e,t+28)},oA=function(e,t,n){var r=Vn(e,t+28),o=hg(e.subarray(t+46,t+46+r),!(Vn(e,t+8)&2048)),s=t+46+r,i=rn(e,t+20),a=n&&i==4294967295?sA(e,s):[i,rn(e,t+24),rn(e,t+42)],l=a[0],c=a[1],u=a[2];return[Vn(e,t+10),l,c,o,s+Vn(e,t+30)+Vn(e,t+32),u]},sA=function(e,t){for(;Vn(e,t)!=1;t+=4+Vn(e,t+2));return[Bh(e,t+12),Bh(e,t+4),Bh(e,t+20)]},hs=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&et(9),t+=r+4}return t},Ca=function(e,t,n,r,o,s,i,a){var l=r.length,c=n.extra,u=a&&a.length,f=hs(c);St(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(s==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var d=new Date(n.mtime==null?Date.now():n.mtime),p=d.getFullYear()-1980;if((p<0||p>119)&&et(10),St(e,t,p<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>>1),t+=4,s!=null&&(St(e,t,n.crc),St(e,t+4,s),St(e,t+8,n.size)),St(e,t+12,l),St(e,t+14,f),t+=16,i!=null&&(St(e,t,u),St(e,t+6,n.attrs),St(e,t+10,i),t+=14),e.set(r,t),t+=l,f)for(var y in c){var v=c[y],x=v.length;St(e,t,+y),St(e,t+2,x),e.set(v,t+4),t+=4+x}return u&&(e.set(a,t),t+=u),t},pg=function(e,t,n,r,o){St(e,t,101010256),St(e,t+8,n),St(e,t+10,n),St(e,t+12,r),St(e,t+16,o)},Ec=function(){function e(t){this.filename=t,this.c=Ga(),this.size=0,this.compression=0}return e.prototype.process=function(t,n){this.ondata(null,t,n)},e.prototype.push=function(t,n){this.ondata||et(5),this.c.p(t),this.size+=t.length,n&&(this.crc=this.c.d()),this.process(t,n||!1)},e}();ot.ZipPassThrough=Ec;var qQ=function(){function e(t,n){var r=this;n||(n={}),Ec.call(this,t),this.d=new ao(n,function(o,s){r.ondata(null,o,s)}),this.compression=8,this.flag=nA(n.level)}return e.prototype.process=function(t,n){try{this.d.push(t,n)}catch(r){this.ondata(r,null,n)}},e.prototype.push=function(t,n){Ec.prototype.push.call(this,t,n)},e}();ot.ZipDeflate=qQ;var ZQ=function(){function e(t,n){var r=this;n||(n={}),Ec.call(this,t),this.d=new H4(n,function(o,s,i){r.ondata(o,s,i)}),this.compression=8,this.flag=nA(n.level),this.terminate=this.d.terminate}return e.prototype.process=function(t,n){this.d.push(t,n)},e.prototype.push=function(t,n){Ec.prototype.push.call(this,t,n)},e}();ot.AsyncZipDeflate=ZQ;var QQ=function(){function e(t){this.ondata=t,this.u=[],this.d=1}return e.prototype.add=function(t){var n=this;if(this.ondata||et(5),this.d&2)this.ondata(et(4+(this.d&1)*8,0,1),null,!1);else{var r=gs(t.filename),o=r.length,s=t.comment,i=s&&gs(s),a=o!=t.filename.length||i&&s.length!=i.length,l=o+hs(t.extra)+30;o>65535&&this.ondata(et(11,0,1),null,!1);var c=new Et(l);Ca(c,0,t,r,a);var u=[c],f=function(){for(var x=0,m=u;x<m.length;x++){var g=m[x];n.ondata(null,g,!1)}u=[]},d=this.d;this.d=0;var p=this.u.length,y=Bc(t,{f:r,u:a,o:i,t:function(){t.terminate&&t.terminate()},r:function(){if(f(),d){var x=n.u[p+1];x?x.r():n.d=1}d=1}}),v=0;t.ondata=function(x,m,g){if(x)n.ondata(x,m,g),n.terminate();else if(v+=m.length,u.push(m),g){var w=new Et(16);St(w,0,134695760),St(w,4,t.crc),St(w,8,v),St(w,12,t.size),u.push(w),y.c=v,y.b=l+v+16,y.crc=t.crc,y.size=t.size,d&&y.r(),d=1}else d&&f()},this.u.push(y)}},e.prototype.end=function(){var t=this;if(this.d&2){this.ondata(et(4+(this.d&1)*8,0,1),null,!0);return}this.d?this.e():this.u.push({r:function(){t.d&1&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var t=0,n=0,r=0,o=0,s=this.u;o<s.length;o++){var i=s[o];r+=46+i.f.length+hs(i.extra)+(i.o?i.o.length:0)}for(var a=new Et(r+22),l=0,c=this.u;l<c.length;l++){var i=c[l];Ca(a,t,i,i.f,i.u,i.c,n,i.o),t+=46+i.f.length+hs(i.extra)+(i.o?i.o.length:0),n+=i.b}pg(a,t,this.u.length,r,n),this.ondata(null,a,!0),this.d=2},e.prototype.terminate=function(){for(var t=0,n=this.u;t<n.length;t++){var r=n[t];r.t()}this.d=2},e}();ot.Zip=QQ;function KQ(e,t,n){n||(n=t,t={}),typeof n!="function"&&et(7);var r={};dg(e,"",r,t);var o=Object.keys(r),s=o.length,i=0,a=0,l=s,c=new Array(s),u=[],f=function(){for(var x=0;x<u.length;++x)u[x]()},d=function(x,m){$d(function(){n(x,m)})};$d(function(){d=n});var p=function(){var x=new Et(a+22),m=i,g=a-i;a=0;for(var w=0;w<l;++w){var E=c[w];try{var A=E.c.length;Ca(x,a,E,E.f,E.u,A);var $=30+E.f.length+hs(E.extra),k=a+$;x.set(E.c,k),Ca(x,i,E,E.f,E.u,A,a,E.m),i+=16+$+(E.m?E.m.length:0),a=k+A}catch(N){return d(N,null)}}pg(x,i,c.length,g,m),d(null,x)};s||p();for(var y=function(x){var m=o[x],g=r[m],w=g[0],E=g[1],A=Ga(),$=w.length;A.p(w);var k=gs(m),N=k.length,X=E.comment,j=X&&gs(X),J=j&&j.length,le=hs(E.extra),_e=E.level==0?0:8,Z=function(Me,we){if(Me)f(),d(Me,null);else{var Je=we.length;c[x]=Bc(E,{size:$,crc:A.d(),c:we,f:k,m:j,u:N!=m.length||j&&X.length!=J,compression:_e}),i+=30+N+le+Je,a+=76+2*(N+le)+(J||0)+Je,--s||p()}};if(N>65535&&Z(et(11,0,1),null),!_e)Z(null,w);else if($<16e4)try{Z(null,Gc(w,E))}catch(Me){Z(Me,null)}else u.push(X4(w,E,Z))},v=0;v<l;++v)y(v);return f}ot.zip=KQ;function JQ(e,t){t||(t={});var n={},r=[];dg(e,"",n,t);var o=0,s=0;for(var i in n){var a=n[i],l=a[0],c=a[1],u=c.level==0?0:8,f=gs(i),d=f.length,p=c.comment,y=p&&gs(p),v=y&&y.length,x=hs(c.extra);d>65535&&et(11);var m=u?Gc(l,c):l,g=m.length,w=Ga();w.p(l),r.push(Bc(c,{size:l.length,crc:w.d(),c:m,f,m:y,u:d!=i.length||y&&p.length!=v,o,compression:u})),o+=30+d+x+g,s+=76+2*(d+x)+(v||0)+g}for(var E=new Et(s+22),A=o,$=s-o,k=0;k<r.length;++k){var f=r[k];Ca(E,f.o,f,f.f,f.u,f.c.length);var N=30+f.f.length+hs(f.extra);E.set(f.c,f.o+N),Ca(E,o,f,f.f,f.u,f.c.length,f.o,f.m),o+=16+N+(f.m?f.m.length:0)}return pg(E,o,r.length,$,A),E}ot.zipSync=JQ;var iA=function(){function e(){}return e.prototype.push=function(t,n){this.ondata(null,t,n)},e.compression=0,e}();ot.UnzipPassThrough=iA;var eK=function(){function e(){var t=this;this.i=new nr(function(n,r){t.ondata(null,n,r)})}return e.prototype.push=function(t,n){try{this.i.push(t,n)}catch(r){this.ondata(r,null,n)}},e.compression=8,e}();ot.UnzipInflate=eK;var tK=function(){function e(t,n){var r=this;n<32e4?this.i=new nr(function(o,s){r.ondata(null,o,s)}):(this.i=new ug(function(o,s,i){r.ondata(o,s,i)}),this.terminate=this.i.terminate)}return e.prototype.push=function(t,n){this.i.terminate&&(t=br(t,0)),this.i.push(t,n)},e.compression=8,e}();ot.AsyncUnzipInflate=tK;var nK=function(){function e(t){this.onfile=t,this.k=[],this.o={0:iA},this.p=_o}return e.prototype.push=function(t,n){var r=this;if(this.onfile||et(5),this.p||et(4),this.c>0){var o=Math.min(this.c,t.length),s=t.subarray(0,o);if(this.c-=o,this.d?this.d.push(s,!this.c):this.k[0].push(s),t=t.subarray(o),t.length)return this.push(t,n)}else{var i=0,a=0,l=void 0,c=void 0;this.p.length?t.length?(c=new Et(this.p.length+t.length),c.set(this.p),c.set(t,this.p.length)):c=this.p:c=t;for(var u=c.length,f=this.c,d=f&&this.d,p=function(){var m,g=rn(c,a);if(g==67324752){i=1,l=a,y.d=null,y.c=0;var w=Vn(c,a+6),E=Vn(c,a+8),A=w&2048,$=w&8,k=Vn(c,a+26),N=Vn(c,a+28);if(u>a+30+k+N){var X=[];y.k.unshift(X),i=2;var j=rn(c,a+18),J=rn(c,a+22),le=hg(c.subarray(a+30,a+=30+k),!A);j==4294967295?(m=$?[-2]:sA(c,a),j=m[0],J=m[1]):$&&(j=-1),a+=N,y.c=j;var _e,Z={name:le,compression:E,start:function(){if(Z.ondata||et(5),!j)Z.ondata(null,_o,!0);else{var Me=r.o[E];Me||Z.ondata(et(14,"unknown compression type "+E,1),null,!1),_e=j<0?new Me(le):new Me(le,j,J),_e.ondata=function(Ge,De,rt){Z.ondata(Ge,De,rt)};for(var we=0,Je=X;we<Je.length;we++){var ye=Je[we];_e.push(ye,!1)}r.k[0]==X&&r.c?r.d=_e:_e.push(_o,!0)}},terminate:function(){_e&&_e.terminate&&_e.terminate()}};j>=0&&(Z.size=j,Z.originalSize=J),y.onfile(Z)}return"break"}else if(f){if(g==134695760)return l=a+=12+(f==-2&&8),i=3,y.c=0,"break";if(g==33639248)return l=a-=4,i=3,y.c=0,"break"}},y=this;a<u-4;++a){var v=p();if(v==="break")break}if(this.p=_o,f<0){var x=i?c.subarray(0,l-12-(f==-2&&8)-(rn(c,l-16)==134695760&&4)):c.subarray(0,a);d?d.push(x,!!i):this.k[+(i==2)].push(x)}if(i&2)return this.push(c.subarray(a),n);this.p=c.subarray(a)}n&&(this.c&&et(13),this.p=null)},e.prototype.register=function(t){this.o[t.compression]=t},e}();ot.Unzip=nK;var $d=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function rK(e,t,n){n||(n=t,t={}),typeof n!="function"&&et(7);var r=[],o=function(){for(var v=0;v<r.length;++v)r[v]()},s={},i=function(v,x){$d(function(){n(v,x)})};$d(function(){i=n});for(var a=e.length-22;rn(e,a)!=101010256;--a)if(!a||e.length-a>65558)return i(et(13,0,1),null),o;var l=Vn(e,a+8);if(l){var c=l,u=rn(e,a+16),f=u==4294967295;if(f){if(a=rn(e,a-12),rn(e,a)!=101075792)return i(et(13,0,1),null),o;c=l=rn(e,a+32),u=rn(e,a+48)}for(var d=t&&t.filter,p=function(v){var x=oA(e,u,f),m=x[0],g=x[1],w=x[2],E=x[3],A=x[4],$=x[5],k=rA(e,$);u=A;var N=function(j,J){j?(o(),i(j,null)):(J&&(s[E]=J),--l||i(null,s))};if(!d||d({name:E,size:g,originalSize:w,compression:m}))if(!m)N(null,br(e,k,k+g));else if(m==8){var X=e.subarray(k,k+g);if(g<32e4)try{N(null,Xa(X,new Et(w)))}catch(j){N(j,null)}else r.push(fg(X,{size:w},N))}else N(et(14,"unknown compression type "+m,1),null);else N(null,null)},y=0;y<c;++y)p(y)}else i(null,{});return o}ot.unzip=rK;function oK(e,t){for(var n={},r=e.length-22;rn(e,r)!=101010256;--r)(!r||e.length-r>65558)&&et(13);var o=Vn(e,r+8);if(!o)return{};var s=rn(e,r+16),i=s==4294967295;i&&(r=rn(e,r-12),rn(e,r)!=101075792&&et(13),o=rn(e,r+32),s=rn(e,r+48));for(var a=t&&t.filter,l=0;l<o;++l){var c=oA(e,s,i),u=c[0],f=c[1],d=c[2],p=c[3],y=c[4],v=c[5],x=rA(e,v);s=y,(!a||a({name:p,size:f,originalSize:d,compression:u}))&&(u?u==8?n[p]=Xa(e.subarray(x,x+f),new Et(d)):et(14,"unknown compression type "+u):n[p]=br(e,x,x+f))}return n}ot.unzipSync=oK;function sK(e){return e&&Object.prototype.toString.call(e)==="[object Object]"}function iK(e){var t=" ".repeat(e);return function(n){var r,o=[];return typeof n!="string"?n:(r=n.split(`
`),r.length===1?t+n:(r.forEach(function(s){if(s.trim()===""){o.push(s);return}o.push(t+s)}),o.join(`
`)))}}function aK(e){var t=e.split(`
`),n=[];return t.forEach(function(r){r.trim()!==""&&n.push(r)}),n.join(`
`)}function lK(e,t){var n="",r=function(s){return s};t>0&&(n=`
`,r=iK(t));function o(s){var i,a,l,c;return a="",c=!0,l=s.some(function(u,f,d){if(f===0)return i="<"+u,d.length===1?!0:void 0;if(f===1)if(sK(u)){if(Object.keys(u).forEach(function(p){i+=" "+p+'="'+u[p]+'"'}),d.length===2)return!0;i+=">";return}else i+=">";switch(typeof u){case"string":case"number":case"boolean":case"undefined":a+=u+n;return}c=!1,a+=o(u)}),l?i+"/>"+n:c?i+aK(a)+"</"+s[0]+">"+n:i+n+r(a)+"</"+s[0]+">"+n}return o(e)}var cK=lK;const aA=e=>e.reduce((t,n)=>Array.isArray(n)?t.concat(aA(n)):t.concat(n),[]);var uK=aA;const fK=(e,t)=>e-t;var dK=fK;const hK=e=>{if(!(!Array.isArray(e)||e.length===0))return e[0]};var pK=hK;const mK=(e,t,n)=>{let r=0,o=e.length;for(;o>r;){const s=Math.floor((r+o)/2),i=e[s];n(t,i)>0?r=s+1:o=s}return e.splice(r,0,t),e};var vK=mK;const gK=(e,t)=>{if(!(!Array.isArray(e)||e.length<t))return e[t]};var yK=gK;const wK=(e,t,n)=>{for(e=e.slice();e.length<n;)e.push(t);return e};var xK=wK;const EK=e=>Array.isArray(e)?e:e==null?[]:[e];var _K=EK,mg={flatten:uK,fnNumberSort:dK,head:pK,insertSorted:vK,nth:yK,padToLength:xK,toArray:_K};const $K=ot.zipSync,Gh=ot.strToU8,SK=cK,{colors:$x,geometries:_c,modifiers:AK}=Da,{flatten:bK,toArray:TK}=mg,PK="model/3mf",CK="3mf",kK=(e,...t)=>{e=Object.assign({},{unit:"millimeter",metadata:!0,defaultcolor:[1,.6274509803921569,0,1],compress:!0},e),t=bK(t);let r=t.filter(i=>_c.geom3.isA(i));if(r.length===0)throw new Error("only 3D geometries can be serialized to 3MF");t.length!==r.length&&console.warn("some objects could not be serialized to 3MF"),t=TK(AK.generalize({snap:!0,triangulate:!0},r));const o=["model",{unit:e.unit,"xml:lang":"und"},["metadata",{name:"Application"},"JSCAD"]];e.metadata&&o.push(["metadata",{name:"CreationDate"},new Date().toISOString()]),o.push(RK(t,e)),o.push(FK(t));const s=`<?xml version="1.0" encoding="UTF-8"?>
${SK(o,2)}`;if(e.compress){const i={"3D":{"3dmodel.model":Gh(s)},_rels:{".rels":Gh(NK)},"[Content_Types].xml":Gh(MK)};return[$K(i,{comment:"created by JSCAD"}).buffer]}return[s]},MK=`<?xml version="1.0" encoding="UTF-8" ?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml">
  </Default>
  <Default Extension="model" ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml">
  </Default>
</Types>`,NK=`<?xml version="1.0" encoding="UTF-8" ?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
  <Relationship Target="/3D/3dmodel.model" Id="rel0" Type="http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel">
  </Relationship>
</Relationships>`,RK=(e,t)=>{let n=["resources",{},OK(e,t)];return n=n.concat(LK(e,t)),n},OK=(e,t)=>{let n=["basematerials",{id:"0"}];const r=[];return e.forEach((o,s)=>{let i=$x.rgbToHex(t.defaultcolor).toUpperCase();o.color&&(i=$x.rgbToHex(o.color).toUpperCase()),r.push(["base",{name:`mat${s}`,displaycolor:i}])}),n=n.concat(r),n},LK=(e,t)=>{const n=[];return e.forEach((r,o)=>{_c.geom3.isA(r)&&_c.geom3.toPolygons(r).length>0&&(t.id=o,n.push(DK(r,t)))}),n},FK=(e,t)=>{let n=["build",{}];const r=[];return e.forEach((o,s)=>{r.push(["item",{objectid:`${s+1}`}])}),n=n.concat(r),n},DK=(e,t)=>{const n=e.name?e.name:`Part ${t.id}`;return["object",{id:`${t.id+1}`,type:"model",pid:"0",pindex:`${t.id}`,name:n},IK(e)]},IK=(e,t)=>["mesh",{},zK(e),GK(e)],zK=(e,t)=>{const n=["vertices",{}],r=[];return _c.geom3.toPolygons(e).forEach(s=>{for(let i=0;i<s.vertices.length;i++)r.push(BK(s.vertices[i]))}),n.concat(r)},BK=(e,t)=>["vertex",{x:e[0],y:e[1],z:e[2]}],GK=(e,t)=>{let n=0;const r=_c.geom3.toPolygons(e);let o=["triangles",{}];return r.forEach(s=>{if(s.vertices.length<3)return;const i=VK(s,n);o=o.concat(i),n+=s.vertices.length}),o},VK=(e,t)=>{const n=[];for(let r=0;r<e.vertices.length-2;r++){const o=["triangle",{v1:t,v2:t+r+1,v3:t+r+2}];n.push(o)}return n};var jK={serialize:kK,mimeType:PK,fileExtension:CK};const UK=xm(jK),HK=Da.primitives.polygon,{extrudeLinear:Sx}=Da.extrusions,{colorize:Ax}=Da.colors,{union:Gne,subtract:XK,intersect:WK}=Da.booleans,{translate:YK,rotate:bx}=Da.transforms,qK=(e,t)=>{const n=UK.serialize({binary:!0},e),r=new Blob(n),o=URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=t+".3mf",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)};function Tx(e){return HK({points:e.points.map(t=>[t.x,t.y])})}function Px(e,t,n){const r=wM(e.bounds),o=[];return e.polygons.forEach(s=>{if(s.parentIdx!==-1){const i=Tx(s),a=Sx({height:t},i);o[s.parentIdx].mesh=Ax([1,0,0],XK(o[s.parentIdx].mesh,a)),o.push(null)}else{s.points.reverse();const a=Tx(s),l=Ax([0,1,0],Sx({height:t},a)),c=[s.bounds.left,s.bounds.right];o.push({mesh:l,span:c})}}),o.filter(s=>s!==null).map(s=>{let i=YK([-r.x,-r.y,-t/2],s.mesh);return i=bx([0,n,0],i),i=bx([Math.PI/2,Math.PI,-Math.PI/2],i),{...s,mesh:i}})}function Cx(e,t){return e.span[0]-t.span[0]}function kx(e){const t=e.reduce((r,o)=>Math.min(r,o.span[0]),Number.MAX_SAFE_INTEGER),n=e.reduce((r,o)=>Math.max(r,o.span[1]),Number.MIN_SAFE_INTEGER);return r=>(r.span[0]-t)/(n-t)}function ZK(e,t){e.sort(Cx),t.sort(Cx);const n=kx(e),r=kx(t),o=[];let s=0,i=0;for(;;){o.push(WK(e[s].mesh,t[i].mesh));const a=s<e.length-1?n(e[s+1]):null,l=i<t.length-1?r(t[i+1]):null;if(a===null&&l===null)break;a===null||l!==null&&l<a?i++:s++}return o}var QK=KK;function KK(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var JK=eJ;function eJ(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var tJ=nJ;function nJ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var lA=rJ;function rJ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var oJ=sJ;function sJ(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],s=t[6],i=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=o,e[13]=i,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}var iJ=aJ;function aJ(e,t){var n=t[0],r=t[1],o=t[2],s=t[3],i=t[4],a=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],p=t[11],y=t[12],v=t[13],x=t[14],m=t[15],g=n*a-r*i,w=n*l-o*i,E=n*c-s*i,A=r*l-o*a,$=r*c-s*a,k=o*c-s*l,N=u*v-f*y,X=u*x-d*y,j=u*m-p*y,J=f*x-d*v,le=f*m-p*v,_e=d*m-p*x,Z=g*_e-w*le+E*J+A*j-$*X+k*N;return Z?(Z=1/Z,e[0]=(a*_e-l*le+c*J)*Z,e[1]=(o*le-r*_e-s*J)*Z,e[2]=(v*k-x*$+m*A)*Z,e[3]=(d*$-f*k-p*A)*Z,e[4]=(l*j-i*_e-c*X)*Z,e[5]=(n*_e-o*j+s*X)*Z,e[6]=(x*E-y*k-m*w)*Z,e[7]=(u*k-d*E+p*w)*Z,e[8]=(i*le-a*j+c*N)*Z,e[9]=(r*j-n*le-s*N)*Z,e[10]=(y*$-v*E+m*g)*Z,e[11]=(f*E-u*$-p*g)*Z,e[12]=(a*X-i*J-l*N)*Z,e[13]=(n*J-r*X+o*N)*Z,e[14]=(v*w-y*A-x*g)*Z,e[15]=(u*A-f*w+d*g)*Z,e):null}var lJ=cJ;function cJ(e,t){var n=t[0],r=t[1],o=t[2],s=t[3],i=t[4],a=t[5],l=t[6],c=t[7],u=t[8],f=t[9],d=t[10],p=t[11],y=t[12],v=t[13],x=t[14],m=t[15];return e[0]=a*(d*m-p*x)-f*(l*m-c*x)+v*(l*p-c*d),e[1]=-(r*(d*m-p*x)-f*(o*m-s*x)+v*(o*p-s*d)),e[2]=r*(l*m-c*x)-a*(o*m-s*x)+v*(o*c-s*l),e[3]=-(r*(l*p-c*d)-a*(o*p-s*d)+f*(o*c-s*l)),e[4]=-(i*(d*m-p*x)-u*(l*m-c*x)+y*(l*p-c*d)),e[5]=n*(d*m-p*x)-u*(o*m-s*x)+y*(o*p-s*d),e[6]=-(n*(l*m-c*x)-i*(o*m-s*x)+y*(o*c-s*l)),e[7]=n*(l*p-c*d)-i*(o*p-s*d)+u*(o*c-s*l),e[8]=i*(f*m-p*v)-u*(a*m-c*v)+y*(a*p-c*f),e[9]=-(n*(f*m-p*v)-u*(r*m-s*v)+y*(r*p-s*f)),e[10]=n*(a*m-c*v)-i*(r*m-s*v)+y*(r*c-s*a),e[11]=-(n*(a*p-c*f)-i*(r*p-s*f)+u*(r*c-s*a)),e[12]=-(i*(f*x-d*v)-u*(a*x-l*v)+y*(a*d-l*f)),e[13]=n*(f*x-d*v)-u*(r*x-o*v)+y*(r*d-o*f),e[14]=-(n*(a*x-l*v)-i*(r*x-o*v)+y*(r*l-o*a)),e[15]=n*(a*d-l*f)-i*(r*d-o*f)+u*(r*l-o*a),e}var uJ=fJ;function fJ(e){var t=e[0],n=e[1],r=e[2],o=e[3],s=e[4],i=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11],p=e[12],y=e[13],v=e[14],x=e[15],m=t*i-n*s,g=t*a-r*s,w=t*l-o*s,E=n*a-r*i,A=n*l-o*i,$=r*l-o*a,k=c*y-u*p,N=c*v-f*p,X=c*x-d*p,j=u*v-f*y,J=u*x-d*y,le=f*x-d*v;return m*le-g*J+w*j+E*X-A*N+$*k}var dJ=hJ;function hJ(e,t,n){var r=t[0],o=t[1],s=t[2],i=t[3],a=t[4],l=t[5],c=t[6],u=t[7],f=t[8],d=t[9],p=t[10],y=t[11],v=t[12],x=t[13],m=t[14],g=t[15],w=n[0],E=n[1],A=n[2],$=n[3];return e[0]=w*r+E*a+A*f+$*v,e[1]=w*o+E*l+A*d+$*x,e[2]=w*s+E*c+A*p+$*m,e[3]=w*i+E*u+A*y+$*g,w=n[4],E=n[5],A=n[6],$=n[7],e[4]=w*r+E*a+A*f+$*v,e[5]=w*o+E*l+A*d+$*x,e[6]=w*s+E*c+A*p+$*m,e[7]=w*i+E*u+A*y+$*g,w=n[8],E=n[9],A=n[10],$=n[11],e[8]=w*r+E*a+A*f+$*v,e[9]=w*o+E*l+A*d+$*x,e[10]=w*s+E*c+A*p+$*m,e[11]=w*i+E*u+A*y+$*g,w=n[12],E=n[13],A=n[14],$=n[15],e[12]=w*r+E*a+A*f+$*v,e[13]=w*o+E*l+A*d+$*x,e[14]=w*s+E*c+A*p+$*m,e[15]=w*i+E*u+A*y+$*g,e}var pJ=mJ;function mJ(e,t,n){var r=n[0],o=n[1],s=n[2],i,a,l,c,u,f,d,p,y,v,x,m;return t===e?(e[12]=t[0]*r+t[4]*o+t[8]*s+t[12],e[13]=t[1]*r+t[5]*o+t[9]*s+t[13],e[14]=t[2]*r+t[6]*o+t[10]*s+t[14],e[15]=t[3]*r+t[7]*o+t[11]*s+t[15]):(i=t[0],a=t[1],l=t[2],c=t[3],u=t[4],f=t[5],d=t[6],p=t[7],y=t[8],v=t[9],x=t[10],m=t[11],e[0]=i,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=f,e[6]=d,e[7]=p,e[8]=y,e[9]=v,e[10]=x,e[11]=m,e[12]=i*r+u*o+y*s+t[12],e[13]=a*r+f*o+v*s+t[13],e[14]=l*r+d*o+x*s+t[14],e[15]=c*r+p*o+m*s+t[15]),e}var vJ=gJ;function gJ(e,t,n){var r=n[0],o=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var yJ=wJ;function wJ(e,t,n,r){var o=r[0],s=r[1],i=r[2],a=Math.sqrt(o*o+s*s+i*i),l,c,u,f,d,p,y,v,x,m,g,w,E,A,$,k,N,X,j,J,le,_e,Z,Me;return Math.abs(a)<1e-6?null:(a=1/a,o*=a,s*=a,i*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,f=t[0],d=t[1],p=t[2],y=t[3],v=t[4],x=t[5],m=t[6],g=t[7],w=t[8],E=t[9],A=t[10],$=t[11],k=o*o*u+c,N=s*o*u+i*l,X=i*o*u-s*l,j=o*s*u-i*l,J=s*s*u+c,le=i*s*u+o*l,_e=o*i*u+s*l,Z=s*i*u-o*l,Me=i*i*u+c,e[0]=f*k+v*N+w*X,e[1]=d*k+x*N+E*X,e[2]=p*k+m*N+A*X,e[3]=y*k+g*N+$*X,e[4]=f*j+v*J+w*le,e[5]=d*j+x*J+E*le,e[6]=p*j+m*J+A*le,e[7]=y*j+g*J+$*le,e[8]=f*_e+v*Z+w*Me,e[9]=d*_e+x*Z+E*Me,e[10]=p*_e+m*Z+A*Me,e[11]=y*_e+g*Z+$*Me,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}var xJ=EJ;function EJ(e,t,n){var r=Math.sin(n),o=Math.cos(n),s=t[4],i=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*o+c*r,e[5]=i*o+u*r,e[6]=a*o+f*r,e[7]=l*o+d*r,e[8]=c*o-s*r,e[9]=u*o-i*r,e[10]=f*o-a*r,e[11]=d*o-l*r,e}var _J=$J;function $J(e,t,n){var r=Math.sin(n),o=Math.cos(n),s=t[0],i=t[1],a=t[2],l=t[3],c=t[8],u=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*o-c*r,e[1]=i*o-u*r,e[2]=a*o-f*r,e[3]=l*o-d*r,e[8]=s*r+c*o,e[9]=i*r+u*o,e[10]=a*r+f*o,e[11]=l*r+d*o,e}var SJ=AJ;function AJ(e,t,n){var r=Math.sin(n),o=Math.cos(n),s=t[0],i=t[1],a=t[2],l=t[3],c=t[4],u=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*o+c*r,e[1]=i*o+u*r,e[2]=a*o+f*r,e[3]=l*o+d*r,e[4]=c*o-s*r,e[5]=u*o-i*r,e[6]=f*o-a*r,e[7]=d*o-l*r,e}var bJ=TJ;function TJ(e,t,n){var r,o,s,i=n[0],a=n[1],l=n[2],c=Math.sqrt(i*i+a*a+l*l);return Math.abs(c)<1e-6?null:(c=1/c,i*=c,a*=c,l*=c,r=Math.sin(t),o=Math.cos(t),s=1-o,e[0]=i*i*s+o,e[1]=a*i*s+l*r,e[2]=l*i*s-a*r,e[3]=0,e[4]=i*a*s-l*r,e[5]=a*a*s+o,e[6]=l*a*s+i*r,e[7]=0,e[8]=i*l*s+a*r,e[9]=a*l*s-i*r,e[10]=l*l*s+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}var PJ=CJ;function CJ(e,t,n){var r=t[0],o=t[1],s=t[2],i=t[3],a=r+r,l=o+o,c=s+s,u=r*a,f=r*l,d=r*c,p=o*l,y=o*c,v=s*c,x=i*a,m=i*l,g=i*c;return e[0]=1-(p+v),e[1]=f+g,e[2]=d-m,e[3]=0,e[4]=f-g,e[5]=1-(u+v),e[6]=y+x,e[7]=0,e[8]=d+m,e[9]=y-x,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}var kJ=MJ;function MJ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var NJ=RJ;function RJ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}var OJ=LJ;function LJ(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var FJ=DJ;function DJ(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var IJ=zJ;function zJ(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var BJ=GJ;function GJ(e,t){var n=t[0],r=t[1],o=t[2],s=t[3],i=n+n,a=r+r,l=o+o,c=n*i,u=r*i,f=r*a,d=o*i,p=o*a,y=o*l,v=s*i,x=s*a,m=s*l;return e[0]=1-f-y,e[1]=u+m,e[2]=d-x,e[3]=0,e[4]=u-m,e[5]=1-c-y,e[6]=p+v,e[7]=0,e[8]=d+x,e[9]=p-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var VJ=jJ;function jJ(e,t,n,r,o,s,i){var a=1/(n-t),l=1/(o-r),c=1/(s-i);return e[0]=s*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(o+r)*l,e[10]=(i+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*s*2*c,e[15]=0,e}var UJ=HJ;function HJ(e,t,n,r,o){var s=1/Math.tan(t/2),i=1/(r-o);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*i,e[15]=0,e}var XJ=WJ;function WJ(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+a),c=2/(o+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((i-a)*l*.5),e[9]=(o-s)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}var YJ=qJ;function qJ(e,t,n,r,o,s,i){var a=1/(t-n),l=1/(r-o),c=1/(s-i);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(o+r)*l,e[14]=(i+s)*c,e[15]=1,e}var ZJ=lA,QJ=KJ;function KJ(e,t,n,r){var o,s,i,a,l,c,u,f,d,p,y=t[0],v=t[1],x=t[2],m=r[0],g=r[1],w=r[2],E=n[0],A=n[1],$=n[2];return Math.abs(y-E)<1e-6&&Math.abs(v-A)<1e-6&&Math.abs(x-$)<1e-6?ZJ(e):(u=y-E,f=v-A,d=x-$,p=1/Math.sqrt(u*u+f*f+d*d),u*=p,f*=p,d*=p,o=g*d-w*f,s=w*u-m*d,i=m*f-g*u,p=Math.sqrt(o*o+s*s+i*i),p?(p=1/p,o*=p,s*=p,i*=p):(o=0,s=0,i=0),a=f*i-d*s,l=d*o-u*i,c=u*s-f*o,p=Math.sqrt(a*a+l*l+c*c),p?(p=1/p,a*=p,l*=p,c*=p):(a=0,l=0,c=0),e[0]=o,e[1]=a,e[2]=u,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=i,e[9]=c,e[10]=d,e[11]=0,e[12]=-(o*y+s*v+i*x),e[13]=-(a*y+l*v+c*x),e[14]=-(u*y+f*v+d*x),e[15]=1,e)}var JJ=eee;function eee(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}var Mr={create:QK,clone:JK,copy:tJ,identity:lA,transpose:oJ,invert:iJ,adjoint:lJ,determinant:uJ,multiply:dJ,translate:pJ,scale:vJ,rotate:yJ,rotateX:xJ,rotateY:_J,rotateZ:SJ,fromRotation:bJ,fromRotationTranslation:PJ,fromScaling:kJ,fromTranslation:NJ,fromXRotation:OJ,fromYRotation:FJ,fromZRotation:IJ,fromQuat:BJ,frustum:VJ,perspective:UJ,perspectiveFromFieldOfView:XJ,ortho:YJ,lookAt:QJ,str:JJ};const Vh=Mr,tee=(e,t={})=>{const{fbo:n}=t,r={cull:{enable:!0},context:{lightDirection:[.2,.2,1]},uniforms:{view:(o,s)=>s.camera.view,eye:(o,s)=>s.camera.position,projection:(o,s)=>s.camera.projection,camNear:(o,s)=>s.camera.near,camFar:(o,s)=>s.camera.far,invertedView:(o,s)=>Vh.invert([],s.camera.view),lightPosition:(o,s)=>s&&s.rendering&&s.rendering.lightPosition?s.rendering.lightPosition:[100,200,100],lightDirection:(o,s)=>s&&s.rendering&&s.rendering.lightDirection?s.rendering.lightDirection:o.lightDirection||[0,0,0],lightView:o=>Vh.lookAt([],o.lightDirection,[0,0,0],[0,0,1]),lightProjection:Vh.ortho([],-25,-25,-20,20,-25,25),lightColor:(o,s)=>s&&s.rendering&&s.rendering.lightColor?s.rendering.lightColor:[1,.8,0],ambientLightAmount:(o,s)=>s&&s.rendering&&s.rendering.ambientLightAmount?s.rendering.ambientLightAmount:.3,diffuseLightAmount:(o,s)=>s&&s.rendering&&s.rendering.diffuseLightAmount?s&&s.rendering&&s.rendering.diffuseLightAmount:.89,specularLightAmount:(o,s)=>s&&s.rendering&&s.rendering.specularLightAmount?s.rendering.specularLightAmount:.16,uMaterialShininess:(o,s)=>s&&s.rendering&&s.rendering.materialShininess?s.rendering.materialShininess:8,materialAmbient:[.5,.8,.3],materialDiffuse:[.5,.8,.3],materialSpecular:[.5,.8,.3]},framebuffer:n};return e(Object.assign({},r,t.extras))};var nee=tee,g1={background:[1,1,1,1],meshColor:[0,.6,1,1],lightColor:[1,1,1,1],lightDirection:[.2,.2,1],lightPosition:[100,200,100],ambientLightAmount:.3,diffuseLightAmount:.89,specularLightAmount:.16,materialShininess:8},jh={exports:{}},Mx;function ree(){return Mx||(Mx=1,function(e,t){(function(n,r){e.exports=r()})(BP,function(){var n=function(h){return h instanceof Uint8Array||h instanceof Uint16Array||h instanceof Uint32Array||h instanceof Int8Array||h instanceof Int16Array||h instanceof Int32Array||h instanceof Float32Array||h instanceof Float64Array||h instanceof Uint8ClampedArray},r=function(h,S){for(var O=Object.keys(S),Y=0;Y<O.length;++Y)h[O[Y]]=S[O[Y]];return h},o=`
`;function s(h){return typeof atob<"u"?atob(h):"base64:"+h}function i(h){var S=new Error("(regl) "+h);throw console.error(S),S}function a(h,S){h||i(S)}function l(h){return h?": "+h:""}function c(h,S,O){h in S||i("unknown parameter ("+h+")"+l(O)+". possible values: "+Object.keys(S).join())}function u(h,S){n(h)||i("invalid parameter type"+l(S)+". must be a typed array")}function f(h,S){switch(S){case"number":return typeof h=="number";case"object":return typeof h=="object";case"string":return typeof h=="string";case"boolean":return typeof h=="boolean";case"function":return typeof h=="function";case"undefined":return typeof h>"u";case"symbol":return typeof h=="symbol"}}function d(h,S,O){f(h,S)||i("invalid parameter type"+l(O)+". expected "+S+", got "+typeof h)}function p(h,S){h>=0&&(h|0)===h||i("invalid parameter type, ("+h+")"+l(S)+". must be a nonnegative integer")}function y(h,S,O){S.indexOf(h)<0&&i("invalid value"+l(O)+". must be one of: "+S)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function x(h){Object.keys(h).forEach(function(S){v.indexOf(S)<0&&i('invalid regl constructor argument "'+S+'". must be one of '+v)})}function m(h,S){for(h=h+"";h.length<S;)h=" "+h;return h}function g(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function w(h,S){this.number=h,this.line=S,this.errors=[]}function E(h,S,O){this.file=h,this.line=S,this.message=O}function A(){var h=new Error,S=(h.stack||h).toString(),O=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(S);if(O)return O[1];var Y=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(S);return Y?Y[1]:"unknown"}function $(){var h=new Error,S=(h.stack||h).toString(),O=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(S);if(O)return O[1];var Y=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(S);return Y?Y[1]:"unknown"}function k(h,S){var O=h.split(`
`),Y=1,re=0,W={unknown:new g,0:new g};W.unknown.name=W[0].name=S||A(),W.unknown.lines.push(new w(0,""));for(var K=0;K<O.length;++K){var ue=O[K],ce=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ue);if(ce)switch(ce[1]){case"line":var me=/(\d+)(\s+\d+)?/.exec(ce[2]);me&&(Y=me[1]|0,me[2]&&(re=me[2]|0,re in W||(W[re]=new g)));break;case"define":var ge=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ce[2]);ge&&(W[re].name=ge[1]?s(ge[2]):ge[2]);break}W[re].lines.push(new w(Y++,ue))}return Object.keys(W).forEach(function(ve){var $e=W[ve];$e.lines.forEach(function(fe){$e.index[fe.number]=fe})}),W}function N(h){var S=[];return h.split(`
`).forEach(function(O){if(!(O.length<5)){var Y=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(O);Y?S.push(new E(Y[1]|0,Y[2]|0,Y[3].trim())):O.length>0&&S.push(new E("unknown",0,O))}}),S}function X(h,S){S.forEach(function(O){var Y=h[O.file];if(Y){var re=Y.index[O.line];if(re){re.errors.push(O),Y.hasErrors=!0;return}}h.unknown.hasErrors=!0,h.unknown.lines[0].errors.push(O)})}function j(h,S,O,Y,re){if(!h.getShaderParameter(S,h.COMPILE_STATUS)){var W=h.getShaderInfoLog(S),K=Y===h.FRAGMENT_SHADER?"fragment":"vertex";Je(O,"string",K+" shader source must be a string",re);var ue=k(O,re),ce=N(W);X(ue,ce),Object.keys(ue).forEach(function(me){var ge=ue[me];if(!ge.hasErrors)return;var ve=[""],$e=[""];function fe(pe,B){ve.push(pe),$e.push(B||"")}fe("file number "+me+": "+ge.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ge.lines.forEach(function(pe){if(pe.errors.length>0){fe(m(pe.number,4)+"|  ","background-color:yellow; font-weight:bold"),fe(pe.line+o,"color:red; background-color:yellow; font-weight:bold");var B=0;pe.errors.forEach(function(Q){var he=Q.message,Re=/^\s*'(.*)'\s*:\s*(.*)$/.exec(he);if(Re){var ae=Re[1];switch(he=Re[2],ae){case"assign":ae="=";break}B=Math.max(pe.line.indexOf(ae,B),0)}else B=0;fe(m("| ",6)),fe(m("^^^",B+3)+o,"font-weight:bold"),fe(m("| ",6)),fe(he+o,"font-weight:bold")}),fe(m("| ",6)+o)}else fe(m(pe.number,4)+"|  "),fe(pe.line+o,"color:red")}),typeof document<"u"&&!window.chrome?($e[0]=ve.join("%c"),console.log.apply(console,$e)):console.log(ve.join(""))}),a.raise("Error compiling "+K+" shader, "+ue[0].name)}}function J(h,S,O,Y,re){if(!h.getProgramParameter(S,h.LINK_STATUS)){var W=h.getProgramInfoLog(S),K=k(O,re),ue=k(Y,re),ce='Error linking program with vertex shader, "'+ue[0].name+'", and fragment shader "'+K[0].name+'"';typeof document<"u"?console.log("%c"+ce+o+"%c"+W,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ce+o+W),a.raise(ce)}}function le(h){h._commandRef=A()}function _e(h,S,O,Y){le(h);function re(ce){return ce?Y.id(ce):0}h._fragId=re(h.static.frag),h._vertId=re(h.static.vert);function W(ce,me){Object.keys(me).forEach(function(ge){ce[Y.id(ge)]=!0})}var K=h._uniformSet={};W(K,S.static),W(K,S.dynamic);var ue=h._attributeSet={};W(ue,O.static),W(ue,O.dynamic),h._hasCount="count"in h.static||"count"in h.dynamic||"elements"in h.static||"elements"in h.dynamic}function Z(h,S){var O=$();i(h+" in command "+(S||A())+(O==="unknown"?"":" called from "+O))}function Me(h,S,O){h||Z(S,O||A())}function we(h,S,O,Y){h in S||Z("unknown parameter ("+h+")"+l(O)+". possible values: "+Object.keys(S).join(),Y||A())}function Je(h,S,O,Y){f(h,S)||Z("invalid parameter type"+l(O)+". expected "+S+", got "+typeof h,Y||A())}function ye(h){h()}function Ge(h,S,O){h.texture?y(h.texture._texture.internalformat,S,"unsupported texture format for attachment"):y(h.renderbuffer._renderbuffer.format,O,"unsupported renderbuffer format for attachment")}var De=33071,rt=9728,st=9984,Bt=9985,Tt=9986,Mt=9987,pn=5120,Cn=5121,gr=5122,$s=5123,vi=5124,gi=5125,Ss=5126,jc=32819,No=32820,Uc=33635,Hc=34042,y1=36193,Ln={};Ln[pn]=Ln[Cn]=1,Ln[gr]=Ln[$s]=Ln[y1]=Ln[Uc]=Ln[jc]=Ln[No]=2,Ln[vi]=Ln[gi]=Ln[Ss]=Ln[Hc]=4;function Xc(h,S){return h===No||h===jc||h===Uc?2:h===Hc?4:Ln[h]*S}function Wa(h){return!(h&h-1)&&!!h}function SA(h,S,O){var Y,re=S.width,W=S.height,K=S.channels;a(re>0&&re<=O.maxTextureSize&&W>0&&W<=O.maxTextureSize,"invalid texture shape"),(h.wrapS!==De||h.wrapT!==De)&&a(Wa(re)&&Wa(W),"incompatible wrap mode for texture, both width and height must be power of 2"),S.mipmask===1?re!==1&&W!==1&&a(h.minFilter!==st&&h.minFilter!==Tt&&h.minFilter!==Bt&&h.minFilter!==Mt,"min filter requires mipmap"):(a(Wa(re)&&Wa(W),"texture must be a square power of 2 to support mipmapping"),a(S.mipmask===(re<<1)-1,"missing or incomplete mipmap data")),S.type===Ss&&(O.extensions.indexOf("oes_texture_float_linear")<0&&a(h.minFilter===rt&&h.magFilter===rt,"filter not supported, must enable oes_texture_float_linear"),a(!h.genMipmaps,"mipmap generation not supported with float textures"));var ue=S.images;for(Y=0;Y<16;++Y)if(ue[Y]){var ce=re>>Y,me=W>>Y;a(S.mipmask&1<<Y,"missing mipmap data");var ge=ue[Y];if(a(ge.width===ce&&ge.height===me,"invalid shape for mip images"),a(ge.format===S.format&&ge.internalformat===S.internalformat&&ge.type===S.type,"incompatible type for mip image"),!ge.compressed)if(ge.data){var ve=Math.ceil(Xc(ge.type,K)*ce/ge.unpackAlignment)*ge.unpackAlignment;a(ge.data.byteLength===ve*me,"invalid data for image, buffer size is inconsistent with image format")}else ge.element||ge.copy}else h.genMipmaps||a((S.mipmask&1<<Y)===0,"extra mipmap data");S.compressed&&a(!h.genMipmaps,"mipmap generation for compressed images not supported")}function AA(h,S,O,Y){var re=h.width,W=h.height,K=h.channels;a(re>0&&re<=Y.maxTextureSize&&W>0&&W<=Y.maxTextureSize,"invalid texture shape"),a(re===W,"cube map must be square"),a(S.wrapS===De&&S.wrapT===De,"wrap mode not supported by cube map");for(var ue=0;ue<O.length;++ue){var ce=O[ue];a(ce.width===re&&ce.height===W,"inconsistent cube map face shape"),S.genMipmaps&&(a(!ce.compressed,"can not generate mipmap for compressed textures"),a(ce.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var me=ce.images,ge=0;ge<16;++ge){var ve=me[ge];if(ve){var $e=re>>ge,fe=W>>ge;a(ce.mipmask&1<<ge,"missing mipmap data"),a(ve.width===$e&&ve.height===fe,"invalid shape for mip images"),a(ve.format===h.format&&ve.internalformat===h.internalformat&&ve.type===h.type,"incompatible type for mip image"),ve.compressed||(ve.data?a(ve.data.byteLength===$e*fe*Math.max(Xc(ve.type,K),ve.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ve.element||ve.copy)}}}}var b=r(a,{optional:ye,raise:i,commandRaise:Z,command:Me,parameter:c,commandParameter:we,constructor:x,type:d,commandType:Je,isTypedArray:u,nni:p,oneOf:y,shaderError:j,linkError:J,callSite:$,saveCommandRef:le,saveDrawInfo:_e,framebufferFormat:Ge,guessCommand:A,texture2D:SA,textureCube:AA}),bA=0,TA=0,PA=5,CA=6;function As(h,S){this.id=bA++,this.type=h,this.data=S}function gg(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ya(h){if(h.length===0)return[];var S=h.charAt(0),O=h.charAt(h.length-1);if(h.length>1&&S===O&&(S==='"'||S==="'"))return['"'+gg(h.substr(1,h.length-2))+'"'];var Y=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(h);if(Y)return Ya(h.substr(0,Y.index)).concat(Ya(Y[1])).concat(Ya(h.substr(Y.index+Y[0].length)));var re=h.split(".");if(re.length===1)return['"'+gg(h)+'"'];for(var W=[],K=0;K<re.length;++K)W=W.concat(Ya(re[K]));return W}function yg(h){return"["+Ya(h).join("][")+"]"}function kA(h,S){return new As(h,yg(S+""))}function MA(h){return typeof h=="function"&&!h._reglType||h instanceof As}function wg(h,S){if(typeof h=="function")return new As(TA,h);if(typeof h=="number"||typeof h=="boolean")return new As(PA,h);if(Array.isArray(h))return new As(CA,h.map(function(O,Y){return wg(O,S+"["+Y+"]")}));if(h instanceof As)return h;b(!1,"invalid option type in uniform "+S)}var rr={DynamicVariable:As,define:kA,isDynamic:MA,unbox:wg,accessor:yg},w1={next:typeof requestAnimationFrame=="function"?function(h){return requestAnimationFrame(h)}:function(h){return setTimeout(h,16)},cancel:typeof cancelAnimationFrame=="function"?function(h){return cancelAnimationFrame(h)}:clearTimeout},xg=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function NA(){var h={"":0},S=[""];return{id:function(O){var Y=h[O];return Y||(Y=h[O]=S.length,S.push(O),Y)},str:function(O){return S[O]}}}function RA(h,S,O){var Y=document.createElement("canvas");r(Y.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),h.appendChild(Y),h===document.body&&(Y.style.position="absolute",r(h.style,{margin:0,padding:0}));function re(){var ue=window.innerWidth,ce=window.innerHeight;if(h!==document.body){var me=Y.getBoundingClientRect();ue=me.right-me.left,ce=me.bottom-me.top}Y.width=O*ue,Y.height=O*ce}var W;h!==document.body&&typeof ResizeObserver=="function"?(W=new ResizeObserver(function(){setTimeout(re)}),W.observe(h)):window.addEventListener("resize",re,!1);function K(){W?W.disconnect():window.removeEventListener("resize",re),h.removeChild(Y)}return re(),{canvas:Y,onDestroy:K}}function OA(h,S){function O(Y){try{return h.getContext(Y,S)}catch{return null}}return O("webgl")||O("experimental-webgl")||O("webgl-experimental")}function LA(h){return typeof h.nodeName=="string"&&typeof h.appendChild=="function"&&typeof h.getBoundingClientRect=="function"}function FA(h){return typeof h.drawArrays=="function"||typeof h.drawElements=="function"}function Eg(h){return typeof h=="string"?h.split():(b(Array.isArray(h),"invalid extension array"),h)}function _g(h){return typeof h=="string"?(b(typeof document<"u","not supported outside of DOM"),document.querySelector(h)):h}function DA(h){var S=h||{},O,Y,re,W,K={},ue=[],ce=[],me=typeof window>"u"?1:window.devicePixelRatio,ge=!1,ve=function(pe){pe&&b.raise(pe)},$e=function(){};if(typeof S=="string"?(b(typeof document<"u","selector queries only supported in DOM enviroments"),O=document.querySelector(S),b(O,"invalid query string for element")):typeof S=="object"?LA(S)?O=S:FA(S)?(W=S,re=W.canvas):(b.constructor(S),"gl"in S?W=S.gl:"canvas"in S?re=_g(S.canvas):"container"in S&&(Y=_g(S.container)),"attributes"in S&&(K=S.attributes,b.type(K,"object","invalid context attributes")),"extensions"in S&&(ue=Eg(S.extensions)),"optionalExtensions"in S&&(ce=Eg(S.optionalExtensions)),"onDone"in S&&(b.type(S.onDone,"function","invalid or missing onDone callback"),ve=S.onDone),"profile"in S&&(ge=!!S.profile),"pixelRatio"in S&&(me=+S.pixelRatio,b(me>0,"invalid pixel ratio"))):b.raise("invalid arguments to regl"),O&&(O.nodeName.toLowerCase()==="canvas"?re=O:Y=O),!W){if(!re){b(typeof document<"u","must manually specify webgl context outside of DOM environments");var fe=RA(Y||document.body,ve,me);if(!fe)return null;re=fe.canvas,$e=fe.onDestroy}K.premultipliedAlpha===void 0&&(K.premultipliedAlpha=!0),W=OA(re,K)}return W?{gl:W,canvas:re,container:Y,extensions:ue,optionalExtensions:ce,pixelRatio:me,profile:ge,onDone:ve,onDestroy:$e}:($e(),ve("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function IA(h,S){var O={};function Y(K){b.type(K,"string","extension name must be string");var ue=K.toLowerCase(),ce;try{ce=O[ue]=h.getExtension(ue)}catch{}return!!ce}for(var re=0;re<S.extensions.length;++re){var W=S.extensions[re];if(!Y(W))return S.onDestroy(),S.onDone('"'+W+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return S.optionalExtensions.forEach(Y),{extensions:O,restore:function(){Object.keys(O).forEach(function(K){if(O[K]&&!Y(K))throw new Error("(regl): error restoring extension "+K)})}}}function or(h,S){for(var O=Array(h),Y=0;Y<h;++Y)O[Y]=S(Y);return O}var zA=5120,BA=5121,GA=5122,VA=5123,jA=5124,UA=5125,HA=5126;function XA(h){for(var S=16;S<=1<<28;S*=16)if(h<=S)return S;return 0}function $g(h){var S,O;return S=(h>65535)<<4,h>>>=S,O=(h>255)<<3,h>>>=O,S|=O,O=(h>15)<<2,h>>>=O,S|=O,O=(h>3)<<1,h>>>=O,S|=O,S|h>>1}function Sg(){var h=or(8,function(){return[]});function S(W){var K=XA(W),ue=h[$g(K)>>2];return ue.length>0?ue.pop():new ArrayBuffer(K)}function O(W){h[$g(W.byteLength)>>2].push(W)}function Y(W,K){var ue=null;switch(W){case zA:ue=new Int8Array(S(K),0,K);break;case BA:ue=new Uint8Array(S(K),0,K);break;case GA:ue=new Int16Array(S(2*K),0,K);break;case VA:ue=new Uint16Array(S(2*K),0,K);break;case jA:ue=new Int32Array(S(4*K),0,K);break;case UA:ue=new Uint32Array(S(4*K),0,K);break;case HA:ue=new Float32Array(S(4*K),0,K);break;default:return null}return ue.length!==K?ue.subarray(0,K):ue}function re(W){O(W.buffer)}return{alloc:S,free:O,allocType:Y,freeType:re}}var Yt=Sg();Yt.zero=Sg();var WA=3408,YA=3410,qA=3411,ZA=3412,QA=3413,KA=3414,JA=3415,eb=33901,tb=33902,nb=3379,rb=3386,ob=34921,sb=36347,ib=36348,ab=35661,lb=35660,cb=34930,ub=36349,fb=34076,db=34024,hb=7936,pb=7937,mb=7938,vb=35724,gb=34047,yb=36063,wb=34852,Wc=3553,Ag=34067,xb=34069,Eb=33984,qa=6408,x1=5126,bg=5121,E1=36160,_b=36053,$b=36064,Sb=16384,Ab=function(h,S){var O=1;S.ext_texture_filter_anisotropic&&(O=h.getParameter(gb));var Y=1,re=1;S.webgl_draw_buffers&&(Y=h.getParameter(wb),re=h.getParameter(yb));var W=!!S.oes_texture_float;if(W){var K=h.createTexture();h.bindTexture(Wc,K),h.texImage2D(Wc,0,qa,1,1,0,qa,x1,null);var ue=h.createFramebuffer();if(h.bindFramebuffer(E1,ue),h.framebufferTexture2D(E1,$b,Wc,K,0),h.bindTexture(Wc,null),h.checkFramebufferStatus(E1)!==_b)W=!1;else{h.viewport(0,0,1,1),h.clearColor(1,0,0,1),h.clear(Sb);var ce=Yt.allocType(x1,4);h.readPixels(0,0,1,1,qa,x1,ce),h.getError()?W=!1:(h.deleteFramebuffer(ue),h.deleteTexture(K),W=ce[0]===1),Yt.freeType(ce)}}var me=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ge=!0;if(!me){var ve=h.createTexture(),$e=Yt.allocType(bg,36);h.activeTexture(Eb),h.bindTexture(Ag,ve),h.texImage2D(xb,0,qa,3,3,0,qa,bg,$e),Yt.freeType($e),h.bindTexture(Ag,null),h.deleteTexture(ve),ge=!h.getError()}return{colorBits:[h.getParameter(YA),h.getParameter(qA),h.getParameter(ZA),h.getParameter(QA)],depthBits:h.getParameter(KA),stencilBits:h.getParameter(JA),subpixelBits:h.getParameter(WA),extensions:Object.keys(S).filter(function(fe){return!!S[fe]}),maxAnisotropic:O,maxDrawbuffers:Y,maxColorAttachments:re,pointSizeDims:h.getParameter(eb),lineWidthDims:h.getParameter(tb),maxViewportDims:h.getParameter(rb),maxCombinedTextureUnits:h.getParameter(ab),maxCubeMapSize:h.getParameter(fb),maxRenderbufferSize:h.getParameter(db),maxTextureUnits:h.getParameter(cb),maxTextureSize:h.getParameter(nb),maxAttributes:h.getParameter(ob),maxVertexUniforms:h.getParameter(sb),maxVertexTextureUnits:h.getParameter(lb),maxVaryingVectors:h.getParameter(ib),maxFragmentUniforms:h.getParameter(ub),glsl:h.getParameter(vb),renderer:h.getParameter(pb),vendor:h.getParameter(hb),version:h.getParameter(mb),readFloat:W,npotTextureCube:ge}};function Nr(h){return!!h&&typeof h=="object"&&Array.isArray(h.shape)&&Array.isArray(h.stride)&&typeof h.offset=="number"&&h.shape.length===h.stride.length&&(Array.isArray(h.data)||n(h.data))}var sr=function(h){return Object.keys(h).map(function(S){return h[S]})},Yc={shape:Cb,flatten:Pb};function bb(h,S,O){for(var Y=0;Y<S;++Y)O[Y]=h[Y]}function Tb(h,S,O,Y){for(var re=0,W=0;W<S;++W)for(var K=h[W],ue=0;ue<O;++ue)Y[re++]=K[ue]}function Tg(h,S,O,Y,re,W){for(var K=W,ue=0;ue<S;++ue)for(var ce=h[ue],me=0;me<O;++me)for(var ge=ce[me],ve=0;ve<Y;++ve)re[K++]=ge[ve]}function Pg(h,S,O,Y,re){for(var W=1,K=O+1;K<S.length;++K)W*=S[K];var ue=S[O];if(S.length-O===4){var ce=S[O+1],me=S[O+2],ge=S[O+3];for(K=0;K<ue;++K)Tg(h[K],ce,me,ge,Y,re),re+=W}else for(K=0;K<ue;++K)Pg(h[K],S,O+1,Y,re),re+=W}function Pb(h,S,O,Y){var re=1;if(S.length)for(var W=0;W<S.length;++W)re*=S[W];else re=0;var K=Y||Yt.allocType(O,re);switch(S.length){case 0:break;case 1:bb(h,S[0],K);break;case 2:Tb(h,S[0],S[1],K);break;case 3:Tg(h,S[0],S[1],S[2],K,0);break;default:Pg(h,S,0,K,0)}return K}function Cb(h){for(var S=[],O=h;O.length;O=O[0])S.push(O.length);return S}var _1={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},kb=5120,Mb=5122,Nb=5124,Rb=5121,Ob=5123,Lb=5125,Fb=5126,Db=5126,bs={int8:kb,int16:Mb,int32:Nb,uint8:Rb,uint16:Ob,uint32:Lb,float:Fb,float32:Db},Ib=35048,zb=35040,qc={dynamic:Ib,stream:zb,static:35044},$1=Yc.flatten,Cg=Yc.shape,kg=35044,Bb=35040,S1=5121,A1=5126,Ro=[];Ro[5120]=1,Ro[5122]=2,Ro[5124]=4,Ro[5121]=1,Ro[5123]=2,Ro[5125]=4,Ro[5126]=4;function Zc(h){return _1[Object.prototype.toString.call(h)]|0}function Mg(h,S){for(var O=0;O<S.length;++O)h[O]=S[O]}function Ng(h,S,O,Y,re,W,K){for(var ue=0,ce=0;ce<O;++ce)for(var me=0;me<Y;++me)h[ue++]=S[re*ce+W*me+K]}function Gb(h,S,O,Y){var re=0,W={};function K(B){this.id=re++,this.buffer=h.createBuffer(),this.type=B,this.usage=kg,this.byteLength=0,this.dimension=1,this.dtype=S1,this.persistentData=null,O.profile&&(this.stats={size:0})}K.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)},K.prototype.destroy=function(){$e(this)};var ue=[];function ce(B,Q){var he=ue.pop();return he||(he=new K(B)),he.bind(),ve(he,Q,Bb,0,1,!1),he}function me(B){ue.push(B)}function ge(B,Q,he){B.byteLength=Q.byteLength,h.bufferData(B.type,Q,he)}function ve(B,Q,he,Re,ae,ke){var Te;if(B.usage=he,Array.isArray(Q)){if(B.dtype=Re||A1,Q.length>0){var Ue;if(Array.isArray(Q[0])){Te=Cg(Q);for(var oe=1,ne=1;ne<Te.length;++ne)oe*=Te[ne];B.dimension=oe,Ue=$1(Q,Te,B.dtype),ge(B,Ue,he),ke?B.persistentData=Ue:Yt.freeType(Ue)}else if(typeof Q[0]=="number"){B.dimension=ae;var Fe=Yt.allocType(B.dtype,Q.length);Mg(Fe,Q),ge(B,Fe,he),ke?B.persistentData=Fe:Yt.freeType(Fe)}else n(Q[0])?(B.dimension=Q[0].length,B.dtype=Re||Zc(Q[0])||A1,Ue=$1(Q,[Q.length,Q[0].length],B.dtype),ge(B,Ue,he),ke?B.persistentData=Ue:Yt.freeType(Ue)):b.raise("invalid buffer data")}}else if(n(Q))B.dtype=Re||Zc(Q),B.dimension=ae,ge(B,Q,he),ke&&(B.persistentData=new Uint8Array(new Uint8Array(Q.buffer)));else if(Nr(Q)){Te=Q.shape;var Se=Q.stride,de=Q.offset,Ae=0,be=0,tt=0,Ke=0;Te.length===1?(Ae=Te[0],be=1,tt=Se[0],Ke=0):Te.length===2?(Ae=Te[0],be=Te[1],tt=Se[0],Ke=Se[1]):b.raise("invalid shape"),B.dtype=Re||Zc(Q.data)||A1,B.dimension=be;var Pe=Yt.allocType(B.dtype,Ae*be);Ng(Pe,Q.data,Ae,be,tt,Ke,de),ge(B,Pe,he),ke?B.persistentData=Pe:Yt.freeType(Pe)}else Q instanceof ArrayBuffer?(B.dtype=S1,B.dimension=ae,ge(B,Q,he),ke&&(B.persistentData=new Uint8Array(new Uint8Array(Q)))):b.raise("invalid buffer data")}function $e(B){S.bufferCount--,Y(B);var Q=B.buffer;b(Q,"buffer must not be deleted already"),h.deleteBuffer(Q),B.buffer=null,delete W[B.id]}function fe(B,Q,he,Re){S.bufferCount++;var ae=new K(Q);W[ae.id]=ae;function ke(oe){var ne=kg,Fe=null,Se=0,de=0,Ae=1;return Array.isArray(oe)||n(oe)||Nr(oe)||oe instanceof ArrayBuffer?Fe=oe:typeof oe=="number"?Se=oe|0:oe&&(b.type(oe,"object","buffer arguments must be an object, a number or an array"),"data"in oe&&(b(Fe===null||Array.isArray(Fe)||n(Fe)||Nr(Fe),"invalid data for buffer"),Fe=oe.data),"usage"in oe&&(b.parameter(oe.usage,qc,"invalid buffer usage"),ne=qc[oe.usage]),"type"in oe&&(b.parameter(oe.type,bs,"invalid buffer type"),de=bs[oe.type]),"dimension"in oe&&(b.type(oe.dimension,"number","invalid dimension"),Ae=oe.dimension|0),"length"in oe&&(b.nni(Se,"buffer length must be a nonnegative integer"),Se=oe.length|0)),ae.bind(),Fe?ve(ae,Fe,ne,de,Ae,Re):(Se&&h.bufferData(ae.type,Se,ne),ae.dtype=de||S1,ae.usage=ne,ae.dimension=Ae,ae.byteLength=Se),O.profile&&(ae.stats.size=ae.byteLength*Ro[ae.dtype]),ke}function Te(oe,ne){b(ne+oe.byteLength<=ae.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+oe.byteLength+" starting from offset "+ne+" to a buffer of size "+ae.byteLength),h.bufferSubData(ae.type,ne,oe)}function Ue(oe,ne){var Fe=(ne||0)|0,Se;if(ae.bind(),n(oe)||oe instanceof ArrayBuffer)Te(oe,Fe);else if(Array.isArray(oe)){if(oe.length>0)if(typeof oe[0]=="number"){var de=Yt.allocType(ae.dtype,oe.length);Mg(de,oe),Te(de,Fe),Yt.freeType(de)}else if(Array.isArray(oe[0])||n(oe[0])){Se=Cg(oe);var Ae=$1(oe,Se,ae.dtype);Te(Ae,Fe),Yt.freeType(Ae)}else b.raise("invalid buffer data")}else if(Nr(oe)){Se=oe.shape;var be=oe.stride,tt=0,Ke=0,Pe=0,Ne=0;Se.length===1?(tt=Se[0],Ke=1,Pe=be[0],Ne=0):Se.length===2?(tt=Se[0],Ke=Se[1],Pe=be[0],Ne=be[1]):b.raise("invalid shape");var We=Array.isArray(oe.data)?ae.dtype:Zc(oe.data),nt=Yt.allocType(We,tt*Ke);Ng(nt,oe.data,tt,Ke,Pe,Ne,oe.offset),Te(nt,Fe),Yt.freeType(nt)}else b.raise("invalid data for buffer subdata");return ke}return he||ke(B),ke._reglType="buffer",ke._buffer=ae,ke.subdata=Ue,O.profile&&(ke.stats=ae.stats),ke.destroy=function(){$e(ae)},ke}function pe(){sr(W).forEach(function(B){B.buffer=h.createBuffer(),h.bindBuffer(B.type,B.buffer),h.bufferData(B.type,B.persistentData||B.byteLength,B.usage)})}return O.profile&&(S.getTotalBufferSize=function(){var B=0;return Object.keys(W).forEach(function(Q){B+=W[Q].stats.size}),B}),{create:fe,createStream:ce,destroyStream:me,clear:function(){sr(W).forEach($e),ue.forEach($e)},getBuffer:function(B){return B&&B._buffer instanceof K?B._buffer:null},restore:pe,_initBuffer:ve}}var Vb=0,jb=0,Ub=1,Hb=1,Xb=4,Wb=4,Oo={points:Vb,point:jb,lines:Ub,line:Hb,triangles:Xb,triangle:Wb,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Yb=0,qb=1,Za=4,Zb=5120,yi=5121,Rg=5122,wi=5123,Og=5124,Ts=5125,b1=34963,Qb=35040,Kb=35044;function Jb(h,S,O,Y){var re={},W=0,K={uint8:yi,uint16:wi};S.oes_element_index_uint&&(K.uint32=Ts);function ue(pe){this.id=W++,re[this.id]=this,this.buffer=pe,this.primType=Za,this.vertCount=0,this.type=0}ue.prototype.bind=function(){this.buffer.bind()};var ce=[];function me(pe){var B=ce.pop();return B||(B=new ue(O.create(null,b1,!0,!1)._buffer)),ve(B,pe,Qb,-1,-1,0,0),B}function ge(pe){ce.push(pe)}function ve(pe,B,Q,he,Re,ae,ke){pe.buffer.bind();var Te;if(B){var Ue=ke;!ke&&(!n(B)||Nr(B)&&!n(B.data))&&(Ue=S.oes_element_index_uint?Ts:wi),O._initBuffer(pe.buffer,B,Q,Ue,3)}else h.bufferData(b1,ae,Q),pe.buffer.dtype=Te||yi,pe.buffer.usage=Q,pe.buffer.dimension=3,pe.buffer.byteLength=ae;if(Te=ke,!ke){switch(pe.buffer.dtype){case yi:case Zb:Te=yi;break;case wi:case Rg:Te=wi;break;case Ts:case Og:Te=Ts;break;default:b.raise("unsupported type for element array")}pe.buffer.dtype=Te}pe.type=Te,b(Te!==Ts||!!S.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var oe=Re;oe<0&&(oe=pe.buffer.byteLength,Te===wi?oe>>=1:Te===Ts&&(oe>>=2)),pe.vertCount=oe;var ne=he;if(he<0){ne=Za;var Fe=pe.buffer.dimension;Fe===1&&(ne=Yb),Fe===2&&(ne=qb),Fe===3&&(ne=Za)}pe.primType=ne}function $e(pe){Y.elementsCount--,b(pe.buffer!==null,"must not double destroy elements"),delete re[pe.id],pe.buffer.destroy(),pe.buffer=null}function fe(pe,B){var Q=O.create(null,b1,!0),he=new ue(Q._buffer);Y.elementsCount++;function Re(ae){if(!ae)Q(),he.primType=Za,he.vertCount=0,he.type=yi;else if(typeof ae=="number")Q(ae),he.primType=Za,he.vertCount=ae|0,he.type=yi;else{var ke=null,Te=Kb,Ue=-1,oe=-1,ne=0,Fe=0;Array.isArray(ae)||n(ae)||Nr(ae)?ke=ae:(b.type(ae,"object","invalid arguments for elements"),"data"in ae&&(ke=ae.data,b(Array.isArray(ke)||n(ke)||Nr(ke),"invalid data for element buffer")),"usage"in ae&&(b.parameter(ae.usage,qc,"invalid element buffer usage"),Te=qc[ae.usage]),"primitive"in ae&&(b.parameter(ae.primitive,Oo,"invalid element buffer primitive"),Ue=Oo[ae.primitive]),"count"in ae&&(b(typeof ae.count=="number"&&ae.count>=0,"invalid vertex count for elements"),oe=ae.count|0),"type"in ae&&(b.parameter(ae.type,K,"invalid buffer type"),Fe=K[ae.type]),"length"in ae?ne=ae.length|0:(ne=oe,Fe===wi||Fe===Rg?ne*=2:(Fe===Ts||Fe===Og)&&(ne*=4))),ve(he,ke,Te,Ue,oe,ne,Fe)}return Re}return Re(pe),Re._reglType="elements",Re._elements=he,Re.subdata=function(ae,ke){return Q.subdata(ae,ke),Re},Re.destroy=function(){$e(he)},Re}return{create:fe,createStream:me,destroyStream:ge,getElements:function(pe){return typeof pe=="function"&&pe._elements instanceof ue?pe._elements:null},clear:function(){sr(re).forEach($e)}}}var Lg=new Float32Array(1),eT=new Uint32Array(Lg.buffer),tT=5123;function Fg(h){for(var S=Yt.allocType(tT,h.length),O=0;O<h.length;++O)if(isNaN(h[O]))S[O]=65535;else if(h[O]===1/0)S[O]=31744;else if(h[O]===-1/0)S[O]=64512;else{Lg[0]=h[O];var Y=eT[0],re=Y>>>31<<15,W=(Y<<1>>>24)-127,K=Y>>13&1023;if(W<-24)S[O]=re;else if(W<-14){var ue=-14-W;S[O]=re+(K+1024>>ue)}else W>15?S[O]=re+31744:S[O]=re+(W+15<<10)+K}return S}function Nt(h){return Array.isArray(h)||n(h)}var Dg=function(h){return!(h&h-1)&&!!h},nT=34467,Hr=3553,T1=34067,Qc=34069,Ps=6408,P1=6406,Kc=6407,Qa=6409,Jc=6410,Ig=32854,C1=32855,zg=36194,rT=32819,oT=32820,sT=33635,iT=34042,k1=6402,eu=34041,M1=35904,N1=35906,xi=36193,R1=33776,O1=33777,L1=33778,F1=33779,Bg=35986,Gg=35987,Vg=34798,jg=35840,Ug=35841,Hg=35842,Xg=35843,Wg=36196,Ei=5121,D1=5123,I1=5125,Ka=5126,aT=10242,lT=10243,cT=10497,z1=33071,uT=33648,fT=10240,dT=10241,B1=9728,hT=9729,G1=9984,Yg=9985,qg=9986,V1=9987,pT=33170,tu=4352,mT=4353,vT=4354,gT=34046,yT=3317,wT=37440,xT=37441,ET=37443,Zg=37444,Ja=33984,_T=[G1,qg,Yg,V1],nu=[0,Qa,Jc,Kc,Ps],yr={};yr[Qa]=yr[P1]=yr[k1]=1,yr[eu]=yr[Jc]=2,yr[Kc]=yr[M1]=3,yr[Ps]=yr[N1]=4;function _i(h){return"[object "+h+"]"}var Qg=_i("HTMLCanvasElement"),Kg=_i("OffscreenCanvas"),Jg=_i("CanvasRenderingContext2D"),e2=_i("ImageBitmap"),t2=_i("HTMLImageElement"),n2=_i("HTMLVideoElement"),$T=Object.keys(_1).concat([Qg,Kg,Jg,e2,t2,n2]),$i=[];$i[Ei]=1,$i[Ka]=4,$i[xi]=2,$i[D1]=2,$i[I1]=4;var mn=[];mn[Ig]=2,mn[C1]=2,mn[zg]=2,mn[eu]=4,mn[R1]=.5,mn[O1]=.5,mn[L1]=1,mn[F1]=1,mn[Bg]=.5,mn[Gg]=1,mn[Vg]=1,mn[jg]=.5,mn[Ug]=.25,mn[Hg]=.5,mn[Xg]=.25,mn[Wg]=.5;function r2(h){return Array.isArray(h)&&(h.length===0||typeof h[0]=="number")}function o2(h){if(!Array.isArray(h))return!1;var S=h.length;return!(S===0||!Nt(h[0]))}function Cs(h){return Object.prototype.toString.call(h)}function s2(h){return Cs(h)===Qg}function i2(h){return Cs(h)===Kg}function ST(h){return Cs(h)===Jg}function AT(h){return Cs(h)===e2}function bT(h){return Cs(h)===t2}function TT(h){return Cs(h)===n2}function j1(h){if(!h)return!1;var S=Cs(h);return $T.indexOf(S)>=0?!0:r2(h)||o2(h)||Nr(h)}function a2(h){return _1[Object.prototype.toString.call(h)]|0}function PT(h,S){var O=S.length;switch(h.type){case Ei:case D1:case I1:case Ka:var Y=Yt.allocType(h.type,O);Y.set(S),h.data=Y;break;case xi:h.data=Fg(S);break;default:b.raise("unsupported texture type, must specify a typed array")}}function l2(h,S){return Yt.allocType(h.type===xi?Ka:h.type,S)}function c2(h,S){h.type===xi?(h.data=Fg(S),Yt.freeType(S)):h.data=S}function CT(h,S,O,Y,re,W){for(var K=h.width,ue=h.height,ce=h.channels,me=K*ue*ce,ge=l2(h,me),ve=0,$e=0;$e<ue;++$e)for(var fe=0;fe<K;++fe)for(var pe=0;pe<ce;++pe)ge[ve++]=S[O*fe+Y*$e+re*pe+W];c2(h,ge)}function ru(h,S,O,Y,re,W){var K;if(typeof mn[h]<"u"?K=mn[h]:K=yr[h]*$i[S],W&&(K*=6),re){for(var ue=0,ce=O;ce>=1;)ue+=K*ce*ce,ce/=2;return ue}else return K*O*Y}function kT(h,S,O,Y,re,W,K){var ue={"don't care":tu,"dont care":tu,nice:vT,fast:mT},ce={repeat:cT,clamp:z1,mirror:uT},me={nearest:B1,linear:hT},ge=r({mipmap:V1,"nearest mipmap nearest":G1,"linear mipmap nearest":Yg,"nearest mipmap linear":qg,"linear mipmap linear":V1},me),ve={none:0,browser:Zg},$e={uint8:Ei,rgba4:rT,rgb565:sT,"rgb5 a1":oT},fe={alpha:P1,luminance:Qa,"luminance alpha":Jc,rgb:Kc,rgba:Ps,rgba4:Ig,"rgb5 a1":C1,rgb565:zg},pe={};S.ext_srgb&&(fe.srgb=M1,fe.srgba=N1),S.oes_texture_float&&($e.float32=$e.float=Ka),S.oes_texture_half_float&&($e.float16=$e["half float"]=xi),S.webgl_depth_texture&&(r(fe,{depth:k1,"depth stencil":eu}),r($e,{uint16:D1,uint32:I1,"depth stencil":iT})),S.webgl_compressed_texture_s3tc&&r(pe,{"rgb s3tc dxt1":R1,"rgba s3tc dxt1":O1,"rgba s3tc dxt3":L1,"rgba s3tc dxt5":F1}),S.webgl_compressed_texture_atc&&r(pe,{"rgb atc":Bg,"rgba atc explicit alpha":Gg,"rgba atc interpolated alpha":Vg}),S.webgl_compressed_texture_pvrtc&&r(pe,{"rgb pvrtc 4bppv1":jg,"rgb pvrtc 2bppv1":Ug,"rgba pvrtc 4bppv1":Hg,"rgba pvrtc 2bppv1":Xg}),S.webgl_compressed_texture_etc1&&(pe["rgb etc1"]=Wg);var B=Array.prototype.slice.call(h.getParameter(nT));Object.keys(pe).forEach(function(M){var q=pe[M];B.indexOf(q)>=0&&(fe[M]=q)});var Q=Object.keys(fe);O.textureFormats=Q;var he=[];Object.keys(fe).forEach(function(M){var q=fe[M];he[q]=M});var Re=[];Object.keys($e).forEach(function(M){var q=$e[M];Re[q]=M});var ae=[];Object.keys(me).forEach(function(M){var q=me[M];ae[q]=M});var ke=[];Object.keys(ge).forEach(function(M){var q=ge[M];ke[q]=M});var Te=[];Object.keys(ce).forEach(function(M){var q=ce[M];Te[q]=M});var Ue=Q.reduce(function(M,q){var H=fe[q];return H===Qa||H===P1||H===Qa||H===Jc||H===k1||H===eu||S.ext_srgb&&(H===M1||H===N1)?M[H]=H:H===C1||q.indexOf("rgba")>=0?M[H]=Ps:M[H]=Kc,M},{});function oe(){this.internalformat=Ps,this.format=Ps,this.type=Ei,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zg,this.width=0,this.height=0,this.channels=0}function ne(M,q){M.internalformat=q.internalformat,M.format=q.format,M.type=q.type,M.compressed=q.compressed,M.premultiplyAlpha=q.premultiplyAlpha,M.flipY=q.flipY,M.unpackAlignment=q.unpackAlignment,M.colorSpace=q.colorSpace,M.width=q.width,M.height=q.height,M.channels=q.channels}function Fe(M,q){if(!(typeof q!="object"||!q)){if("premultiplyAlpha"in q&&(b.type(q.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),M.premultiplyAlpha=q.premultiplyAlpha),"flipY"in q&&(b.type(q.flipY,"boolean","invalid texture flip"),M.flipY=q.flipY),"alignment"in q&&(b.oneOf(q.alignment,[1,2,4,8],"invalid texture unpack alignment"),M.unpackAlignment=q.alignment),"colorSpace"in q&&(b.parameter(q.colorSpace,ve,"invalid colorSpace"),M.colorSpace=ve[q.colorSpace]),"type"in q){var H=q.type;b(S.oes_texture_float||!(H==="float"||H==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),b(S.oes_texture_half_float||!(H==="half float"||H==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),b(S.webgl_depth_texture||!(H==="uint16"||H==="uint32"||H==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(H,$e,"invalid texture type"),M.type=$e[H]}var Le=M.width,ct=M.height,T=M.channels,_=!1;"shape"in q?(b(Array.isArray(q.shape)&&q.shape.length>=2,"shape must be an array"),Le=q.shape[0],ct=q.shape[1],q.shape.length===3&&(T=q.shape[2],b(T>0&&T<=4,"invalid number of channels"),_=!0),b(Le>=0&&Le<=O.maxTextureSize,"invalid width"),b(ct>=0&&ct<=O.maxTextureSize,"invalid height")):("radius"in q&&(Le=ct=q.radius,b(Le>=0&&Le<=O.maxTextureSize,"invalid radius")),"width"in q&&(Le=q.width,b(Le>=0&&Le<=O.maxTextureSize,"invalid width")),"height"in q&&(ct=q.height,b(ct>=0&&ct<=O.maxTextureSize,"invalid height")),"channels"in q&&(T=q.channels,b(T>0&&T<=4,"invalid number of channels"),_=!0)),M.width=Le|0,M.height=ct|0,M.channels=T|0;var L=!1;if("format"in q){var z=q.format;b(S.webgl_depth_texture||!(z==="depth"||z==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),b.parameter(z,fe,"invalid texture format");var G=M.internalformat=fe[z];M.format=Ue[G],z in $e&&("type"in q||(M.type=$e[z])),z in pe&&(M.compressed=!0),L=!0}!_&&L?M.channels=yr[M.format]:_&&!L?M.channels!==nu[M.format]&&(M.format=M.internalformat=nu[M.channels]):L&&_&&b(M.channels===yr[M.format],"number of channels inconsistent with specified format")}}function Se(M){h.pixelStorei(wT,M.flipY),h.pixelStorei(xT,M.premultiplyAlpha),h.pixelStorei(ET,M.colorSpace),h.pixelStorei(yT,M.unpackAlignment)}function de(){oe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ae(M,q){var H=null;if(j1(q)?H=q:q&&(b.type(q,"object","invalid pixel data type"),Fe(M,q),"x"in q&&(M.xOffset=q.x|0),"y"in q&&(M.yOffset=q.y|0),j1(q.data)&&(H=q.data)),b(!M.compressed||H instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),q.copy){b(!H,"can not specify copy and data field for the same texture");var Le=re.viewportWidth,ct=re.viewportHeight;M.width=M.width||Le-M.xOffset,M.height=M.height||ct-M.yOffset,M.needsCopy=!0,b(M.xOffset>=0&&M.xOffset<Le&&M.yOffset>=0&&M.yOffset<ct&&M.width>0&&M.width<=Le&&M.height>0&&M.height<=ct,"copy texture read out of bounds")}else if(!H)M.width=M.width||1,M.height=M.height||1,M.channels=M.channels||4;else if(n(H))M.channels=M.channels||4,M.data=H,!("type"in q)&&M.type===Ei&&(M.type=a2(H));else if(r2(H))M.channels=M.channels||4,PT(M,H),M.alignment=1,M.needsFree=!0;else if(Nr(H)){var T=H.data;!Array.isArray(T)&&M.type===Ei&&(M.type=a2(T));var _=H.shape,L=H.stride,z,G,D,F,I,P;_.length===3?(D=_[2],P=L[2]):(b(_.length===2,"invalid ndarray pixel data, must be 2 or 3D"),D=1,P=1),z=_[0],G=_[1],F=L[0],I=L[1],M.alignment=1,M.width=z,M.height=G,M.channels=D,M.format=M.internalformat=nu[D],M.needsFree=!0,CT(M,T,F,I,P,H.offset)}else if(s2(H)||i2(H)||ST(H))s2(H)||i2(H)?M.element=H:M.element=H.canvas,M.width=M.element.width,M.height=M.element.height,M.channels=4;else if(AT(H))M.element=H,M.width=H.width,M.height=H.height,M.channels=4;else if(bT(H))M.element=H,M.width=H.naturalWidth,M.height=H.naturalHeight,M.channels=4;else if(TT(H))M.element=H,M.width=H.videoWidth,M.height=H.videoHeight,M.channels=4;else if(o2(H)){var R=M.width||H[0].length,C=M.height||H.length,U=M.channels;Nt(H[0][0])?U=U||H[0][0].length:U=U||1;for(var V=Yc.shape(H),te=1,se=0;se<V.length;++se)te*=V[se];var Ee=l2(M,te);Yc.flatten(H,V,"",Ee),c2(M,Ee),M.alignment=1,M.width=R,M.height=C,M.channels=U,M.format=M.internalformat=nu[U],M.needsFree=!0}M.type===Ka?b(O.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):M.type===xi&&b(O.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function be(M,q,H){var Le=M.element,ct=M.data,T=M.internalformat,_=M.format,L=M.type,z=M.width,G=M.height;Se(M),Le?h.texImage2D(q,H,_,_,L,Le):M.compressed?h.compressedTexImage2D(q,H,T,z,G,0,ct):M.needsCopy?(Y(),h.copyTexImage2D(q,H,_,M.xOffset,M.yOffset,z,G,0)):h.texImage2D(q,H,_,z,G,0,_,L,ct||null)}function tt(M,q,H,Le,ct){var T=M.element,_=M.data,L=M.internalformat,z=M.format,G=M.type,D=M.width,F=M.height;Se(M),T?h.texSubImage2D(q,ct,H,Le,z,G,T):M.compressed?h.compressedTexSubImage2D(q,ct,H,Le,L,D,F,_):M.needsCopy?(Y(),h.copyTexSubImage2D(q,ct,H,Le,M.xOffset,M.yOffset,D,F)):h.texSubImage2D(q,ct,H,Le,D,F,z,G,_)}var Ke=[];function Pe(){return Ke.pop()||new de}function Ne(M){M.needsFree&&Yt.freeType(M.data),de.call(M),Ke.push(M)}function We(){oe.call(this),this.genMipmaps=!1,this.mipmapHint=tu,this.mipmask=0,this.images=Array(16)}function nt(M,q,H){var Le=M.images[0]=Pe();M.mipmask=1,Le.width=M.width=q,Le.height=M.height=H,Le.channels=M.channels=4}function dt(M,q){var H=null;if(j1(q))H=M.images[0]=Pe(),ne(H,M),Ae(H,q),M.mipmask=1;else if(Fe(M,q),Array.isArray(q.mipmap))for(var Le=q.mipmap,ct=0;ct<Le.length;++ct)H=M.images[ct]=Pe(),ne(H,M),H.width>>=ct,H.height>>=ct,Ae(H,Le[ct]),M.mipmask|=1<<ct;else H=M.images[0]=Pe(),ne(H,M),Ae(H,q),M.mipmask=1;ne(M,M.images[0]),M.compressed&&(M.internalformat===R1||M.internalformat===O1||M.internalformat===L1||M.internalformat===F1)&&b(M.width%4===0&&M.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Rt(M,q){for(var H=M.images,Le=0;Le<H.length;++Le){if(!H[Le])return;be(H[Le],q,Le)}}var Lt=[];function pt(){var M=Lt.pop()||new We;oe.call(M),M.mipmask=0;for(var q=0;q<16;++q)M.images[q]=null;return M}function Kt(M){for(var q=M.images,H=0;H<q.length;++H)q[H]&&Ne(q[H]),q[H]=null;Lt.push(M)}function Pt(){this.minFilter=B1,this.magFilter=B1,this.wrapS=z1,this.wrapT=z1,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=tu}function Zt(M,q){if("min"in q){var H=q.min;b.parameter(H,ge),M.minFilter=ge[H],_T.indexOf(M.minFilter)>=0&&!("faces"in q)&&(M.genMipmaps=!0)}if("mag"in q){var Le=q.mag;b.parameter(Le,me),M.magFilter=me[Le]}var ct=M.wrapS,T=M.wrapT;if("wrap"in q){var _=q.wrap;typeof _=="string"?(b.parameter(_,ce),ct=T=ce[_]):Array.isArray(_)&&(b.parameter(_[0],ce),b.parameter(_[1],ce),ct=ce[_[0]],T=ce[_[1]])}else{if("wrapS"in q){var L=q.wrapS;b.parameter(L,ce),ct=ce[L]}if("wrapT"in q){var z=q.wrapT;b.parameter(z,ce),T=ce[z]}}if(M.wrapS=ct,M.wrapT=T,"anisotropic"in q){var G=q.anisotropic;b(typeof G=="number"&&G>=1&&G<=O.maxAnisotropic,"aniso samples must be between 1 and "),M.anisotropic=q.anisotropic}if("mipmap"in q){var D=!1;switch(typeof q.mipmap){case"string":b.parameter(q.mipmap,ue,"invalid mipmap hint"),M.mipmapHint=ue[q.mipmap],M.genMipmaps=!0,D=!0;break;case"boolean":D=M.genMipmaps=q.mipmap;break;case"object":b(Array.isArray(q.mipmap),"invalid mipmap type"),M.genMipmaps=!1,D=!0;break;default:b.raise("invalid mipmap type")}D&&!("min"in q)&&(M.minFilter=G1)}}function Jt(M,q){h.texParameteri(q,dT,M.minFilter),h.texParameteri(q,fT,M.magFilter),h.texParameteri(q,aT,M.wrapS),h.texParameteri(q,lT,M.wrapT),S.ext_texture_filter_anisotropic&&h.texParameteri(q,gT,M.anisotropic),M.genMipmaps&&(h.hint(pT,M.mipmapHint),h.generateMipmap(q))}var en=0,cn={},vn=O.maxTextureUnits,Vt=Array(vn).map(function(){return null});function it(M){oe.call(this),this.mipmask=0,this.internalformat=Ps,this.id=en++,this.refCount=1,this.target=M,this.texture=h.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Pt,K.profile&&(this.stats={size:0})}function gn(M){h.activeTexture(Ja),h.bindTexture(M.target,M.texture)}function xt(){var M=Vt[0];M?h.bindTexture(M.target,M.texture):h.bindTexture(Hr,null)}function Xe(M){var q=M.texture;b(q,"must not double destroy texture");var H=M.unit,Le=M.target;H>=0&&(h.activeTexture(Ja+H),h.bindTexture(Le,null),Vt[H]=null),h.deleteTexture(q),M.texture=null,M.params=null,M.pixels=null,M.refCount=0,delete cn[M.id],W.textureCount--}r(it.prototype,{bind:function(){var M=this;M.bindCount+=1;var q=M.unit;if(q<0){for(var H=0;H<vn;++H){var Le=Vt[H];if(Le){if(Le.bindCount>0)continue;Le.unit=-1}Vt[H]=M,q=H;break}q>=vn&&b.raise("insufficient number of texture units"),K.profile&&W.maxTextureUnits<q+1&&(W.maxTextureUnits=q+1),M.unit=q,h.activeTexture(Ja+q),h.bindTexture(M.target,M.texture)}return q},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Xe(this)}});function ht(M,q){var H=new it(Hr);cn[H.id]=H,W.textureCount++;function Le(_,L){var z=H.texInfo;Pt.call(z);var G=pt();return typeof _=="number"?typeof L=="number"?nt(G,_|0,L|0):nt(G,_|0,_|0):_?(b.type(_,"object","invalid arguments to regl.texture"),Zt(z,_),dt(G,_)):nt(G,1,1),z.genMipmaps&&(G.mipmask=(G.width<<1)-1),H.mipmask=G.mipmask,ne(H,G),b.texture2D(z,G,O),H.internalformat=G.internalformat,Le.width=G.width,Le.height=G.height,gn(H),Rt(G,Hr),Jt(z,Hr),xt(),Kt(G),K.profile&&(H.stats.size=ru(H.internalformat,H.type,G.width,G.height,z.genMipmaps,!1)),Le.format=he[H.internalformat],Le.type=Re[H.type],Le.mag=ae[z.magFilter],Le.min=ke[z.minFilter],Le.wrapS=Te[z.wrapS],Le.wrapT=Te[z.wrapT],Le}function ct(_,L,z,G){b(!!_,"must specify image data");var D=L|0,F=z|0,I=G|0,P=Pe();return ne(P,H),P.width=0,P.height=0,Ae(P,_),P.width=P.width||(H.width>>I)-D,P.height=P.height||(H.height>>I)-F,b(H.type===P.type&&H.format===P.format&&H.internalformat===P.internalformat,"incompatible format for texture.subimage"),b(D>=0&&F>=0&&D+P.width<=H.width&&F+P.height<=H.height,"texture.subimage write out of bounds"),b(H.mipmask&1<<I,"missing mipmap data"),b(P.data||P.element||P.needsCopy,"missing image data"),gn(H),tt(P,Hr,D,F,I),xt(),Ne(P),Le}function T(_,L){var z=_|0,G=L|0||z;if(z===H.width&&G===H.height)return Le;Le.width=H.width=z,Le.height=H.height=G,gn(H);for(var D=0;H.mipmask>>D;++D){var F=z>>D,I=G>>D;if(!F||!I)break;h.texImage2D(Hr,D,H.format,F,I,0,H.format,H.type,null)}return xt(),K.profile&&(H.stats.size=ru(H.internalformat,H.type,z,G,!1,!1)),Le}return Le(M,q),Le.subimage=ct,Le.resize=T,Le._reglType="texture2d",Le._texture=H,K.profile&&(Le.stats=H.stats),Le.destroy=function(){H.decRef()},Le}function vt(M,q,H,Le,ct,T){var _=new it(T1);cn[_.id]=_,W.cubeCount++;var L=new Array(6);function z(F,I,P,R,C,U){var V,te=_.texInfo;for(Pt.call(te),V=0;V<6;++V)L[V]=pt();if(typeof F=="number"||!F){var se=F|0||1;for(V=0;V<6;++V)nt(L[V],se,se)}else if(typeof F=="object")if(I)dt(L[0],F),dt(L[1],I),dt(L[2],P),dt(L[3],R),dt(L[4],C),dt(L[5],U);else if(Zt(te,F),Fe(_,F),"faces"in F){var Ee=F.faces;for(b(Array.isArray(Ee)&&Ee.length===6,"cube faces must be a length 6 array"),V=0;V<6;++V)b(typeof Ee[V]=="object"&&!!Ee[V],"invalid input for cube map face"),ne(L[V],_),dt(L[V],Ee[V])}else for(V=0;V<6;++V)dt(L[V],F);else b.raise("invalid arguments to cube map");for(ne(_,L[0]),b.optional(function(){O.npotTextureCube||b(Dg(_.width)&&Dg(_.height),"your browser does not support non power or two texture dimensions")}),te.genMipmaps?_.mipmask=(L[0].width<<1)-1:_.mipmask=L[0].mipmask,b.textureCube(_,te,L,O),_.internalformat=L[0].internalformat,z.width=L[0].width,z.height=L[0].height,gn(_),V=0;V<6;++V)Rt(L[V],Qc+V);for(Jt(te,T1),xt(),K.profile&&(_.stats.size=ru(_.internalformat,_.type,z.width,z.height,te.genMipmaps,!0)),z.format=he[_.internalformat],z.type=Re[_.type],z.mag=ae[te.magFilter],z.min=ke[te.minFilter],z.wrapS=Te[te.wrapS],z.wrapT=Te[te.wrapT],V=0;V<6;++V)Kt(L[V]);return z}function G(F,I,P,R,C){b(!!I,"must specify image data"),b(typeof F=="number"&&F===(F|0)&&F>=0&&F<6,"invalid face");var U=P|0,V=R|0,te=C|0,se=Pe();return ne(se,_),se.width=0,se.height=0,Ae(se,I),se.width=se.width||(_.width>>te)-U,se.height=se.height||(_.height>>te)-V,b(_.type===se.type&&_.format===se.format&&_.internalformat===se.internalformat,"incompatible format for texture.subimage"),b(U>=0&&V>=0&&U+se.width<=_.width&&V+se.height<=_.height,"texture.subimage write out of bounds"),b(_.mipmask&1<<te,"missing mipmap data"),b(se.data||se.element||se.needsCopy,"missing image data"),gn(_),tt(se,Qc+F,U,V,te),xt(),Ne(se),z}function D(F){var I=F|0;if(I!==_.width){z.width=_.width=I,z.height=_.height=I,gn(_);for(var P=0;P<6;++P)for(var R=0;_.mipmask>>R;++R)h.texImage2D(Qc+P,R,_.format,I>>R,I>>R,0,_.format,_.type,null);return xt(),K.profile&&(_.stats.size=ru(_.internalformat,_.type,z.width,z.height,!1,!0)),z}}return z(M,q,H,Le,ct,T),z.subimage=G,z.resize=D,z._reglType="textureCube",z._texture=_,K.profile&&(z.stats=_.stats),z.destroy=function(){_.decRef()},z}function jt(){for(var M=0;M<vn;++M)h.activeTexture(Ja+M),h.bindTexture(Hr,null),Vt[M]=null;sr(cn).forEach(Xe),W.cubeCount=0,W.textureCount=0}K.profile&&(W.getTotalTextureSize=function(){var M=0;return Object.keys(cn).forEach(function(q){M+=cn[q].stats.size}),M});function Wr(){for(var M=0;M<vn;++M){var q=Vt[M];q&&(q.bindCount=0,q.unit=-1,Vt[M]=null)}sr(cn).forEach(function(H){H.texture=h.createTexture(),h.bindTexture(H.target,H.texture);for(var Le=0;Le<32;++Le)if(H.mipmask&1<<Le)if(H.target===Hr)h.texImage2D(Hr,Le,H.internalformat,H.width>>Le,H.height>>Le,0,H.internalformat,H.type,null);else for(var ct=0;ct<6;++ct)h.texImage2D(Qc+ct,Le,H.internalformat,H.width>>Le,H.height>>Le,0,H.internalformat,H.type,null);Jt(H.texInfo,H.target)})}function Fs(){for(var M=0;M<vn;++M){var q=Vt[M];q&&(q.bindCount=0,q.unit=-1,Vt[M]=null),h.activeTexture(Ja+M),h.bindTexture(Hr,null),h.bindTexture(T1,null)}}return{create2D:ht,createCube:vt,clear:jt,getTexture:function(M){return null},restore:Wr,refresh:Fs}}var Lo=36161,ou=32854,u2=32855,f2=36194,d2=33189,h2=36168,p2=34041,m2=35907,v2=34836,g2=34842,y2=34843,Rr=[];Rr[ou]=2,Rr[u2]=2,Rr[f2]=2,Rr[d2]=2,Rr[h2]=1,Rr[p2]=4,Rr[m2]=4,Rr[v2]=16,Rr[g2]=8,Rr[y2]=6;function w2(h,S,O){return Rr[h]*S*O}var MT=function(h,S,O,Y,re){var W={rgba4:ou,rgb565:f2,"rgb5 a1":u2,depth:d2,stencil:h2,"depth stencil":p2};S.ext_srgb&&(W.srgba=m2),S.ext_color_buffer_half_float&&(W.rgba16f=g2,W.rgb16f=y2),S.webgl_color_buffer_float&&(W.rgba32f=v2);var K=[];Object.keys(W).forEach(function(fe){var pe=W[fe];K[pe]=fe});var ue=0,ce={};function me(fe){this.id=ue++,this.refCount=1,this.renderbuffer=fe,this.format=ou,this.width=0,this.height=0,re.profile&&(this.stats={size:0})}me.prototype.decRef=function(){--this.refCount<=0&&ge(this)};function ge(fe){var pe=fe.renderbuffer;b(pe,"must not double destroy renderbuffer"),h.bindRenderbuffer(Lo,null),h.deleteRenderbuffer(pe),fe.renderbuffer=null,fe.refCount=0,delete ce[fe.id],Y.renderbufferCount--}function ve(fe,pe){var B=new me(h.createRenderbuffer());ce[B.id]=B,Y.renderbufferCount++;function Q(Re,ae){var ke=0,Te=0,Ue=ou;if(typeof Re=="object"&&Re){var oe=Re;if("shape"in oe){var ne=oe.shape;b(Array.isArray(ne)&&ne.length>=2,"invalid renderbuffer shape"),ke=ne[0]|0,Te=ne[1]|0}else"radius"in oe&&(ke=Te=oe.radius|0),"width"in oe&&(ke=oe.width|0),"height"in oe&&(Te=oe.height|0);"format"in oe&&(b.parameter(oe.format,W,"invalid renderbuffer format"),Ue=W[oe.format])}else typeof Re=="number"?(ke=Re|0,typeof ae=="number"?Te=ae|0:Te=ke):Re?b.raise("invalid arguments to renderbuffer constructor"):ke=Te=1;if(b(ke>0&&Te>0&&ke<=O.maxRenderbufferSize&&Te<=O.maxRenderbufferSize,"invalid renderbuffer size"),!(ke===B.width&&Te===B.height&&Ue===B.format))return Q.width=B.width=ke,Q.height=B.height=Te,B.format=Ue,h.bindRenderbuffer(Lo,B.renderbuffer),h.renderbufferStorage(Lo,Ue,ke,Te),b(h.getError()===0,"invalid render buffer format"),re.profile&&(B.stats.size=w2(B.format,B.width,B.height)),Q.format=K[B.format],Q}function he(Re,ae){var ke=Re|0,Te=ae|0||ke;return ke===B.width&&Te===B.height||(b(ke>0&&Te>0&&ke<=O.maxRenderbufferSize&&Te<=O.maxRenderbufferSize,"invalid renderbuffer size"),Q.width=B.width=ke,Q.height=B.height=Te,h.bindRenderbuffer(Lo,B.renderbuffer),h.renderbufferStorage(Lo,B.format,ke,Te),b(h.getError()===0,"invalid render buffer format"),re.profile&&(B.stats.size=w2(B.format,B.width,B.height))),Q}return Q(fe,pe),Q.resize=he,Q._reglType="renderbuffer",Q._renderbuffer=B,re.profile&&(Q.stats=B.stats),Q.destroy=function(){B.decRef()},Q}re.profile&&(Y.getTotalRenderbufferSize=function(){var fe=0;return Object.keys(ce).forEach(function(pe){fe+=ce[pe].stats.size}),fe});function $e(){sr(ce).forEach(function(fe){fe.renderbuffer=h.createRenderbuffer(),h.bindRenderbuffer(Lo,fe.renderbuffer),h.renderbufferStorage(Lo,fe.format,fe.width,fe.height)}),h.bindRenderbuffer(Lo,null)}return{create:ve,clear:function(){sr(ce).forEach(ge)},restore:$e}},co=36160,U1=36161,ks=3553,su=34069,x2=36064,E2=36096,_2=36128,$2=33306,S2=36053,NT=36054,RT=36055,OT=36057,LT=36061,FT=36193,DT=5121,IT=5126,A2=6407,b2=6408,zT=6402,BT=[A2,b2],H1=[];H1[b2]=4,H1[A2]=3;var iu=[];iu[DT]=1,iu[IT]=4,iu[FT]=2;var GT=32854,VT=32855,jT=36194,UT=33189,HT=36168,T2=34041,XT=35907,WT=34836,YT=34842,qT=34843,ZT=[GT,VT,jT,XT,YT,qT,WT],Si={};Si[S2]="complete",Si[NT]="incomplete attachment",Si[OT]="incomplete dimensions",Si[RT]="incomplete, missing attachment",Si[LT]="unsupported";function QT(h,S,O,Y,re,W){var K={cur:null,next:null,dirty:!1,setFBO:null},ue=["rgba"],ce=["rgba4","rgb565","rgb5 a1"];S.ext_srgb&&ce.push("srgba"),S.ext_color_buffer_half_float&&ce.push("rgba16f","rgb16f"),S.webgl_color_buffer_float&&ce.push("rgba32f");var me=["uint8"];S.oes_texture_half_float&&me.push("half float","float16"),S.oes_texture_float&&me.push("float","float32");function ge(de,Ae,be){this.target=de,this.texture=Ae,this.renderbuffer=be;var tt=0,Ke=0;Ae?(tt=Ae.width,Ke=Ae.height):be&&(tt=be.width,Ke=be.height),this.width=tt,this.height=Ke}function ve(de){de&&(de.texture&&de.texture._texture.decRef(),de.renderbuffer&&de.renderbuffer._renderbuffer.decRef())}function $e(de,Ae,be){if(de)if(de.texture){var tt=de.texture._texture,Ke=Math.max(1,tt.width),Pe=Math.max(1,tt.height);b(Ke===Ae&&Pe===be,"inconsistent width/height for supplied texture"),tt.refCount+=1}else{var Ne=de.renderbuffer._renderbuffer;b(Ne.width===Ae&&Ne.height===be,"inconsistent width/height for renderbuffer"),Ne.refCount+=1}}function fe(de,Ae){Ae&&(Ae.texture?h.framebufferTexture2D(co,de,Ae.target,Ae.texture._texture.texture,0):h.framebufferRenderbuffer(co,de,U1,Ae.renderbuffer._renderbuffer.renderbuffer))}function pe(de){var Ae=ks,be=null,tt=null,Ke=de;typeof de=="object"&&(Ke=de.data,"target"in de&&(Ae=de.target|0)),b.type(Ke,"function","invalid attachment data");var Pe=Ke._reglType;return Pe==="texture2d"?(be=Ke,b(Ae===ks)):Pe==="textureCube"?(be=Ke,b(Ae>=su&&Ae<su+6,"invalid cube map target")):Pe==="renderbuffer"?(tt=Ke,Ae=U1):b.raise("invalid regl object for attachment"),new ge(Ae,be,tt)}function B(de,Ae,be,tt,Ke){if(be){var Pe=Y.create2D({width:de,height:Ae,format:tt,type:Ke});return Pe._texture.refCount=0,new ge(ks,Pe,null)}else{var Ne=re.create({width:de,height:Ae,format:tt});return Ne._renderbuffer.refCount=0,new ge(U1,null,Ne)}}function Q(de){return de&&(de.texture||de.renderbuffer)}function he(de,Ae,be){de&&(de.texture?de.texture.resize(Ae,be):de.renderbuffer&&de.renderbuffer.resize(Ae,be),de.width=Ae,de.height=be)}var Re=0,ae={};function ke(){this.id=Re++,ae[this.id]=this,this.framebuffer=h.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Te(de){de.colorAttachments.forEach(ve),ve(de.depthAttachment),ve(de.stencilAttachment),ve(de.depthStencilAttachment)}function Ue(de){var Ae=de.framebuffer;b(Ae,"must not double destroy framebuffer"),h.deleteFramebuffer(Ae),de.framebuffer=null,W.framebufferCount--,delete ae[de.id]}function oe(de){var Ae;h.bindFramebuffer(co,de.framebuffer);var be=de.colorAttachments;for(Ae=0;Ae<be.length;++Ae)fe(x2+Ae,be[Ae]);for(Ae=be.length;Ae<O.maxColorAttachments;++Ae)h.framebufferTexture2D(co,x2+Ae,ks,null,0);h.framebufferTexture2D(co,$2,ks,null,0),h.framebufferTexture2D(co,E2,ks,null,0),h.framebufferTexture2D(co,_2,ks,null,0),fe(E2,de.depthAttachment),fe(_2,de.stencilAttachment),fe($2,de.depthStencilAttachment);var tt=h.checkFramebufferStatus(co);!h.isContextLost()&&tt!==S2&&b.raise("framebuffer configuration not supported, status = "+Si[tt]),h.bindFramebuffer(co,K.next?K.next.framebuffer:null),K.cur=K.next,h.getError()}function ne(de,Ae){var be=new ke;W.framebufferCount++;function tt(Pe,Ne){var We;b(K.next!==be,"can not update framebuffer which is currently in use");var nt=0,dt=0,Rt=!0,Lt=!0,pt=null,Kt=!0,Pt="rgba",Zt="uint8",Jt=1,en=null,cn=null,vn=null,Vt=!1;if(typeof Pe=="number")nt=Pe|0,dt=Ne|0||nt;else if(!Pe)nt=dt=1;else{b.type(Pe,"object","invalid arguments for framebuffer");var it=Pe;if("shape"in it){var gn=it.shape;b(Array.isArray(gn)&&gn.length>=2,"invalid shape for framebuffer"),nt=gn[0],dt=gn[1]}else"radius"in it&&(nt=dt=it.radius),"width"in it&&(nt=it.width),"height"in it&&(dt=it.height);("color"in it||"colors"in it)&&(pt=it.color||it.colors,Array.isArray(pt)&&b(pt.length===1||S.webgl_draw_buffers,"multiple render targets not supported")),pt||("colorCount"in it&&(Jt=it.colorCount|0,b(Jt>0,"invalid color buffer count")),"colorTexture"in it&&(Kt=!!it.colorTexture,Pt="rgba4"),"colorType"in it&&(Zt=it.colorType,Kt?(b(S.oes_texture_float||!(Zt==="float"||Zt==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),b(S.oes_texture_half_float||!(Zt==="half float"||Zt==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Zt==="half float"||Zt==="float16"?(b(S.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Pt="rgba16f"):(Zt==="float"||Zt==="float32")&&(b(S.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Pt="rgba32f"),b.oneOf(Zt,me,"invalid color type")),"colorFormat"in it&&(Pt=it.colorFormat,ue.indexOf(Pt)>=0?Kt=!0:ce.indexOf(Pt)>=0?Kt=!1:b.optional(function(){Kt?b.oneOf(it.colorFormat,ue,"invalid color format for texture"):b.oneOf(it.colorFormat,ce,"invalid color format for renderbuffer")}))),("depthTexture"in it||"depthStencilTexture"in it)&&(Vt=!!(it.depthTexture||it.depthStencilTexture),b(!Vt||S.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in it&&(typeof it.depth=="boolean"?Rt=it.depth:(en=it.depth,Lt=!1)),"stencil"in it&&(typeof it.stencil=="boolean"?Lt=it.stencil:(cn=it.stencil,Rt=!1)),"depthStencil"in it&&(typeof it.depthStencil=="boolean"?Rt=Lt=it.depthStencil:(vn=it.depthStencil,Rt=!1,Lt=!1))}var xt=null,Xe=null,ht=null,vt=null;if(Array.isArray(pt))xt=pt.map(pe);else if(pt)xt=[pe(pt)];else for(xt=new Array(Jt),We=0;We<Jt;++We)xt[We]=B(nt,dt,Kt,Pt,Zt);b(S.webgl_draw_buffers||xt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),b(xt.length<=O.maxColorAttachments,"too many color attachments, not supported"),nt=nt||xt[0].width,dt=dt||xt[0].height,en?Xe=pe(en):Rt&&!Lt&&(Xe=B(nt,dt,Vt,"depth","uint32")),cn?ht=pe(cn):Lt&&!Rt&&(ht=B(nt,dt,!1,"stencil","uint8")),vn?vt=pe(vn):!en&&!cn&&Lt&&Rt&&(vt=B(nt,dt,Vt,"depth stencil","depth stencil")),b(!!en+!!cn+!!vn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var jt=null;for(We=0;We<xt.length;++We)if($e(xt[We],nt,dt),b(!xt[We]||xt[We].texture&&BT.indexOf(xt[We].texture._texture.format)>=0||xt[We].renderbuffer&&ZT.indexOf(xt[We].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+We+" is invalid"),xt[We]&&xt[We].texture){var Wr=H1[xt[We].texture._texture.format]*iu[xt[We].texture._texture.type];jt===null?jt=Wr:b(jt===Wr,"all color attachments much have the same number of bits per pixel.")}return $e(Xe,nt,dt),b(!Xe||Xe.texture&&Xe.texture._texture.format===zT||Xe.renderbuffer&&Xe.renderbuffer._renderbuffer.format===UT,"invalid depth attachment for framebuffer object"),$e(ht,nt,dt),b(!ht||ht.renderbuffer&&ht.renderbuffer._renderbuffer.format===HT,"invalid stencil attachment for framebuffer object"),$e(vt,nt,dt),b(!vt||vt.texture&&vt.texture._texture.format===T2||vt.renderbuffer&&vt.renderbuffer._renderbuffer.format===T2,"invalid depth-stencil attachment for framebuffer object"),Te(be),be.width=nt,be.height=dt,be.colorAttachments=xt,be.depthAttachment=Xe,be.stencilAttachment=ht,be.depthStencilAttachment=vt,tt.color=xt.map(Q),tt.depth=Q(Xe),tt.stencil=Q(ht),tt.depthStencil=Q(vt),tt.width=be.width,tt.height=be.height,oe(be),tt}function Ke(Pe,Ne){b(K.next!==be,"can not resize a framebuffer which is currently in use");var We=Math.max(Pe|0,1),nt=Math.max(Ne|0||We,1);if(We===be.width&&nt===be.height)return tt;for(var dt=be.colorAttachments,Rt=0;Rt<dt.length;++Rt)he(dt[Rt],We,nt);return he(be.depthAttachment,We,nt),he(be.stencilAttachment,We,nt),he(be.depthStencilAttachment,We,nt),be.width=tt.width=We,be.height=tt.height=nt,oe(be),tt}return tt(de,Ae),r(tt,{resize:Ke,_reglType:"framebuffer",_framebuffer:be,destroy:function(){Ue(be),Te(be)},use:function(Pe){K.setFBO({framebuffer:tt},Pe)}})}function Fe(de){var Ae=Array(6);function be(Ke){var Pe;b(Ae.indexOf(K.next)<0,"can not update framebuffer which is currently in use");var Ne={color:null},We=0,nt=null,dt="rgba",Rt="uint8",Lt=1;if(typeof Ke=="number")We=Ke|0;else if(!Ke)We=1;else{b.type(Ke,"object","invalid arguments for framebuffer");var pt=Ke;if("shape"in pt){var Kt=pt.shape;b(Array.isArray(Kt)&&Kt.length>=2,"invalid shape for framebuffer"),b(Kt[0]===Kt[1],"cube framebuffer must be square"),We=Kt[0]}else"radius"in pt&&(We=pt.radius|0),"width"in pt?(We=pt.width|0,"height"in pt&&b(pt.height===We,"must be square")):"height"in pt&&(We=pt.height|0);("color"in pt||"colors"in pt)&&(nt=pt.color||pt.colors,Array.isArray(nt)&&b(nt.length===1||S.webgl_draw_buffers,"multiple render targets not supported")),nt||("colorCount"in pt&&(Lt=pt.colorCount|0,b(Lt>0,"invalid color buffer count")),"colorType"in pt&&(b.oneOf(pt.colorType,me,"invalid color type"),Rt=pt.colorType),"colorFormat"in pt&&(dt=pt.colorFormat,b.oneOf(pt.colorFormat,ue,"invalid color format for texture"))),"depth"in pt&&(Ne.depth=pt.depth),"stencil"in pt&&(Ne.stencil=pt.stencil),"depthStencil"in pt&&(Ne.depthStencil=pt.depthStencil)}var Pt;if(nt)if(Array.isArray(nt))for(Pt=[],Pe=0;Pe<nt.length;++Pe)Pt[Pe]=nt[Pe];else Pt=[nt];else{Pt=Array(Lt);var Zt={radius:We,format:dt,type:Rt};for(Pe=0;Pe<Lt;++Pe)Pt[Pe]=Y.createCube(Zt)}for(Ne.color=Array(Pt.length),Pe=0;Pe<Pt.length;++Pe){var Jt=Pt[Pe];b(typeof Jt=="function"&&Jt._reglType==="textureCube","invalid cube map"),We=We||Jt.width,b(Jt.width===We&&Jt.height===We,"invalid cube map shape"),Ne.color[Pe]={target:su,data:Pt[Pe]}}for(Pe=0;Pe<6;++Pe){for(var en=0;en<Pt.length;++en)Ne.color[en].target=su+Pe;Pe>0&&(Ne.depth=Ae[0].depth,Ne.stencil=Ae[0].stencil,Ne.depthStencil=Ae[0].depthStencil),Ae[Pe]?Ae[Pe](Ne):Ae[Pe]=ne(Ne)}return r(be,{width:We,height:We,color:Pt})}function tt(Ke){var Pe,Ne=Ke|0;if(b(Ne>0&&Ne<=O.maxCubeMapSize,"invalid radius for cube fbo"),Ne===be.width)return be;var We=be.color;for(Pe=0;Pe<We.length;++Pe)We[Pe].resize(Ne);for(Pe=0;Pe<6;++Pe)Ae[Pe].resize(Ne);return be.width=be.height=Ne,be}return be(de),r(be,{faces:Ae,resize:tt,_reglType:"framebufferCube",destroy:function(){Ae.forEach(function(Ke){Ke.destroy()})}})}function Se(){K.cur=null,K.next=null,K.dirty=!0,sr(ae).forEach(function(de){de.framebuffer=h.createFramebuffer(),oe(de)})}return r(K,{getFramebuffer:function(de){if(typeof de=="function"&&de._reglType==="framebuffer"){var Ae=de._framebuffer;if(Ae instanceof ke)return Ae}return null},create:ne,createCube:Fe,clear:function(){sr(ae).forEach(Ue)},restore:Se})}var KT=5126,P2=34962,au=34963,C2=["attributes","elements","offset","count","primitive","instances"];function X1(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=KT,this.offset=0,this.stride=0,this.divisor=0}function JT(h,S,O,Y,re,W,K){for(var ue=O.maxAttributes,ce=new Array(ue),me=0;me<ue;++me)ce[me]=new X1;var ge=0,ve={},$e={Record:X1,scope:{},state:ce,currentVAO:null,targetVAO:null,restore:pe()?Te:function(){},createVAO:Ue,getVAO:Q,destroyBuffer:fe,setVAO:pe()?he:Re,clear:pe()?ae:function(){}};function fe(oe){for(var ne=0;ne<ce.length;++ne){var Fe=ce[ne];Fe.buffer===oe&&(h.disableVertexAttribArray(ne),Fe.buffer=null)}}function pe(){return S.oes_vertex_array_object}function B(){return S.angle_instanced_arrays}function Q(oe){return typeof oe=="function"&&oe._vao?oe._vao:null}function he(oe){if(oe!==$e.currentVAO){var ne=pe();oe?ne.bindVertexArrayOES(oe.vao):ne.bindVertexArrayOES(null),$e.currentVAO=oe}}function Re(oe){if(oe!==$e.currentVAO){if(oe)oe.bindAttrs();else{for(var ne=B(),Fe=0;Fe<ce.length;++Fe){var Se=ce[Fe];Se.buffer?(h.enableVertexAttribArray(Fe),Se.buffer.bind(),h.vertexAttribPointer(Fe,Se.size,Se.type,Se.normalized,Se.stride,Se.offfset),ne&&Se.divisor&&ne.vertexAttribDivisorANGLE(Fe,Se.divisor)):(h.disableVertexAttribArray(Fe),h.vertexAttrib4f(Fe,Se.x,Se.y,Se.z,Se.w))}K.elements?h.bindBuffer(au,K.elements.buffer.buffer):h.bindBuffer(au,null)}$e.currentVAO=oe}}function ae(){sr(ve).forEach(function(oe){oe.destroy()})}function ke(){this.id=++ge,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var oe=pe();oe?this.vao=oe.createVertexArrayOES():this.vao=null,ve[this.id]=this,this.buffers=[]}ke.prototype.bindAttrs=function(){for(var oe=B(),ne=this.attributes,Fe=0;Fe<ne.length;++Fe){var Se=ne[Fe];Se.buffer?(h.enableVertexAttribArray(Fe),h.bindBuffer(P2,Se.buffer.buffer),h.vertexAttribPointer(Fe,Se.size,Se.type,Se.normalized,Se.stride,Se.offset),oe&&Se.divisor&&oe.vertexAttribDivisorANGLE(Fe,Se.divisor)):(h.disableVertexAttribArray(Fe),h.vertexAttrib4f(Fe,Se.x,Se.y,Se.z,Se.w))}for(var de=ne.length;de<ue;++de)h.disableVertexAttribArray(de);var Ae=W.getElements(this.elements);Ae?h.bindBuffer(au,Ae.buffer.buffer):h.bindBuffer(au,null)},ke.prototype.refresh=function(){var oe=pe();oe&&(oe.bindVertexArrayOES(this.vao),this.bindAttrs(),$e.currentVAO=null,oe.bindVertexArrayOES(null))},ke.prototype.destroy=function(){if(this.vao){var oe=pe();this===$e.currentVAO&&($e.currentVAO=null,oe.bindVertexArrayOES(null)),oe.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ve[this.id]&&(delete ve[this.id],Y.vaoCount-=1)};function Te(){var oe=pe();oe&&sr(ve).forEach(function(ne){ne.refresh()})}function Ue(oe){var ne=new ke;Y.vaoCount+=1;function Fe(Se){var de;if(Array.isArray(Se))de=Se,ne.elements&&ne.ownsElements&&ne.elements.destroy(),ne.elements=null,ne.ownsElements=!1,ne.offset=0,ne.count=0,ne.instances=-1,ne.primitive=4;else{if(b(typeof Se=="object","invalid arguments for create vao"),b("attributes"in Se,"must specify attributes for vao"),Se.elements){var Ae=Se.elements;ne.ownsElements?typeof Ae=="function"&&Ae._reglType==="elements"?(ne.elements.destroy(),ne.ownsElements=!1):(ne.elements(Ae),ne.ownsElements=!1):W.getElements(Se.elements)?(ne.elements=Se.elements,ne.ownsElements=!1):(ne.elements=W.create(Se.elements),ne.ownsElements=!0)}else ne.elements=null,ne.ownsElements=!1;de=Se.attributes,ne.offset=0,ne.count=-1,ne.instances=-1,ne.primitive=4,ne.elements&&(ne.count=ne.elements._elements.vertCount,ne.primitive=ne.elements._elements.primType),"offset"in Se&&(ne.offset=Se.offset|0),"count"in Se&&(ne.count=Se.count|0),"instances"in Se&&(ne.instances=Se.instances|0),"primitive"in Se&&(b(Se.primitive in Oo,"bad primitive type: "+Se.primitive),ne.primitive=Oo[Se.primitive]),b.optional(()=>{for(var Rt=Object.keys(Se),Lt=0;Lt<Rt.length;++Lt)b(C2.indexOf(Rt[Lt])>=0,'invalid option for vao: "'+Rt[Lt]+'" valid options are '+C2)}),b(Array.isArray(de),"attributes must be an array")}b(de.length<ue,"too many attributes"),b(de.length>0,"must specify at least one attribute");var be={},tt=ne.attributes;tt.length=de.length;for(var Ke=0;Ke<de.length;++Ke){var Pe=de[Ke],Ne=tt[Ke]=new X1,We=Pe.data||Pe;if(Array.isArray(We)||n(We)||Nr(We)){var nt;ne.buffers[Ke]&&(nt=ne.buffers[Ke],n(We)&&nt._buffer.byteLength>=We.byteLength?nt.subdata(We):(nt.destroy(),ne.buffers[Ke]=null)),ne.buffers[Ke]||(nt=ne.buffers[Ke]=re.create(Pe,P2,!1,!0)),Ne.buffer=re.getBuffer(nt),Ne.size=Ne.buffer.dimension|0,Ne.normalized=!1,Ne.type=Ne.buffer.dtype,Ne.offset=0,Ne.stride=0,Ne.divisor=0,Ne.state=1,be[Ke]=1}else re.getBuffer(Pe)?(Ne.buffer=re.getBuffer(Pe),Ne.size=Ne.buffer.dimension|0,Ne.normalized=!1,Ne.type=Ne.buffer.dtype,Ne.offset=0,Ne.stride=0,Ne.divisor=0,Ne.state=1):re.getBuffer(Pe.buffer)?(Ne.buffer=re.getBuffer(Pe.buffer),Ne.size=(+Pe.size||Ne.buffer.dimension)|0,Ne.normalized=!!Pe.normalized||!1,"type"in Pe?(b.parameter(Pe.type,bs,"invalid buffer type"),Ne.type=bs[Pe.type]):Ne.type=Ne.buffer.dtype,Ne.offset=(Pe.offset||0)|0,Ne.stride=(Pe.stride||0)|0,Ne.divisor=(Pe.divisor||0)|0,Ne.state=1,b(Ne.size>=1&&Ne.size<=4,"size must be between 1 and 4"),b(Ne.offset>=0,"invalid offset"),b(Ne.stride>=0&&Ne.stride<=255,"stride must be between 0 and 255"),b(Ne.divisor>=0,"divisor must be positive"),b(!Ne.divisor||!!S.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Pe?(b(Ke>0,"first attribute must not be a constant"),Ne.x=+Pe.x||0,Ne.y=+Pe.y||0,Ne.z=+Pe.z||0,Ne.w=+Pe.w||0,Ne.state=2):b(!1,"invalid attribute spec for location "+Ke)}for(var dt=0;dt<ne.buffers.length;++dt)!be[dt]&&ne.buffers[dt]&&(ne.buffers[dt].destroy(),ne.buffers[dt]=null);return ne.refresh(),Fe}return Fe.destroy=function(){for(var Se=0;Se<ne.buffers.length;++Se)ne.buffers[Se]&&ne.buffers[Se].destroy();ne.buffers.length=0,ne.ownsElements&&(ne.elements.destroy(),ne.elements=null,ne.ownsElements=!1),ne.destroy()},Fe._vao=ne,Fe._reglType="vao",Fe(oe)}return $e}var k2=35632,eP=35633,tP=35718,nP=35721;function rP(h,S,O,Y){var re={},W={};function K(B,Q,he,Re){this.name=B,this.id=Q,this.location=he,this.info=Re}function ue(B,Q){for(var he=0;he<B.length;++he)if(B[he].id===Q.id){B[he].location=Q.location;return}B.push(Q)}function ce(B,Q,he){var Re=B===k2?re:W,ae=Re[Q];if(!ae){var ke=S.str(Q);ae=h.createShader(B),h.shaderSource(ae,ke),h.compileShader(ae),b.shaderError(h,ae,ke,B,he),Re[Q]=ae}return ae}var me={},ge=[],ve=0;function $e(B,Q){this.id=ve++,this.fragId=B,this.vertId=Q,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Y.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function fe(B,Q,he){var Re,ae,ke=ce(k2,B.fragId),Te=ce(eP,B.vertId),Ue=B.program=h.createProgram();if(h.attachShader(Ue,ke),h.attachShader(Ue,Te),he)for(Re=0;Re<he.length;++Re){var oe=he[Re];h.bindAttribLocation(Ue,oe[0],oe[1])}h.linkProgram(Ue),b.linkError(h,Ue,S.str(B.fragId),S.str(B.vertId),Q);var ne=h.getProgramParameter(Ue,tP);Y.profile&&(B.stats.uniformsCount=ne);var Fe=B.uniforms;for(Re=0;Re<ne;++Re)if(ae=h.getActiveUniform(Ue,Re),ae){if(ae.size>1)for(var Se=0;Se<ae.size;++Se){var de=ae.name.replace("[0]","["+Se+"]");ue(Fe,new K(de,S.id(de),h.getUniformLocation(Ue,de),ae))}var Ae=ae.name;ae.size>1&&(Ae=Ae.replace("[0]","")),ue(Fe,new K(Ae,S.id(Ae),h.getUniformLocation(Ue,Ae),ae))}var be=h.getProgramParameter(Ue,nP);Y.profile&&(B.stats.attributesCount=be);var tt=B.attributes;for(Re=0;Re<be;++Re)ae=h.getActiveAttrib(Ue,Re),ae&&ue(tt,new K(ae.name,S.id(ae.name),h.getAttribLocation(Ue,ae.name),ae))}Y.profile&&(O.getMaxUniformsCount=function(){var B=0;return ge.forEach(function(Q){Q.stats.uniformsCount>B&&(B=Q.stats.uniformsCount)}),B},O.getMaxAttributesCount=function(){var B=0;return ge.forEach(function(Q){Q.stats.attributesCount>B&&(B=Q.stats.attributesCount)}),B});function pe(){re={},W={};for(var B=0;B<ge.length;++B)fe(ge[B],null,ge[B].attributes.map(function(Q){return[Q.location,Q.name]}))}return{clear:function(){var B=h.deleteShader.bind(h);sr(re).forEach(B),re={},sr(W).forEach(B),W={},ge.forEach(function(Q){h.deleteProgram(Q.program)}),ge.length=0,me={},O.shaderCount=0},program:function(B,Q,he,Re){b.command(B>=0,"missing vertex shader",he),b.command(Q>=0,"missing fragment shader",he);var ae=me[Q];ae||(ae=me[Q]={});var ke=ae[B];if(ke&&(ke.refCount++,!Re))return ke;var Te=new $e(Q,B);return O.shaderCount++,fe(Te,he,Re),ke||(ae[B]=Te),ge.push(Te),r(Te,{destroy:function(){if(Te.refCount--,Te.refCount<=0){h.deleteProgram(Te.program);var Ue=ge.indexOf(Te);ge.splice(Ue,1),O.shaderCount--}ae[Te.vertId].refCount<=0&&(h.deleteShader(W[Te.vertId]),delete W[Te.vertId],delete me[Te.fragId][Te.vertId]),Object.keys(me[Te.fragId]).length||(h.deleteShader(re[Te.fragId]),delete re[Te.fragId],delete me[Te.fragId])}})},restore:pe,shader:ce,frag:-1,vert:-1}}var oP=6408,el=5121,sP=3333,lu=5126;function iP(h,S,O,Y,re,W,K){function ue(ge){var ve;S.next===null?(b(re.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ve=el):(b(S.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ve=S.next.colorAttachments[0].texture._texture.type,b.optional(function(){W.oes_texture_float?(b(ve===el||ve===lu,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ve===lu&&b(K.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):b(ve===el,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var $e=0,fe=0,pe=Y.framebufferWidth,B=Y.framebufferHeight,Q=null;n(ge)?Q=ge:ge&&(b.type(ge,"object","invalid arguments to regl.read()"),$e=ge.x|0,fe=ge.y|0,b($e>=0&&$e<Y.framebufferWidth,"invalid x offset for regl.read"),b(fe>=0&&fe<Y.framebufferHeight,"invalid y offset for regl.read"),pe=(ge.width||Y.framebufferWidth-$e)|0,B=(ge.height||Y.framebufferHeight-fe)|0,Q=ge.data||null),Q&&(ve===el?b(Q instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ve===lu&&b(Q instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),b(pe>0&&pe+$e<=Y.framebufferWidth,"invalid width for read pixels"),b(B>0&&B+fe<=Y.framebufferHeight,"invalid height for read pixels"),O();var he=pe*B*4;return Q||(ve===el?Q=new Uint8Array(he):ve===lu&&(Q=Q||new Float32Array(he))),b.isTypedArray(Q,"data buffer for regl.read() must be a typedarray"),b(Q.byteLength>=he,"data buffer for regl.read() too small"),h.pixelStorei(sP,4),h.readPixels($e,fe,pe,B,oP,ve,Q),Q}function ce(ge){var ve;return S.setFBO({framebuffer:ge.framebuffer},function(){ve=ue(ge)}),ve}function me(ge){return!ge||!("framebuffer"in ge)?ue(ge):ce(ge)}return me}function Ai(h){return Array.prototype.slice.call(h)}function bi(h){return Ai(h).join("")}function aP(){var h=0,S=[],O=[];function Y(ve){for(var $e=0;$e<O.length;++$e)if(O[$e]===ve)return S[$e];var fe="g"+h++;return S.push(fe),O.push(ve),fe}function re(){var ve=[];function $e(){ve.push.apply(ve,Ai(arguments))}var fe=[];function pe(){var B="v"+h++;return fe.push(B),arguments.length>0&&(ve.push(B,"="),ve.push.apply(ve,Ai(arguments)),ve.push(";")),B}return r($e,{def:pe,toString:function(){return bi([fe.length>0?"var "+fe.join(",")+";":"",bi(ve)])}})}function W(){var ve=re(),$e=re(),fe=ve.toString,pe=$e.toString;function B(Q,he){$e(Q,he,"=",ve.def(Q,he),";")}return r(function(){ve.apply(ve,Ai(arguments))},{def:ve.def,entry:ve,exit:$e,save:B,set:function(Q,he,Re){B(Q,he),ve(Q,he,"=",Re,";")},toString:function(){return fe()+pe()}})}function K(){var ve=bi(arguments),$e=W(),fe=W(),pe=$e.toString,B=fe.toString;return r($e,{then:function(){return $e.apply($e,Ai(arguments)),this},else:function(){return fe.apply(fe,Ai(arguments)),this},toString:function(){var Q=B();return Q&&(Q="else{"+Q+"}"),bi(["if(",ve,"){",pe(),"}",Q])}})}var ue=re(),ce={};function me(ve,$e){var fe=[];function pe(){var ae="a"+fe.length;return fe.push(ae),ae}$e=$e||0;for(var B=0;B<$e;++B)pe();var Q=W(),he=Q.toString,Re=ce[ve]=r(Q,{arg:pe,toString:function(){return bi(["function(",fe.join(),"){",he(),"}"])}});return Re}function ge(){var ve=['"use strict";',ue,"return {"];Object.keys(ce).forEach(function(pe){ve.push('"',pe,'":',ce[pe].toString(),",")}),ve.push("}");var $e=bi(ve).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),fe=Function.apply(null,S.concat($e));return fe.apply(null,O)}return{global:ue,link:Y,block:re,proc:me,scope:W,cond:K,compile:ge}}var Ti="xyzw".split(""),M2=5121,Pi=1,W1=2,Y1=0,q1=1,Z1=2,Q1=3,cu=4,N2=5,R2=6,O2="dither",L2="blend.enable",F2="blend.color",K1="blend.equation",J1="blend.func",D2="depth.enable",I2="depth.func",z2="depth.range",B2="depth.mask",e0="colorMask",G2="cull.enable",V2="cull.face",t0="frontFace",n0="lineWidth",j2="polygonOffset.enable",r0="polygonOffset.offset",U2="sample.alpha",H2="sample.enable",o0="sample.coverage",X2="stencil.enable",W2="stencil.mask",s0="stencil.func",i0="stencil.opFront",tl="stencil.opBack",Y2="scissor.enable",uu="scissor.box",uo="viewport",nl="profile",Ms="framebuffer",rl="vert",ol="frag",Ns="elements",Rs="primitive",Os="count",fu="offset",du="instances",sl="vao",a0="Width",l0="Height",Ci=Ms+a0,ki=Ms+l0,lP=uo+a0,cP=uo+l0,q2="drawingBuffer",Z2=q2+a0,Q2=q2+l0,uP=[J1,K1,s0,i0,tl,o0,uo,uu,r0],Mi=34962,c0=34963,fP=35632,dP=35633,K2=3553,hP=34067,pP=2884,mP=3042,vP=3024,gP=2960,yP=2929,wP=3089,xP=32823,EP=32926,_P=32928,u0=5126,hu=35664,pu=35665,mu=35666,f0=5124,vu=35667,gu=35668,yu=35669,d0=35670,wu=35671,xu=35672,Eu=35673,il=35674,al=35675,ll=35676,cl=35678,ul=35680,h0=4,fl=1028,Ls=1029,J2=2304,p0=2305,$P=32775,SP=32776,AP=519,Fo=7680,ey=0,ty=1,ny=32774,bP=513,ry=36160,TP=36064,Xr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},oy=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ni={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Do={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},sy={frag:fP,vert:dP},m0={cw:J2,ccw:p0};function _u(h){return Array.isArray(h)||n(h)||Nr(h)}function iy(h){return h.sort(function(S,O){return S===uo?-1:O===uo?1:S<O?-1:1})}function on(h,S,O,Y){this.thisDep=h,this.contextDep=S,this.propDep=O,this.append=Y}function Io(h){return h&&!(h.thisDep||h.contextDep||h.propDep)}function qt(h){return new on(!1,!1,!1,h)}function Xn(h,S){var O=h.type;if(O===Y1){var Y=h.data.length;return new on(!0,Y>=1,Y>=2,S)}else if(O===cu){var re=h.data;return new on(re.thisDep,re.contextDep,re.propDep,S)}else{if(O===N2)return new on(!1,!1,!1,S);if(O===R2){for(var W=!1,K=!1,ue=!1,ce=0;ce<h.data.length;++ce){var me=h.data[ce];if(me.type===q1)ue=!0;else if(me.type===Z1)K=!0;else if(me.type===Q1)W=!0;else if(me.type===Y1){W=!0;var ge=me.data;ge>=1&&(K=!0),ge>=2&&(ue=!0)}else me.type===cu&&(W=W||me.data.thisDep,K=K||me.data.contextDep,ue=ue||me.data.propDep)}return new on(W,K,ue,S)}else return new on(O===Q1,O===Z1,O===q1,S)}}var ay=new on(!1,!1,!1,function(){});function PP(h,S,O,Y,re,W,K,ue,ce,me,ge,ve,$e,fe,pe){var B=me.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};O.ext_blend_minmax&&(Q.min=$P,Q.max=SP);var he=O.angle_instanced_arrays,Re=O.webgl_draw_buffers,ae=O.oes_vertex_array_object,ke={dirty:!0,profile:pe.profile},Te={},Ue=[],oe={},ne={};function Fe(T){return T.replace(".","_")}function Se(T,_,L){var z=Fe(T);Ue.push(T),Te[z]=ke[z]=!!L,oe[z]=_}function de(T,_,L){var z=Fe(T);Ue.push(T),Array.isArray(L)?(ke[z]=L.slice(),Te[z]=L.slice()):ke[z]=Te[z]=L,ne[z]=_}Se(O2,vP),Se(L2,mP),de(F2,"blendColor",[0,0,0,0]),de(K1,"blendEquationSeparate",[ny,ny]),de(J1,"blendFuncSeparate",[ty,ey,ty,ey]),Se(D2,yP,!0),de(I2,"depthFunc",bP),de(z2,"depthRange",[0,1]),de(B2,"depthMask",!0),de(e0,e0,[!0,!0,!0,!0]),Se(G2,pP),de(V2,"cullFace",Ls),de(t0,t0,p0),de(n0,n0,1),Se(j2,xP),de(r0,"polygonOffset",[0,0]),Se(U2,EP),Se(H2,_P),de(o0,"sampleCoverage",[1,!1]),Se(X2,gP),de(W2,"stencilMask",-1),de(s0,"stencilFunc",[AP,0,-1]),de(i0,"stencilOpSeparate",[fl,Fo,Fo,Fo]),de(tl,"stencilOpSeparate",[Ls,Fo,Fo,Fo]),Se(Y2,wP),de(uu,"scissor",[0,0,h.drawingBufferWidth,h.drawingBufferHeight]),de(uo,uo,[0,0,h.drawingBufferWidth,h.drawingBufferHeight]);var Ae={gl:h,context:$e,strings:S,next:Te,current:ke,draw:ve,elements:W,buffer:re,shader:ge,attributes:me.state,vao:me,uniforms:ce,framebuffer:ue,extensions:O,timer:fe,isBufferArgs:_u},be={primTypes:Oo,compareFuncs:Ni,blendFuncs:Xr,blendEquations:Q,stencilOps:Do,glTypes:bs,orientationType:m0};b.optional(function(){Ae.isArrayLike=Nt}),Re&&(be.backBuffer=[Ls],be.drawBuffer=or(Y.maxDrawbuffers,function(T){return T===0?[0]:or(T,function(_){return TP+_})}));var tt=0;function Ke(){var T=aP(),_=T.link,L=T.global;T.id=tt++,T.batchId="0";var z=_(Ae),G=T.shared={props:"a0"};Object.keys(Ae).forEach(function(R){G[R]=L.def(z,".",R)}),b.optional(function(){T.CHECK=_(b),T.commandStr=b.guessCommand(),T.command=_(T.commandStr),T.assert=function(R,C,U){R("if(!(",C,"))",this.CHECK,".commandRaise(",_(U),",",this.command,");")},be.invalidBlendCombinations=oy});var D=T.next={},F=T.current={};Object.keys(ne).forEach(function(R){Array.isArray(ke[R])&&(D[R]=L.def(G.next,".",R),F[R]=L.def(G.current,".",R))});var I=T.constants={};Object.keys(be).forEach(function(R){I[R]=L.def(JSON.stringify(be[R]))}),T.invoke=function(R,C){switch(C.type){case Y1:var U=["this",G.context,G.props,T.batchId];return R.def(_(C.data),".call(",U.slice(0,Math.max(C.data.length+1,4)),")");case q1:return R.def(G.props,C.data);case Z1:return R.def(G.context,C.data);case Q1:return R.def("this",C.data);case cu:return C.data.append(T,R),C.data.ref;case N2:return C.data.toString();case R2:return C.data.map(function(V){return T.invoke(R,V)})}},T.attribCache={};var P={};return T.scopeAttrib=function(R){var C=S.id(R);if(C in P)return P[C];var U=me.scope[C];U||(U=me.scope[C]=new B);var V=P[C]=_(U);return V},T}function Pe(T){var _=T.static,L=T.dynamic,z;if(nl in _){var G=!!_[nl];z=qt(function(F,I){return G}),z.enable=G}else if(nl in L){var D=L[nl];z=Xn(D,function(F,I){return F.invoke(I,D)})}return z}function Ne(T,_){var L=T.static,z=T.dynamic;if(Ms in L){var G=L[Ms];return G?(G=ue.getFramebuffer(G),b.command(G,"invalid framebuffer object"),qt(function(F,I){var P=F.link(G),R=F.shared;I.set(R.framebuffer,".next",P);var C=R.context;return I.set(C,"."+Ci,P+".width"),I.set(C,"."+ki,P+".height"),P})):qt(function(F,I){var P=F.shared;I.set(P.framebuffer,".next","null");var R=P.context;return I.set(R,"."+Ci,R+"."+Z2),I.set(R,"."+ki,R+"."+Q2),"null"})}else if(Ms in z){var D=z[Ms];return Xn(D,function(F,I){var P=F.invoke(I,D),R=F.shared,C=R.framebuffer,U=I.def(C,".getFramebuffer(",P,")");b.optional(function(){F.assert(I,"!"+P+"||"+U,"invalid framebuffer object")}),I.set(C,".next",U);var V=R.context;return I.set(V,"."+Ci,U+"?"+U+".width:"+V+"."+Z2),I.set(V,"."+ki,U+"?"+U+".height:"+V+"."+Q2),U})}else return null}function We(T,_,L){var z=T.static,G=T.dynamic;function D(P){if(P in z){var R=z[P];b.commandType(R,"object","invalid "+P,L.commandStr);var C=!0,U=R.x|0,V=R.y|0,te,se;return"width"in R?(te=R.width|0,b.command(te>=0,"invalid "+P,L.commandStr)):C=!1,"height"in R?(se=R.height|0,b.command(se>=0,"invalid "+P,L.commandStr)):C=!1,new on(!C&&_&&_.thisDep,!C&&_&&_.contextDep,!C&&_&&_.propDep,function(Ve,Oe){var ie=Ve.shared.context,ee=te;"width"in R||(ee=Oe.def(ie,".",Ci,"-",U));var Be=se;return"height"in R||(Be=Oe.def(ie,".",ki,"-",V)),[U,V,ee,Be]})}else if(P in G){var Ee=G[P],Ze=Xn(Ee,function(Ve,Oe){var ie=Ve.invoke(Oe,Ee);b.optional(function(){Ve.assert(Oe,ie+"&&typeof "+ie+'==="object"',"invalid "+P)});var ee=Ve.shared.context,Be=Oe.def(ie,".x|0"),Ie=Oe.def(ie,".y|0"),Ye=Oe.def('"width" in ',ie,"?",ie,".width|0:","(",ee,".",Ci,"-",Be,")"),_t=Oe.def('"height" in ',ie,"?",ie,".height|0:","(",ee,".",ki,"-",Ie,")");return b.optional(function(){Ve.assert(Oe,Ye+">=0&&"+_t+">=0","invalid "+P)}),[Be,Ie,Ye,_t]});return _&&(Ze.thisDep=Ze.thisDep||_.thisDep,Ze.contextDep=Ze.contextDep||_.contextDep,Ze.propDep=Ze.propDep||_.propDep),Ze}else return _?new on(_.thisDep,_.contextDep,_.propDep,function(Ve,Oe){var ie=Ve.shared.context;return[0,0,Oe.def(ie,".",Ci),Oe.def(ie,".",ki)]}):null}var F=D(uo);if(F){var I=F;F=new on(F.thisDep,F.contextDep,F.propDep,function(P,R){var C=I.append(P,R),U=P.shared.context;return R.set(U,"."+lP,C[2]),R.set(U,"."+cP,C[3]),C})}return{viewport:F,scissor_box:D(uu)}}function nt(T,_){var L=T.static,z=typeof L[ol]=="string"&&typeof L[rl]=="string";if(z){if(Object.keys(_.dynamic).length>0)return null;var G=_.static,D=Object.keys(G);if(D.length>0&&typeof G[D[0]]=="number"){for(var F=[],I=0;I<D.length;++I)b(typeof G[D[I]]=="number","must specify all vertex attribute locations when using vaos"),F.push([G[D[I]]|0,D[I]]);return F}}return null}function dt(T,_,L){var z=T.static,G=T.dynamic;function D(C){if(C in z){var U=S.id(z[C]);b.optional(function(){ge.shader(sy[C],U,b.guessCommand())});var V=qt(function(){return U});return V.id=U,V}else if(C in G){var te=G[C];return Xn(te,function(se,Ee){var Ze=se.invoke(Ee,te),Ve=Ee.def(se.shared.strings,".id(",Ze,")");return b.optional(function(){Ee(se.shared.shader,".shader(",sy[C],",",Ve,",",se.command,");")}),Ve})}return null}var F=D(ol),I=D(rl),P=null,R;return Io(F)&&Io(I)?(P=ge.program(I.id,F.id,null,L),R=qt(function(C,U){return C.link(P)})):R=new on(F&&F.thisDep||I&&I.thisDep,F&&F.contextDep||I&&I.contextDep,F&&F.propDep||I&&I.propDep,function(C,U){var V=C.shared.shader,te;F?te=F.append(C,U):te=U.def(V,".",ol);var se;I?se=I.append(C,U):se=U.def(V,".",rl);var Ee=V+".program("+se+","+te;return b.optional(function(){Ee+=","+C.command}),U.def(Ee+")")}),{frag:F,vert:I,progVar:R,program:P}}function Rt(T,_){var L=T.static,z=T.dynamic,G={},D=!1;function F(){if(sl in L){var Oe=L[sl];return Oe!==null&&me.getVAO(Oe)===null&&(Oe=me.createVAO(Oe)),D=!0,G.vao=Oe,qt(function(ee){var Be=me.getVAO(Oe);return Be?ee.link(Be):"null"})}else if(sl in z){D=!0;var ie=z[sl];return Xn(ie,function(ee,Be){var Ie=ee.invoke(Be,ie);return Be.def(ee.shared.vao+".getVAO("+Ie+")")})}return null}var I=F(),P=!1;function R(){if(Ns in L){var Oe=L[Ns];if(G.elements=Oe,_u(Oe)){var ie=G.elements=W.create(Oe,!0);Oe=W.getElements(ie),P=!0}else Oe&&(Oe=W.getElements(Oe),P=!0,b.command(Oe,"invalid elements",_.commandStr));var ee=qt(function(Ie,Ye){if(Oe){var _t=Ie.link(Oe);return Ie.ELEMENTS=_t,_t}return Ie.ELEMENTS=null,null});return ee.value=Oe,ee}else if(Ns in z){P=!0;var Be=z[Ns];return Xn(Be,function(Ie,Ye){var _t=Ie.shared,yn=_t.isBufferArgs,Ds=_t.elements,fo=Ie.invoke(Ye,Be),Yr=Ye.def("null"),zo=Ye.def(yn,"(",fo,")"),Is=Ie.cond(zo).then(Yr,"=",Ds,".createStream(",fo,");").else(Yr,"=",Ds,".getElements(",fo,");");return b.optional(function(){Ie.assert(Is.else,"!"+fo+"||"+Yr,"invalid elements")}),Ye.entry(Is),Ye.exit(Ie.cond(zo).then(Ds,".destroyStream(",Yr,");")),Ie.ELEMENTS=Yr,Yr})}else if(D)return new on(I.thisDep,I.contextDep,I.propDep,function(Ie,Ye){return Ye.def(Ie.shared.vao+".currentVAO?"+Ie.shared.elements+".getElements("+Ie.shared.vao+".currentVAO.elements):null")});return null}var C=R();function U(){if(Rs in L){var Oe=L[Rs];return G.primitive=Oe,b.commandParameter(Oe,Oo,"invalid primitve",_.commandStr),qt(function(ee,Be){return Oo[Oe]})}else if(Rs in z){var ie=z[Rs];return Xn(ie,function(ee,Be){var Ie=ee.constants.primTypes,Ye=ee.invoke(Be,ie);return b.optional(function(){ee.assert(Be,Ye+" in "+Ie,"invalid primitive, must be one of "+Object.keys(Oo))}),Be.def(Ie,"[",Ye,"]")})}else{if(P)return Io(C)?C.value?qt(function(ee,Be){return Be.def(ee.ELEMENTS,".primType")}):qt(function(){return h0}):new on(C.thisDep,C.contextDep,C.propDep,function(ee,Be){var Ie=ee.ELEMENTS;return Be.def(Ie,"?",Ie,".primType:",h0)});if(D)return new on(I.thisDep,I.contextDep,I.propDep,function(ee,Be){return Be.def(ee.shared.vao+".currentVAO?"+ee.shared.vao+".currentVAO.primitive:"+h0)})}return null}function V(Oe,ie){if(Oe in L){var ee=L[Oe]|0;return ie?G.offset=ee:G.instances=ee,b.command(!ie||ee>=0,"invalid "+Oe,_.commandStr),qt(function(Ie,Ye){return ie&&(Ie.OFFSET=ee),ee})}else if(Oe in z){var Be=z[Oe];return Xn(Be,function(Ie,Ye){var _t=Ie.invoke(Ye,Be);return ie&&(Ie.OFFSET=_t,b.optional(function(){Ie.assert(Ye,_t+">=0","invalid "+Oe)})),_t})}else if(ie){if(P)return qt(function(Ie,Ye){return Ie.OFFSET=0,0});if(D)return new on(I.thisDep,I.contextDep,I.propDep,function(Ie,Ye){return Ye.def(Ie.shared.vao+".currentVAO?"+Ie.shared.vao+".currentVAO.offset:0")})}else if(D)return new on(I.thisDep,I.contextDep,I.propDep,function(Ie,Ye){return Ye.def(Ie.shared.vao+".currentVAO?"+Ie.shared.vao+".currentVAO.instances:-1")});return null}var te=V(fu,!0);function se(){if(Os in L){var Oe=L[Os]|0;return G.count=Oe,b.command(typeof Oe=="number"&&Oe>=0,"invalid vertex count",_.commandStr),qt(function(){return Oe})}else if(Os in z){var ie=z[Os];return Xn(ie,function(Ye,_t){var yn=Ye.invoke(_t,ie);return b.optional(function(){Ye.assert(_t,"typeof "+yn+'==="number"&&'+yn+">=0&&"+yn+"===("+yn+"|0)","invalid vertex count")}),yn})}else if(P)if(Io(C)){if(C)return te?new on(te.thisDep,te.contextDep,te.propDep,function(Ye,_t){var yn=_t.def(Ye.ELEMENTS,".vertCount-",Ye.OFFSET);return b.optional(function(){Ye.assert(_t,yn+">=0","invalid vertex offset/element buffer too small")}),yn}):qt(function(Ye,_t){return _t.def(Ye.ELEMENTS,".vertCount")});var ee=qt(function(){return-1});return b.optional(function(){ee.MISSING=!0}),ee}else{var Be=new on(C.thisDep||te.thisDep,C.contextDep||te.contextDep,C.propDep||te.propDep,function(Ye,_t){var yn=Ye.ELEMENTS;return Ye.OFFSET?_t.def(yn,"?",yn,".vertCount-",Ye.OFFSET,":-1"):_t.def(yn,"?",yn,".vertCount:-1")});return b.optional(function(){Be.DYNAMIC=!0}),Be}else if(D){var Ie=new on(I.thisDep,I.contextDep,I.propDep,function(Ye,_t){return _t.def(Ye.shared.vao,".currentVAO?",Ye.shared.vao,".currentVAO.count:-1")});return Ie}return null}var Ee=U(),Ze=se(),Ve=V(du,!1);return{elements:C,primitive:Ee,count:Ze,instances:Ve,offset:te,vao:I,vaoActive:D,elementsActive:P,static:G}}function Lt(T,_){var L=T.static,z=T.dynamic,G={};return Ue.forEach(function(D){var F=Fe(D);function I(P,R){if(D in L){var C=P(L[D]);G[F]=qt(function(){return C})}else if(D in z){var U=z[D];G[F]=Xn(U,function(V,te){return R(V,te,V.invoke(te,U))})}}switch(D){case G2:case L2:case O2:case X2:case D2:case Y2:case j2:case U2:case H2:case B2:return I(function(P){return b.commandType(P,"boolean",D,_.commandStr),P},function(P,R,C){return b.optional(function(){P.assert(R,"typeof "+C+'==="boolean"',"invalid flag "+D,P.commandStr)}),C});case I2:return I(function(P){return b.commandParameter(P,Ni,"invalid "+D,_.commandStr),Ni[P]},function(P,R,C){var U=P.constants.compareFuncs;return b.optional(function(){P.assert(R,C+" in "+U,"invalid "+D+", must be one of "+Object.keys(Ni))}),R.def(U,"[",C,"]")});case z2:return I(function(P){return b.command(Nt(P)&&P.length===2&&typeof P[0]=="number"&&typeof P[1]=="number"&&P[0]<=P[1],"depth range is 2d array",_.commandStr),P},function(P,R,C){b.optional(function(){P.assert(R,P.shared.isArrayLike+"("+C+")&&"+C+".length===2&&typeof "+C+'[0]==="number"&&typeof '+C+'[1]==="number"&&'+C+"[0]<="+C+"[1]","depth range must be a 2d array")});var U=R.def("+",C,"[0]"),V=R.def("+",C,"[1]");return[U,V]});case J1:return I(function(P){b.commandType(P,"object","blend.func",_.commandStr);var R="srcRGB"in P?P.srcRGB:P.src,C="srcAlpha"in P?P.srcAlpha:P.src,U="dstRGB"in P?P.dstRGB:P.dst,V="dstAlpha"in P?P.dstAlpha:P.dst;return b.commandParameter(R,Xr,F+".srcRGB",_.commandStr),b.commandParameter(C,Xr,F+".srcAlpha",_.commandStr),b.commandParameter(U,Xr,F+".dstRGB",_.commandStr),b.commandParameter(V,Xr,F+".dstAlpha",_.commandStr),b.command(oy.indexOf(R+", "+U)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+R+", "+U+")",_.commandStr),[Xr[R],Xr[U],Xr[C],Xr[V]]},function(P,R,C){var U=P.constants.blendFuncs;b.optional(function(){P.assert(R,C+"&&typeof "+C+'==="object"',"invalid blend func, must be an object")});function V(ie,ee){var Be=R.def('"',ie,ee,'" in ',C,"?",C,".",ie,ee,":",C,".",ie);return b.optional(function(){P.assert(R,Be+" in "+U,"invalid "+D+"."+ie+ee+", must be one of "+Object.keys(Xr))}),Be}var te=V("src","RGB"),se=V("dst","RGB");b.optional(function(){var ie=P.constants.invalidBlendCombinations;P.assert(R,ie+".indexOf("+te+'+", "+'+se+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ee=R.def(U,"[",te,"]"),Ze=R.def(U,"[",V("src","Alpha"),"]"),Ve=R.def(U,"[",se,"]"),Oe=R.def(U,"[",V("dst","Alpha"),"]");return[Ee,Ve,Ze,Oe]});case K1:return I(function(P){if(typeof P=="string")return b.commandParameter(P,Q,"invalid "+D,_.commandStr),[Q[P],Q[P]];if(typeof P=="object")return b.commandParameter(P.rgb,Q,D+".rgb",_.commandStr),b.commandParameter(P.alpha,Q,D+".alpha",_.commandStr),[Q[P.rgb],Q[P.alpha]];b.commandRaise("invalid blend.equation",_.commandStr)},function(P,R,C){var U=P.constants.blendEquations,V=R.def(),te=R.def(),se=P.cond("typeof ",C,'==="string"');return b.optional(function(){function Ee(Ze,Ve,Oe){P.assert(Ze,Oe+" in "+U,"invalid "+Ve+", must be one of "+Object.keys(Q))}Ee(se.then,D,C),P.assert(se.else,C+"&&typeof "+C+'==="object"',"invalid "+D),Ee(se.else,D+".rgb",C+".rgb"),Ee(se.else,D+".alpha",C+".alpha")}),se.then(V,"=",te,"=",U,"[",C,"];"),se.else(V,"=",U,"[",C,".rgb];",te,"=",U,"[",C,".alpha];"),R(se),[V,te]});case F2:return I(function(P){return b.command(Nt(P)&&P.length===4,"blend.color must be a 4d array",_.commandStr),or(4,function(R){return+P[R]})},function(P,R,C){return b.optional(function(){P.assert(R,P.shared.isArrayLike+"("+C+")&&"+C+".length===4","blend.color must be a 4d array")}),or(4,function(U){return R.def("+",C,"[",U,"]")})});case W2:return I(function(P){return b.commandType(P,"number",F,_.commandStr),P|0},function(P,R,C){return b.optional(function(){P.assert(R,"typeof "+C+'==="number"',"invalid stencil.mask")}),R.def(C,"|0")});case s0:return I(function(P){b.commandType(P,"object",F,_.commandStr);var R=P.cmp||"keep",C=P.ref||0,U="mask"in P?P.mask:-1;return b.commandParameter(R,Ni,D+".cmp",_.commandStr),b.commandType(C,"number",D+".ref",_.commandStr),b.commandType(U,"number",D+".mask",_.commandStr),[Ni[R],C,U]},function(P,R,C){var U=P.constants.compareFuncs;b.optional(function(){function Ee(){P.assert(R,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ee(C+"&&typeof ",C,'==="object"'),Ee('!("cmp" in ',C,")||(",C,".cmp in ",U,")")});var V=R.def('"cmp" in ',C,"?",U,"[",C,".cmp]",":",Fo),te=R.def(C,".ref|0"),se=R.def('"mask" in ',C,"?",C,".mask|0:-1");return[V,te,se]});case i0:case tl:return I(function(P){b.commandType(P,"object",F,_.commandStr);var R=P.fail||"keep",C=P.zfail||"keep",U=P.zpass||"keep";return b.commandParameter(R,Do,D+".fail",_.commandStr),b.commandParameter(C,Do,D+".zfail",_.commandStr),b.commandParameter(U,Do,D+".zpass",_.commandStr),[D===tl?Ls:fl,Do[R],Do[C],Do[U]]},function(P,R,C){var U=P.constants.stencilOps;b.optional(function(){P.assert(R,C+"&&typeof "+C+'==="object"',"invalid "+D)});function V(te){return b.optional(function(){P.assert(R,'!("'+te+'" in '+C+")||("+C+"."+te+" in "+U+")","invalid "+D+"."+te+", must be one of "+Object.keys(Do))}),R.def('"',te,'" in ',C,"?",U,"[",C,".",te,"]:",Fo)}return[D===tl?Ls:fl,V("fail"),V("zfail"),V("zpass")]});case r0:return I(function(P){b.commandType(P,"object",F,_.commandStr);var R=P.factor|0,C=P.units|0;return b.commandType(R,"number",F+".factor",_.commandStr),b.commandType(C,"number",F+".units",_.commandStr),[R,C]},function(P,R,C){b.optional(function(){P.assert(R,C+"&&typeof "+C+'==="object"',"invalid "+D)});var U=R.def(C,".factor|0"),V=R.def(C,".units|0");return[U,V]});case V2:return I(function(P){var R=0;return P==="front"?R=fl:P==="back"&&(R=Ls),b.command(!!R,F,_.commandStr),R},function(P,R,C){return b.optional(function(){P.assert(R,C+'==="front"||'+C+'==="back"',"invalid cull.face")}),R.def(C,'==="front"?',fl,":",Ls)});case n0:return I(function(P){return b.command(typeof P=="number"&&P>=Y.lineWidthDims[0]&&P<=Y.lineWidthDims[1],"invalid line width, must be a positive number between "+Y.lineWidthDims[0]+" and "+Y.lineWidthDims[1],_.commandStr),P},function(P,R,C){return b.optional(function(){P.assert(R,"typeof "+C+'==="number"&&'+C+">="+Y.lineWidthDims[0]+"&&"+C+"<="+Y.lineWidthDims[1],"invalid line width")}),C});case t0:return I(function(P){return b.commandParameter(P,m0,F,_.commandStr),m0[P]},function(P,R,C){return b.optional(function(){P.assert(R,C+'==="cw"||'+C+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),R.def(C+'==="cw"?'+J2+":"+p0)});case e0:return I(function(P){return b.command(Nt(P)&&P.length===4,"color.mask must be length 4 array",_.commandStr),P.map(function(R){return!!R})},function(P,R,C){return b.optional(function(){P.assert(R,P.shared.isArrayLike+"("+C+")&&"+C+".length===4","invalid color.mask")}),or(4,function(U){return"!!"+C+"["+U+"]"})});case o0:return I(function(P){b.command(typeof P=="object"&&P,F,_.commandStr);var R="value"in P?P.value:1,C=!!P.invert;return b.command(typeof R=="number"&&R>=0&&R<=1,"sample.coverage.value must be a number between 0 and 1",_.commandStr),[R,C]},function(P,R,C){b.optional(function(){P.assert(R,C+"&&typeof "+C+'==="object"',"invalid sample.coverage")});var U=R.def('"value" in ',C,"?+",C,".value:1"),V=R.def("!!",C,".invert");return[U,V]})}}),G}function pt(T,_){var L=T.static,z=T.dynamic,G={};return Object.keys(L).forEach(function(D){var F=L[D],I;if(typeof F=="number"||typeof F=="boolean")I=qt(function(){return F});else if(typeof F=="function"){var P=F._reglType;P==="texture2d"||P==="textureCube"?I=qt(function(R){return R.link(F)}):P==="framebuffer"||P==="framebufferCube"?(b.command(F.color.length>0,'missing color attachment for framebuffer sent to uniform "'+D+'"',_.commandStr),I=qt(function(R){return R.link(F.color[0])})):b.commandRaise('invalid data for uniform "'+D+'"',_.commandStr)}else Nt(F)?I=qt(function(R){var C=R.global.def("[",or(F.length,function(U){return b.command(typeof F[U]=="number"||typeof F[U]=="boolean","invalid uniform "+D,R.commandStr),F[U]}),"]");return C}):b.commandRaise('invalid or missing data for uniform "'+D+'"',_.commandStr);I.value=F,G[D]=I}),Object.keys(z).forEach(function(D){var F=z[D];G[D]=Xn(F,function(I,P){return I.invoke(P,F)})}),G}function Kt(T,_){var L=T.static,z=T.dynamic,G={};return Object.keys(L).forEach(function(D){var F=L[D],I=S.id(D),P=new B;if(_u(F))P.state=Pi,P.buffer=re.getBuffer(re.create(F,Mi,!1,!0)),P.type=0;else{var R=re.getBuffer(F);if(R)P.state=Pi,P.buffer=R,P.type=0;else if(b.command(typeof F=="object"&&F,"invalid data for attribute "+D,_.commandStr),"constant"in F){var C=F.constant;P.buffer="null",P.state=W1,typeof C=="number"?P.x=C:(b.command(Nt(C)&&C.length>0&&C.length<=4,"invalid constant for attribute "+D,_.commandStr),Ti.forEach(function(Ve,Oe){Oe<C.length&&(P[Ve]=C[Oe])}))}else{_u(F.buffer)?R=re.getBuffer(re.create(F.buffer,Mi,!1,!0)):R=re.getBuffer(F.buffer),b.command(!!R,'missing buffer for attribute "'+D+'"',_.commandStr);var U=F.offset|0;b.command(U>=0,'invalid offset for attribute "'+D+'"',_.commandStr);var V=F.stride|0;b.command(V>=0&&V<256,'invalid stride for attribute "'+D+'", must be integer betweeen [0, 255]',_.commandStr);var te=F.size|0;b.command(!("size"in F)||te>0&&te<=4,'invalid size for attribute "'+D+'", must be 1,2,3,4',_.commandStr);var se=!!F.normalized,Ee=0;"type"in F&&(b.commandParameter(F.type,bs,"invalid type for attribute "+D,_.commandStr),Ee=bs[F.type]);var Ze=F.divisor|0;b.optional(function(){"divisor"in F&&(b.command(Ze===0||he,'cannot specify divisor for attribute "'+D+'", instancing not supported',_.commandStr),b.command(Ze>=0,'invalid divisor for attribute "'+D+'"',_.commandStr));var Ve=_.commandStr,Oe=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(F).forEach(function(ie){b.command(Oe.indexOf(ie)>=0,'unknown parameter "'+ie+'" for attribute pointer "'+D+'" (valid parameters are '+Oe+")",Ve)})}),P.buffer=R,P.state=Pi,P.size=te,P.normalized=se,P.type=Ee||R.dtype,P.offset=U,P.stride=V,P.divisor=Ze}}G[D]=qt(function(Ve,Oe){var ie=Ve.attribCache;if(I in ie)return ie[I];var ee={isStream:!1};return Object.keys(P).forEach(function(Be){ee[Be]=P[Be]}),P.buffer&&(ee.buffer=Ve.link(P.buffer),ee.type=ee.type||ee.buffer+".dtype"),ie[I]=ee,ee})}),Object.keys(z).forEach(function(D){var F=z[D];function I(P,R){var C=P.invoke(R,F),U=P.shared,V=P.constants,te=U.isBufferArgs,se=U.buffer;b.optional(function(){P.assert(R,C+"&&(typeof "+C+'==="object"||typeof '+C+'==="function")&&('+te+"("+C+")||"+se+".getBuffer("+C+")||"+se+".getBuffer("+C+".buffer)||"+te+"("+C+'.buffer)||("constant" in '+C+"&&(typeof "+C+'.constant==="number"||'+U.isArrayLike+"("+C+".constant))))",'invalid dynamic attribute "'+D+'"')});var Ee={isStream:R.def(!1)},Ze=new B;Ze.state=Pi,Object.keys(Ze).forEach(function(ee){Ee[ee]=R.def(""+Ze[ee])});var Ve=Ee.buffer,Oe=Ee.type;R("if(",te,"(",C,")){",Ee.isStream,"=true;",Ve,"=",se,".createStream(",Mi,",",C,");",Oe,"=",Ve,".dtype;","}else{",Ve,"=",se,".getBuffer(",C,");","if(",Ve,"){",Oe,"=",Ve,".dtype;",'}else if("constant" in ',C,"){",Ee.state,"=",W1,";","if(typeof "+C+'.constant === "number"){',Ee[Ti[0]],"=",C,".constant;",Ti.slice(1).map(function(ee){return Ee[ee]}).join("="),"=0;","}else{",Ti.map(function(ee,Be){return Ee[ee]+"="+C+".constant.length>"+Be+"?"+C+".constant["+Be+"]:0;"}).join(""),"}}else{","if(",te,"(",C,".buffer)){",Ve,"=",se,".createStream(",Mi,",",C,".buffer);","}else{",Ve,"=",se,".getBuffer(",C,".buffer);","}",Oe,'="type" in ',C,"?",V.glTypes,"[",C,".type]:",Ve,".dtype;",Ee.normalized,"=!!",C,".normalized;");function ie(ee){R(Ee[ee],"=",C,".",ee,"|0;")}return ie("size"),ie("offset"),ie("stride"),ie("divisor"),R("}}"),R.exit("if(",Ee.isStream,"){",se,".destroyStream(",Ve,");","}"),Ee}G[D]=Xn(F,I)}),G}function Pt(T){var _=T.static,L=T.dynamic,z={};return Object.keys(_).forEach(function(G){var D=_[G];z[G]=qt(function(F,I){return typeof D=="number"||typeof D=="boolean"?""+D:F.link(D)})}),Object.keys(L).forEach(function(G){var D=L[G];z[G]=Xn(D,function(F,I){return F.invoke(I,D)})}),z}function Zt(T,_,L,z,G){var D=T.static,F=T.dynamic;b.optional(function(){var ie=[Ms,rl,ol,Ns,Rs,fu,Os,du,nl,sl].concat(Ue);function ee(Be){Object.keys(Be).forEach(function(Ie){b.command(ie.indexOf(Ie)>=0,'unknown parameter "'+Ie+'"',G.commandStr)})}ee(D),ee(F)});var I=nt(T,_),P=Ne(T),R=We(T,P,G),C=Rt(T,G),U=Lt(T,G),V=dt(T,G,I);function te(ie){var ee=R[ie];ee&&(U[ie]=ee)}te(uo),te(Fe(uu));var se=Object.keys(U).length>0,Ee={framebuffer:P,draw:C,shader:V,state:U,dirty:se,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ee.profile=Pe(T),Ee.uniforms=pt(L,G),Ee.drawVAO=Ee.scopeVAO=C.vao,!Ee.drawVAO&&V.program&&!I&&O.angle_instanced_arrays&&C.static.elements){var Ze=!0,Ve=V.program.attributes.map(function(ie){var ee=_.static[ie];return Ze=Ze&&!!ee,ee});if(Ze&&Ve.length>0){var Oe=me.getVAO(me.createVAO({attributes:Ve,elements:C.static.elements}));Ee.drawVAO=new on(null,null,null,function(ie,ee){return ie.link(Oe)}),Ee.useVAO=!0}}return I?Ee.useVAO=!0:Ee.attributes=Kt(_,G),Ee.context=Pt(z),Ee}function Jt(T,_,L){var z=T.shared,G=z.context,D=T.scope();Object.keys(L).forEach(function(F){_.save(G,"."+F);var I=L[F],P=I.append(T,_);Array.isArray(P)?D(G,".",F,"=[",P.join(),"];"):D(G,".",F,"=",P,";")}),_(D)}function en(T,_,L,z){var G=T.shared,D=G.gl,F=G.framebuffer,I;Re&&(I=_.def(G.extensions,".webgl_draw_buffers"));var P=T.constants,R=P.drawBuffer,C=P.backBuffer,U;L?U=L.append(T,_):U=_.def(F,".next"),z||_("if(",U,"!==",F,".cur){"),_("if(",U,"){",D,".bindFramebuffer(",ry,",",U,".framebuffer);"),Re&&_(I,".drawBuffersWEBGL(",R,"[",U,".colorAttachments.length]);"),_("}else{",D,".bindFramebuffer(",ry,",null);"),Re&&_(I,".drawBuffersWEBGL(",C,");"),_("}",F,".cur=",U,";"),z||_("}")}function cn(T,_,L){var z=T.shared,G=z.gl,D=T.current,F=T.next,I=z.current,P=z.next,R=T.cond(I,".dirty");Ue.forEach(function(C){var U=Fe(C);if(!(U in L.state)){var V,te;if(U in F){V=F[U],te=D[U];var se=or(ke[U].length,function(Ze){return R.def(V,"[",Ze,"]")});R(T.cond(se.map(function(Ze,Ve){return Ze+"!=="+te+"["+Ve+"]"}).join("||")).then(G,".",ne[U],"(",se,");",se.map(function(Ze,Ve){return te+"["+Ve+"]="+Ze}).join(";"),";"))}else{V=R.def(P,".",U);var Ee=T.cond(V,"!==",I,".",U);R(Ee),U in oe?Ee(T.cond(V).then(G,".enable(",oe[U],");").else(G,".disable(",oe[U],");"),I,".",U,"=",V,";"):Ee(G,".",ne[U],"(",V,");",I,".",U,"=",V,";")}}}),Object.keys(L.state).length===0&&R(I,".dirty=false;"),_(R)}function vn(T,_,L,z){var G=T.shared,D=T.current,F=G.current,I=G.gl;iy(Object.keys(L)).forEach(function(P){var R=L[P];if(!(z&&!z(R))){var C=R.append(T,_);if(oe[P]){var U=oe[P];Io(R)?C?_(I,".enable(",U,");"):_(I,".disable(",U,");"):_(T.cond(C).then(I,".enable(",U,");").else(I,".disable(",U,");")),_(F,".",P,"=",C,";")}else if(Nt(C)){var V=D[P];_(I,".",ne[P],"(",C,");",C.map(function(te,se){return V+"["+se+"]="+te}).join(";"),";")}else _(I,".",ne[P],"(",C,");",F,".",P,"=",C,";")}})}function Vt(T,_){he&&(T.instancing=_.def(T.shared.extensions,".angle_instanced_arrays"))}function it(T,_,L,z,G){var D=T.shared,F=T.stats,I=D.current,P=D.timer,R=L.profile;function C(){return typeof performance>"u"?"Date.now()":"performance.now()"}var U,V;function te(ie){U=_.def(),ie(U,"=",C(),";"),typeof G=="string"?ie(F,".count+=",G,";"):ie(F,".count++;"),fe&&(z?(V=_.def(),ie(V,"=",P,".getNumPendingQueries();")):ie(P,".beginQuery(",F,");"))}function se(ie){ie(F,".cpuTime+=",C(),"-",U,";"),fe&&(z?ie(P,".pushScopeStats(",V,",",P,".getNumPendingQueries(),",F,");"):ie(P,".endQuery();"))}function Ee(ie){var ee=_.def(I,".profile");_(I,".profile=",ie,";"),_.exit(I,".profile=",ee,";")}var Ze;if(R){if(Io(R)){R.enable?(te(_),se(_.exit),Ee("true")):Ee("false");return}Ze=R.append(T,_),Ee(Ze)}else Ze=_.def(I,".profile");var Ve=T.block();te(Ve),_("if(",Ze,"){",Ve,"}");var Oe=T.block();se(Oe),_.exit("if(",Ze,"){",Oe,"}")}function gn(T,_,L,z,G){var D=T.shared;function F(P){switch(P){case hu:case vu:case wu:return 2;case pu:case gu:case xu:return 3;case mu:case yu:case Eu:return 4;default:return 1}}function I(P,R,C){var U=D.gl,V=_.def(P,".location"),te=_.def(D.attributes,"[",V,"]"),se=C.state,Ee=C.buffer,Ze=[C.x,C.y,C.z,C.w],Ve=["buffer","normalized","offset","stride"];function Oe(){_("if(!",te,".buffer){",U,".enableVertexAttribArray(",V,");}");var ee=C.type,Be;if(C.size?Be=_.def(C.size,"||",R):Be=R,_("if(",te,".type!==",ee,"||",te,".size!==",Be,"||",Ve.map(function(Ye){return te+"."+Ye+"!=="+C[Ye]}).join("||"),"){",U,".bindBuffer(",Mi,",",Ee,".buffer);",U,".vertexAttribPointer(",[V,Be,ee,C.normalized,C.stride,C.offset],");",te,".type=",ee,";",te,".size=",Be,";",Ve.map(function(Ye){return te+"."+Ye+"="+C[Ye]+";"}).join(""),"}"),he){var Ie=C.divisor;_("if(",te,".divisor!==",Ie,"){",T.instancing,".vertexAttribDivisorANGLE(",[V,Ie],");",te,".divisor=",Ie,";}")}}function ie(){_("if(",te,".buffer){",U,".disableVertexAttribArray(",V,");",te,".buffer=null;","}if(",Ti.map(function(ee,Be){return te+"."+ee+"!=="+Ze[Be]}).join("||"),"){",U,".vertexAttrib4f(",V,",",Ze,");",Ti.map(function(ee,Be){return te+"."+ee+"="+Ze[Be]+";"}).join(""),"}")}se===Pi?Oe():se===W1?ie():(_("if(",se,"===",Pi,"){"),Oe(),_("}else{"),ie(),_("}"))}z.forEach(function(P){var R=P.name,C=L.attributes[R],U;if(C){if(!G(C))return;U=C.append(T,_)}else{if(!G(ay))return;var V=T.scopeAttrib(R);b.optional(function(){T.assert(_,V+".state","missing attribute "+R)}),U={},Object.keys(new B).forEach(function(te){U[te]=_.def(V,".",te)})}I(T.link(P),F(P.info.type),U)})}function xt(T,_,L,z,G,D){for(var F=T.shared,I=F.gl,P={},R,C=0;C<z.length;++C){var U=z[C],V=U.name,te=U.info.type,se=U.info.size,Ee=L.uniforms[V];if(se>1){if(!Ee)continue;var Ze=V.replace("[0]","");if(P[Ze])continue;P[Ze]=1}var Ve=T.link(U),Oe=Ve+".location",ie;if(Ee){if(!G(Ee))continue;if(Io(Ee)){var ee=Ee.value;if(b.command(ee!==null&&typeof ee<"u",'missing uniform "'+V+'"',T.commandStr),te===cl||te===ul){b.command(typeof ee=="function"&&(te===cl&&(ee._reglType==="texture2d"||ee._reglType==="framebuffer")||te===ul&&(ee._reglType==="textureCube"||ee._reglType==="framebufferCube")),"invalid texture for uniform "+V,T.commandStr);var Be=T.link(ee._texture||ee.color[0]._texture);_(I,".uniform1i(",Oe,",",Be+".bind());"),_.exit(Be,".unbind();")}else if(te===il||te===al||te===ll){b.optional(function(){b.command(Nt(ee),"invalid matrix for uniform "+V,T.commandStr),b.command(te===il&&ee.length===4||te===al&&ee.length===9||te===ll&&ee.length===16,"invalid length for matrix uniform "+V,T.commandStr)});var Ie=T.global.def("new Float32Array(["+Array.prototype.slice.call(ee)+"])"),Ye=2;te===al?Ye=3:te===ll&&(Ye=4),_(I,".uniformMatrix",Ye,"fv(",Oe,",false,",Ie,");")}else{switch(te){case u0:se===1?b.commandType(ee,"number","uniform "+V,T.commandStr):b.command(Nt(ee)&&ee.length===se,"uniform "+V,T.commandStr),R="1f";break;case hu:b.command(Nt(ee)&&ee.length&&ee.length%2===0&&ee.length<=se*2,"uniform "+V,T.commandStr),R="2f";break;case pu:b.command(Nt(ee)&&ee.length&&ee.length%3===0&&ee.length<=se*3,"uniform "+V,T.commandStr),R="3f";break;case mu:b.command(Nt(ee)&&ee.length&&ee.length%4===0&&ee.length<=se*4,"uniform "+V,T.commandStr),R="4f";break;case d0:se===1?b.commandType(ee,"boolean","uniform "+V,T.commandStr):b.command(Nt(ee)&&ee.length===se,"uniform "+V,T.commandStr),R="1i";break;case f0:se===1?b.commandType(ee,"number","uniform "+V,T.commandStr):b.command(Nt(ee)&&ee.length===se,"uniform "+V,T.commandStr),R="1i";break;case wu:b.command(Nt(ee)&&ee.length&&ee.length%2===0&&ee.length<=se*2,"uniform "+V,T.commandStr),R="2i";break;case vu:b.command(Nt(ee)&&ee.length&&ee.length%2===0&&ee.length<=se*2,"uniform "+V,T.commandStr),R="2i";break;case xu:b.command(Nt(ee)&&ee.length&&ee.length%3===0&&ee.length<=se*3,"uniform "+V,T.commandStr),R="3i";break;case gu:b.command(Nt(ee)&&ee.length&&ee.length%3===0&&ee.length<=se*3,"uniform "+V,T.commandStr),R="3i";break;case Eu:b.command(Nt(ee)&&ee.length&&ee.length%4===0&&ee.length<=se*4,"uniform "+V,T.commandStr),R="4i";break;case yu:b.command(Nt(ee)&&ee.length&&ee.length%4===0&&ee.length<=se*4,"uniform "+V,T.commandStr),R="4i";break}se>1?(R+="v",ee=T.global.def("["+Array.prototype.slice.call(ee)+"]")):ee=Nt(ee)?Array.prototype.slice.call(ee):ee,_(I,".uniform",R,"(",Oe,",",ee,");")}continue}else ie=Ee.append(T,_)}else{if(!G(ay))continue;ie=_.def(F.uniforms,"[",S.id(V),"]")}te===cl?(b(!Array.isArray(ie),"must specify a scalar prop for textures"),_("if(",ie,"&&",ie,'._reglType==="framebuffer"){',ie,"=",ie,".color[0];","}")):te===ul&&(b(!Array.isArray(ie),"must specify a scalar prop for cube maps"),_("if(",ie,"&&",ie,'._reglType==="framebufferCube"){',ie,"=",ie,".color[0];","}")),b.optional(function(){function ir(Wn,$u){T.assert(_,Wn,'bad data or missing for uniform "'+V+'".  '+$u)}function zs(Wn,$u){$u===1&&b(!Array.isArray(ie),"must not specify an array type for uniform"),ir("Array.isArray("+ie+") && typeof "+ie+'[0]===" '+Wn+'" || typeof '+ie+'==="'+Wn+'"',"invalid type, expected "+Wn)}function wr(Wn,$u,Su){Array.isArray(ie)?b(ie.length&&ie.length%Wn===0&&ie.length<=Wn*Su,"must have length of "+(Su===1?"":"n * ")+Wn):ir(F.isArrayLike+"("+ie+")&&"+ie+".length && "+ie+".length % "+Wn+" === 0 && "+ie+".length<="+Wn*Su,"invalid vector, should have length of "+(Su===1?"":"n * ")+Wn,T.commandStr)}function py(Wn){b(!Array.isArray(ie),"must not specify a value type"),ir("typeof "+ie+'==="function"&&'+ie+'._reglType==="texture'+(Wn===K2?"2d":"Cube")+'"',"invalid texture type",T.commandStr)}switch(te){case f0:zs("number",se);break;case vu:wr(2,"number",se);break;case gu:wr(3,"number",se);break;case yu:wr(4,"number",se);break;case u0:zs("number",se);break;case hu:wr(2,"number",se);break;case pu:wr(3,"number",se);break;case mu:wr(4,"number",se);break;case d0:zs("boolean",se);break;case wu:wr(2,"boolean",se);break;case xu:wr(3,"boolean",se);break;case Eu:wr(4,"boolean",se);break;case il:wr(4,"number",se);break;case al:wr(9,"number",se);break;case ll:wr(16,"number",se);break;case cl:py(K2);break;case ul:py(hP);break}});var _t=1;switch(te){case cl:case ul:var yn=_.def(ie,"._texture");_(I,".uniform1i(",Oe,",",yn,".bind());"),_.exit(yn,".unbind();");continue;case f0:case d0:R="1i";break;case vu:case wu:R="2i",_t=2;break;case gu:case xu:R="3i",_t=3;break;case yu:case Eu:R="4i",_t=4;break;case u0:R="1f";break;case hu:R="2f",_t=2;break;case pu:R="3f",_t=3;break;case mu:R="4f",_t=4;break;case il:R="Matrix2fv";break;case al:R="Matrix3fv";break;case ll:R="Matrix4fv";break}if(R.indexOf("Matrix")===-1&&se>1&&(R+="v",_t=1),R.charAt(0)==="M"){_(I,".uniform",R,"(",Oe,",");var Ds=Math.pow(te-il+2,2),fo=T.global.def("new Float32Array(",Ds,")");Array.isArray(ie)?_("false,(",or(Ds,function(ir){return fo+"["+ir+"]="+ie[ir]}),",",fo,")"):_("false,(Array.isArray(",ie,")||",ie," instanceof Float32Array)?",ie,":(",or(Ds,function(ir){return fo+"["+ir+"]="+ie+"["+ir+"]"}),",",fo,")"),_(");")}else if(_t>1){for(var Yr=[],zo=[],Is=0;Is<_t;++Is)Array.isArray(ie)?zo.push(ie[Is]):zo.push(_.def(ie+"["+Is+"]")),D&&Yr.push(_.def());D&&_("if(!",T.batchId,"||",Yr.map(function(ir,zs){return ir+"!=="+zo[zs]}).join("||"),"){",Yr.map(function(ir,zs){return ir+"="+zo[zs]+";"}).join("")),_(I,".uniform",R,"(",Oe,",",zo.join(","),");"),D&&_("}")}else{if(b(!Array.isArray(ie),"uniform value must not be an array"),D){var hy=_.def();_("if(!",T.batchId,"||",hy,"!==",ie,"){",hy,"=",ie,";")}_(I,".uniform",R,"(",Oe,",",ie,");"),D&&_("}")}}}function Xe(T,_,L,z){var G=T.shared,D=G.gl,F=G.draw,I=z.draw;function P(){var Be=I.elements,Ie,Ye=_;return Be?((Be.contextDep&&z.contextDynamic||Be.propDep)&&(Ye=L),Ie=Be.append(T,Ye),I.elementsActive&&Ye("if("+Ie+")"+D+".bindBuffer("+c0+","+Ie+".buffer.buffer);")):(Ie=Ye.def(),Ye(Ie,"=",F,".",Ns,";","if(",Ie,"){",D,".bindBuffer(",c0,",",Ie,".buffer.buffer);}","else if(",G.vao,".currentVAO){",Ie,"=",T.shared.elements+".getElements("+G.vao,".currentVAO.elements);",ae?"":"if("+Ie+")"+D+".bindBuffer("+c0+","+Ie+".buffer.buffer);","}")),Ie}function R(){var Be=I.count,Ie,Ye=_;return Be?((Be.contextDep&&z.contextDynamic||Be.propDep)&&(Ye=L),Ie=Be.append(T,Ye),b.optional(function(){Be.MISSING&&T.assert(_,"false","missing vertex count"),Be.DYNAMIC&&T.assert(Ye,Ie+">=0","missing vertex count")})):(Ie=Ye.def(F,".",Os),b.optional(function(){T.assert(Ye,Ie+">=0","missing vertex count")})),Ie}var C=P();function U(Be){var Ie=I[Be];return Ie?Ie.contextDep&&z.contextDynamic||Ie.propDep?Ie.append(T,L):Ie.append(T,_):_.def(F,".",Be)}var V=U(Rs),te=U(fu),se=R();if(typeof se=="number"){if(se===0)return}else L("if(",se,"){"),L.exit("}");var Ee,Ze;he&&(Ee=U(du),Ze=T.instancing);var Ve=C+".type",Oe=I.elements&&Io(I.elements)&&!I.vaoActive;function ie(){function Be(){L(Ze,".drawElementsInstancedANGLE(",[V,se,Ve,te+"<<(("+Ve+"-"+M2+")>>1)",Ee],");")}function Ie(){L(Ze,".drawArraysInstancedANGLE(",[V,te,se,Ee],");")}C&&C!=="null"?Oe?Be():(L("if(",C,"){"),Be(),L("}else{"),Ie(),L("}")):Ie()}function ee(){function Be(){L(D+".drawElements("+[V,se,Ve,te+"<<(("+Ve+"-"+M2+")>>1)"]+");")}function Ie(){L(D+".drawArrays("+[V,te,se]+");")}C&&C!=="null"?Oe?Be():(L("if(",C,"){"),Be(),L("}else{"),Ie(),L("}")):Ie()}he&&(typeof Ee!="number"||Ee>=0)?typeof Ee=="string"?(L("if(",Ee,">0){"),ie(),L("}else if(",Ee,"<0){"),ee(),L("}")):ie():ee()}function ht(T,_,L,z,G){var D=Ke(),F=D.proc("body",G);return b.optional(function(){D.commandStr=_.commandStr,D.command=D.link(_.commandStr)}),he&&(D.instancing=F.def(D.shared.extensions,".angle_instanced_arrays")),T(D,F,L,z),D.compile().body}function vt(T,_,L,z){Vt(T,_),L.useVAO?L.drawVAO?_(T.shared.vao,".setVAO(",L.drawVAO.append(T,_),");"):_(T.shared.vao,".setVAO(",T.shared.vao,".targetVAO);"):(_(T.shared.vao,".setVAO(null);"),gn(T,_,L,z.attributes,function(){return!0})),xt(T,_,L,z.uniforms,function(){return!0},!1),Xe(T,_,_,L)}function jt(T,_){var L=T.proc("draw",1);Vt(T,L),Jt(T,L,_.context),en(T,L,_.framebuffer),cn(T,L,_),vn(T,L,_.state),it(T,L,_,!1,!0);var z=_.shader.progVar.append(T,L);if(L(T.shared.gl,".useProgram(",z,".program);"),_.shader.program)vt(T,L,_,_.shader.program);else{L(T.shared.vao,".setVAO(null);");var G=T.global.def("{}"),D=L.def(z,".id"),F=L.def(G,"[",D,"]");L(T.cond(F).then(F,".call(this,a0);").else(F,"=",G,"[",D,"]=",T.link(function(I){return ht(vt,T,_,I,1)}),"(",z,");",F,".call(this,a0);"))}Object.keys(_.state).length>0&&L(T.shared.current,".dirty=true;"),T.shared.vao&&L(T.shared.vao,".setVAO(null);")}function Wr(T,_,L,z){T.batchId="a1",Vt(T,_);function G(){return!0}gn(T,_,L,z.attributes,G),xt(T,_,L,z.uniforms,G,!1),Xe(T,_,_,L)}function Fs(T,_,L,z){Vt(T,_);var G=L.contextDep,D=_.def(),F="a0",I="a1",P=_.def();T.shared.props=P,T.batchId=D;var R=T.scope(),C=T.scope();_(R.entry,"for(",D,"=0;",D,"<",I,";++",D,"){",P,"=",F,"[",D,"];",C,"}",R.exit);function U(Ve){return Ve.contextDep&&G||Ve.propDep}function V(Ve){return!U(Ve)}if(L.needsContext&&Jt(T,C,L.context),L.needsFramebuffer&&en(T,C,L.framebuffer),vn(T,C,L.state,U),L.profile&&U(L.profile)&&it(T,C,L,!1,!0),z)L.useVAO?L.drawVAO?U(L.drawVAO)?C(T.shared.vao,".setVAO(",L.drawVAO.append(T,C),");"):R(T.shared.vao,".setVAO(",L.drawVAO.append(T,R),");"):R(T.shared.vao,".setVAO(",T.shared.vao,".targetVAO);"):(R(T.shared.vao,".setVAO(null);"),gn(T,R,L,z.attributes,V),gn(T,C,L,z.attributes,U)),xt(T,R,L,z.uniforms,V,!1),xt(T,C,L,z.uniforms,U,!0),Xe(T,R,C,L);else{var te=T.global.def("{}"),se=L.shader.progVar.append(T,C),Ee=C.def(se,".id"),Ze=C.def(te,"[",Ee,"]");C(T.shared.gl,".useProgram(",se,".program);","if(!",Ze,"){",Ze,"=",te,"[",Ee,"]=",T.link(function(Ve){return ht(Wr,T,L,Ve,2)}),"(",se,");}",Ze,".call(this,a0[",D,"],",D,");")}}function M(T,_){var L=T.proc("batch",2);T.batchId="0",Vt(T,L);var z=!1,G=!0;Object.keys(_.context).forEach(function(te){z=z||_.context[te].propDep}),z||(Jt(T,L,_.context),G=!1);var D=_.framebuffer,F=!1;D?(D.propDep?z=F=!0:D.contextDep&&z&&(F=!0),F||en(T,L,D)):en(T,L,null),_.state.viewport&&_.state.viewport.propDep&&(z=!0);function I(te){return te.contextDep&&z||te.propDep}cn(T,L,_),vn(T,L,_.state,function(te){return!I(te)}),(!_.profile||!I(_.profile))&&it(T,L,_,!1,"a1"),_.contextDep=z,_.needsContext=G,_.needsFramebuffer=F;var P=_.shader.progVar;if(P.contextDep&&z||P.propDep)Fs(T,L,_,null);else{var R=P.append(T,L);if(L(T.shared.gl,".useProgram(",R,".program);"),_.shader.program)Fs(T,L,_,_.shader.program);else{L(T.shared.vao,".setVAO(null);");var C=T.global.def("{}"),U=L.def(R,".id"),V=L.def(C,"[",U,"]");L(T.cond(V).then(V,".call(this,a0,a1);").else(V,"=",C,"[",U,"]=",T.link(function(te){return ht(Fs,T,_,te,2)}),"(",R,");",V,".call(this,a0,a1);"))}}Object.keys(_.state).length>0&&L(T.shared.current,".dirty=true;"),T.shared.vao&&L(T.shared.vao,".setVAO(null);")}function q(T,_){var L=T.proc("scope",3);T.batchId="a2";var z=T.shared,G=z.current;Jt(T,L,_.context),_.framebuffer&&_.framebuffer.append(T,L),iy(Object.keys(_.state)).forEach(function(F){var I=_.state[F],P=I.append(T,L);Nt(P)?P.forEach(function(R,C){L.set(T.next[F],"["+C+"]",R)}):L.set(z.next,"."+F,P)}),it(T,L,_,!0,!0),[Ns,fu,Os,du,Rs].forEach(function(F){var I=_.draw[F];I&&L.set(z.draw,"."+F,""+I.append(T,L))}),Object.keys(_.uniforms).forEach(function(F){var I=_.uniforms[F].append(T,L);Array.isArray(I)&&(I="["+I.join()+"]"),L.set(z.uniforms,"["+S.id(F)+"]",I)}),Object.keys(_.attributes).forEach(function(F){var I=_.attributes[F].append(T,L),P=T.scopeAttrib(F);Object.keys(new B).forEach(function(R){L.set(P,"."+R,I[R])})}),_.scopeVAO&&L.set(z.vao,".targetVAO",_.scopeVAO.append(T,L));function D(F){var I=_.shader[F];I&&L.set(z.shader,"."+F,I.append(T,L))}D(rl),D(ol),Object.keys(_.state).length>0&&(L(G,".dirty=true;"),L.exit(G,".dirty=true;")),L("a1(",T.shared.context,",a0,",T.batchId,");")}function H(T){if(!(typeof T!="object"||Nt(T))){for(var _=Object.keys(T),L=0;L<_.length;++L)if(rr.isDynamic(T[_[L]]))return!0;return!1}}function Le(T,_,L){var z=_.static[L];if(!z||!H(z))return;var G=T.global,D=Object.keys(z),F=!1,I=!1,P=!1,R=T.global.def("{}");D.forEach(function(U){var V=z[U];if(rr.isDynamic(V)){typeof V=="function"&&(V=z[U]=rr.unbox(V));var te=Xn(V,null);F=F||te.thisDep,P=P||te.propDep,I=I||te.contextDep}else{switch(G(R,".",U,"="),typeof V){case"number":G(V);break;case"string":G('"',V,'"');break;case"object":Array.isArray(V)&&G("[",V.join(),"]");break;default:G(T.link(V));break}G(";")}});function C(U,V){D.forEach(function(te){var se=z[te];if(rr.isDynamic(se)){var Ee=U.invoke(V,se);V(R,".",te,"=",Ee,";")}})}_.dynamic[L]=new rr.DynamicVariable(cu,{thisDep:F,contextDep:I,propDep:P,ref:R,append:C}),delete _.static[L]}function ct(T,_,L,z,G){var D=Ke();D.stats=D.link(G),Object.keys(_.static).forEach(function(I){Le(D,_,I)}),uP.forEach(function(I){Le(D,T,I)});var F=Zt(T,_,L,z,D);return jt(D,F),q(D,F),M(D,F),r(D.compile(),{destroy:function(){F.shader.program.destroy()}})}return{next:Te,current:ke,procs:function(){var T=Ke(),_=T.proc("poll"),L=T.proc("refresh"),z=T.block();_(z),L(z);var G=T.shared,D=G.gl,F=G.next,I=G.current;z(I,".dirty=false;"),en(T,_),en(T,L,null,!0);var P;he&&(P=T.link(he)),O.oes_vertex_array_object&&L(T.link(O.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var R=0;R<Y.maxAttributes;++R){var C=L.def(G.attributes,"[",R,"]"),U=T.cond(C,".buffer");U.then(D,".enableVertexAttribArray(",R,");",D,".bindBuffer(",Mi,",",C,".buffer.buffer);",D,".vertexAttribPointer(",R,",",C,".size,",C,".type,",C,".normalized,",C,".stride,",C,".offset);").else(D,".disableVertexAttribArray(",R,");",D,".vertexAttrib4f(",R,",",C,".x,",C,".y,",C,".z,",C,".w);",C,".buffer=null;"),L(U),he&&L(P,".vertexAttribDivisorANGLE(",R,",",C,".divisor);")}return L(T.shared.vao,".currentVAO=null;",T.shared.vao,".setVAO(",T.shared.vao,".targetVAO);"),Object.keys(oe).forEach(function(V){var te=oe[V],se=z.def(F,".",V),Ee=T.block();Ee("if(",se,"){",D,".enable(",te,")}else{",D,".disable(",te,")}",I,".",V,"=",se,";"),L(Ee),_("if(",se,"!==",I,".",V,"){",Ee,"}")}),Object.keys(ne).forEach(function(V){var te=ne[V],se=ke[V],Ee,Ze,Ve=T.block();if(Ve(D,".",te,"("),Nt(se)){var Oe=se.length;Ee=T.global.def(F,".",V),Ze=T.global.def(I,".",V),Ve(or(Oe,function(ie){return Ee+"["+ie+"]"}),");",or(Oe,function(ie){return Ze+"["+ie+"]="+Ee+"["+ie+"];"}).join("")),_("if(",or(Oe,function(ie){return Ee+"["+ie+"]!=="+Ze+"["+ie+"]"}).join("||"),"){",Ve,"}")}else Ee=z.def(F,".",V),Ze=z.def(I,".",V),Ve(Ee,");",I,".",V,"=",Ee,";"),_("if(",Ee,"!==",Ze,"){",Ve,"}");L(Ve)}),T.compile()}(),compile:ct}}function CP(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var kP=34918,MP=34919,ly=35007,NP=function(h,S){if(!S.ext_disjoint_timer_query)return null;var O=[];function Y(){return O.pop()||S.ext_disjoint_timer_query.createQueryEXT()}function re(he){O.push(he)}var W=[];function K(he){var Re=Y();S.ext_disjoint_timer_query.beginQueryEXT(ly,Re),W.push(Re),fe(W.length-1,W.length,he)}function ue(){S.ext_disjoint_timer_query.endQueryEXT(ly)}function ce(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var me=[];function ge(){return me.pop()||new ce}function ve(he){me.push(he)}var $e=[];function fe(he,Re,ae){var ke=ge();ke.startQueryIndex=he,ke.endQueryIndex=Re,ke.sum=0,ke.stats=ae,$e.push(ke)}var pe=[],B=[];function Q(){var he,Re,ae=W.length;if(ae!==0){B.length=Math.max(B.length,ae+1),pe.length=Math.max(pe.length,ae+1),pe[0]=0,B[0]=0;var ke=0;for(he=0,Re=0;Re<W.length;++Re){var Te=W[Re];S.ext_disjoint_timer_query.getQueryObjectEXT(Te,MP)?(ke+=S.ext_disjoint_timer_query.getQueryObjectEXT(Te,kP),re(Te)):W[he++]=Te,pe[Re+1]=ke,B[Re+1]=he}for(W.length=he,he=0,Re=0;Re<$e.length;++Re){var Ue=$e[Re],oe=Ue.startQueryIndex,ne=Ue.endQueryIndex;Ue.sum+=pe[ne]-pe[oe];var Fe=B[oe],Se=B[ne];Se===Fe?(Ue.stats.gpuTime+=Ue.sum/1e6,ve(Ue)):(Ue.startQueryIndex=Fe,Ue.endQueryIndex=Se,$e[he++]=Ue)}$e.length=he}}return{beginQuery:K,endQuery:ue,pushScopeStats:fe,update:Q,getNumPendingQueries:function(){return W.length},clear:function(){O.push.apply(O,W);for(var he=0;he<O.length;he++)S.ext_disjoint_timer_query.deleteQueryEXT(O[he]);W.length=0,O.length=0},restore:function(){W.length=0,O.length=0}}},RP=16384,OP=256,LP=1024,FP=34962,cy="webglcontextlost",uy="webglcontextrestored",fy=1,DP=2,IP=3;function dy(h,S){for(var O=0;O<h.length;++O)if(h[O]===S)return O;return-1}function zP(h){var S=DA(h);if(!S)return null;var O=S.gl,Y=O.getContextAttributes(),re=O.isContextLost(),W=IA(O,S);if(!W)return null;var K=NA(),ue=CP(),ce=W.extensions,me=NP(O,ce),ge=xg(),ve=O.drawingBufferWidth,$e=O.drawingBufferHeight,fe={tick:0,time:0,viewportWidth:ve,viewportHeight:$e,framebufferWidth:ve,framebufferHeight:$e,drawingBufferWidth:ve,drawingBufferHeight:$e,pixelRatio:S.pixelRatio},pe={},B={elements:null,primitive:4,count:-1,offset:0,instances:-1},Q=Ab(O,ce),he=Gb(O,ue,S,ke),Re=Jb(O,ce,he,ue),ae=JT(O,ce,Q,ue,he,Re,B);function ke(Xe){return ae.destroyBuffer(Xe)}var Te=rP(O,K,ue,S),Ue=kT(O,ce,Q,function(){Fe.procs.poll()},fe,ue,S),oe=MT(O,ce,Q,ue,S),ne=QT(O,ce,Q,Ue,oe,ue),Fe=PP(O,K,ce,Q,he,Re,Ue,ne,pe,ae,Te,B,fe,me,S),Se=iP(O,ne,Fe.procs.poll,fe,Y,ce,Q),de=Fe.next,Ae=O.canvas,be=[],tt=[],Ke=[],Pe=[S.onDestroy],Ne=null;function We(){if(be.length===0){me&&me.update(),Ne=null;return}Ne=w1.next(We),vn();for(var Xe=be.length-1;Xe>=0;--Xe){var ht=be[Xe];ht&&ht(fe,null,0)}O.flush(),me&&me.update()}function nt(){!Ne&&be.length>0&&(Ne=w1.next(We))}function dt(){Ne&&(w1.cancel(We),Ne=null)}function Rt(Xe){Xe.preventDefault(),re=!0,dt(),tt.forEach(function(ht){ht()})}function Lt(Xe){O.getError(),re=!1,W.restore(),Te.restore(),he.restore(),Ue.restore(),oe.restore(),ne.restore(),ae.restore(),me&&me.restore(),Fe.procs.refresh(),nt(),Ke.forEach(function(ht){ht()})}Ae&&(Ae.addEventListener(cy,Rt,!1),Ae.addEventListener(uy,Lt,!1));function pt(){be.length=0,dt(),Ae&&(Ae.removeEventListener(cy,Rt),Ae.removeEventListener(uy,Lt)),Te.clear(),ne.clear(),oe.clear(),ae.clear(),Ue.clear(),Re.clear(),he.clear(),me&&me.clear(),Pe.forEach(function(Xe){Xe()})}function Kt(Xe){b(!!Xe,"invalid args to regl({...})"),b.type(Xe,"object","invalid args to regl({...})");function ht(G){var D=r({},G);delete D.uniforms,delete D.attributes,delete D.context,delete D.vao,"stencil"in D&&D.stencil.op&&(D.stencil.opBack=D.stencil.opFront=D.stencil.op,delete D.stencil.op);function F(I){if(I in D){var P=D[I];delete D[I],Object.keys(P).forEach(function(R){D[I+"."+R]=P[R]})}}return F("blend"),F("depth"),F("cull"),F("stencil"),F("polygonOffset"),F("scissor"),F("sample"),"vao"in G&&(D.vao=G.vao),D}function vt(G,D){var F={},I={};return Object.keys(G).forEach(function(P){var R=G[P];if(rr.isDynamic(R)){I[P]=rr.unbox(R,P);return}else if(D&&Array.isArray(R)){for(var C=0;C<R.length;++C)if(rr.isDynamic(R[C])){I[P]=rr.unbox(R,P);return}}F[P]=R}),{dynamic:I,static:F}}var jt=vt(Xe.context||{},!0),Wr=vt(Xe.uniforms||{},!0),Fs=vt(Xe.attributes||{},!1),M=vt(ht(Xe),!1),q={gpuTime:0,cpuTime:0,count:0},H=Fe.compile(M,Fs,Wr,jt,q),Le=H.draw,ct=H.batch,T=H.scope,_=[];function L(G){for(;_.length<G;)_.push(null);return _}function z(G,D){var F;if(re&&b.raise("context lost"),typeof G=="function")return T.call(this,null,G,0);if(typeof D=="function")if(typeof G=="number")for(F=0;F<G;++F)T.call(this,null,D,F);else if(Array.isArray(G))for(F=0;F<G.length;++F)T.call(this,G[F],D,F);else return T.call(this,G,D,0);else if(typeof G=="number"){if(G>0)return ct.call(this,L(G|0),G|0)}else if(Array.isArray(G)){if(G.length)return ct.call(this,G,G.length)}else return Le.call(this,G)}return r(z,{stats:q,destroy:function(){H.destroy()}})}var Pt=ne.setFBO=Kt({framebuffer:rr.define.call(null,fy,"framebuffer")});function Zt(Xe,ht){var vt=0;Fe.procs.poll();var jt=ht.color;jt&&(O.clearColor(+jt[0]||0,+jt[1]||0,+jt[2]||0,+jt[3]||0),vt|=RP),"depth"in ht&&(O.clearDepth(+ht.depth),vt|=OP),"stencil"in ht&&(O.clearStencil(ht.stencil|0),vt|=LP),b(!!vt,"called regl.clear with no buffer specified"),O.clear(vt)}function Jt(Xe){if(b(typeof Xe=="object"&&Xe,"regl.clear() takes an object as input"),"framebuffer"in Xe)if(Xe.framebuffer&&Xe.framebuffer_reglType==="framebufferCube")for(var ht=0;ht<6;++ht)Pt(r({framebuffer:Xe.framebuffer.faces[ht]},Xe),Zt);else Pt(Xe,Zt);else Zt(null,Xe)}function en(Xe){b.type(Xe,"function","regl.frame() callback must be a function"),be.push(Xe);function ht(){var vt=dy(be,Xe);b(vt>=0,"cannot cancel a frame twice");function jt(){var Wr=dy(be,jt);be[Wr]=be[be.length-1],be.length-=1,be.length<=0&&dt()}be[vt]=jt}return nt(),{cancel:ht}}function cn(){var Xe=de.viewport,ht=de.scissor_box;Xe[0]=Xe[1]=ht[0]=ht[1]=0,fe.viewportWidth=fe.framebufferWidth=fe.drawingBufferWidth=Xe[2]=ht[2]=O.drawingBufferWidth,fe.viewportHeight=fe.framebufferHeight=fe.drawingBufferHeight=Xe[3]=ht[3]=O.drawingBufferHeight}function vn(){fe.tick+=1,fe.time=it(),cn(),Fe.procs.poll()}function Vt(){Ue.refresh(),cn(),Fe.procs.refresh(),me&&me.update()}function it(){return(xg()-ge)/1e3}Vt();function gn(Xe,ht){b.type(ht,"function","listener callback must be a function");var vt;switch(Xe){case"frame":return en(ht);case"lost":vt=tt;break;case"restore":vt=Ke;break;case"destroy":vt=Pe;break;default:b.raise("invalid event, must be one of frame,lost,restore,destroy")}return vt.push(ht),{cancel:function(){for(var jt=0;jt<vt.length;++jt)if(vt[jt]===ht){vt[jt]=vt[vt.length-1],vt.pop();return}}}}var xt=r(Kt,{clear:Jt,prop:rr.define.bind(null,fy),context:rr.define.bind(null,DP),this:rr.define.bind(null,IP),draw:Kt({}),buffer:function(Xe){return he.create(Xe,FP,!1,!1)},elements:function(Xe){return Re.create(Xe,!1)},texture:Ue.create2D,cube:Ue.createCube,renderbuffer:oe.create,framebuffer:ne.create,framebufferCube:ne.createCube,vao:ae.createVAO,attributes:Y,frame:en,on:gn,limits:Q,hasExtension:function(Xe){return Q.extensions.indexOf(Xe.toLowerCase())>=0},read:Se,destroy:pt,_gl:O,_refresh:Vt,poll:function(){vn(),me&&me.update()},now:it,stats:ue});return S.onDone(null,xt),xt}return zP})}(jh)),jh.exports}const oee=nee,see=g1,iee=e=>{const n=Object.assign({},{},e.glOptions,{onDone:(i,a)=>{if(i)throw i}}),r=ree()(n),o=new Map,s=i=>{i.rendering=Object.assign({},see,i.rendering),oee(r)(i,a=>{r.clear({color:i.rendering.background,depth:1}),i.entities&&i.entities.sort((l,c)=>{const u="transparent"in l.visuals?l.visuals.transparent:!1,f="transparent"in c.visuals?c.visuals.transparent:!1;return u===f?0:u?1:-1}).forEach(l=>{const{visuals:c}=l;if(("show"in c?c.show:!0)&&c.drawCmd&&i.drawCommands[c.drawCmd]){let f;c.cacheId?f=o.get(c.cacheId):(c.cacheId=o.size,f=i.drawCommands[c.drawCmd](r,l),o.set(c.cacheId,f));const d={...l,...c,camera:i.camera};f(d)}})})};return function(a){r.poll(),s(a)}};var aee=iee,Uh,Nx;function Rx(){if(Nx)return Uh;Nx=1;const e=Mr;return Uh=(n,r={})=>{const o=[],s={visuals:{color:[0,0,1,1],fadeOut:!1},ticks:1,size:[16,16],centered:!1,lineWidth:2},i=Object.assign({},s.visuals,r.visuals||{}),{fadeOut:a,color:l}=i,{size:c,ticks:u,centered:f,lineWidth:d}=Object.assign({},s,r),p=c[0],y=c[1];if(f){const v=p*.5,x=y*.5,m=v%u,g=-v+m,w=-g,E=x%u,A=-x+E,$=-A,k=0;for(let N=g,X=0;N<=w;N+=u,X+=1)X%k!==0&&(o.push(A,N,0),o.push($,N,0),o.push(A,N,0));for(let N=A,X=0;N<=$;N+=u,X+=1)X%k!==0&&(o.push(N,g,0),o.push(N,w,0),o.push(N,g,0))}else{for(let v=-p*.5;v<=p*.5;v+=u)o.push(-y*.5,v,0),o.push(y*.5,v,0),o.push(-y*.5,v,0);for(let v=-y*.5;v<=y*.5;v+=u)o.push(v,-p*.5,0),o.push(v,p*.5,0),o.push(v,-p*.5,0)}return n({vert:`precision mediump float;

    uniform float camNear, camFar;
    uniform mat4 model, view, projection;

    attribute vec3 position;
    varying vec3 fragNormal, fragPosition;
    varying vec4 worldPosition;

    void main() {
      fragPosition = position;
      worldPosition = model * vec4(position, 1);
      vec4 glPosition = projection * view * worldPosition;
      gl_Position = glPosition;
    }`,frag:`precision mediump float;
    uniform vec4 color;
    varying vec3 fragNormal, fragPosition;
    varying vec4 worldPosition;

    uniform vec4 fogColor;
    uniform bool fadeOut;
    void main() {
      float dist = .5;
      if(fadeOut){
        dist = distance( vec2(0.,0.), vec2(worldPosition.x, worldPosition.y));
        dist *= 0.0025;
        dist = sqrt(dist);
      }

      gl_FragColor = mix(color, fogColor, dist);
    }
    `,attributes:{position:n.buffer(o)},count:o.length/3,uniforms:{model:(v,x)=>x&&x.model?x.model:e.identity([]),color:(v,x)=>x&&x.color?x.color:l,fogColor:(v,x)=>x&&x.color?[x.color[0],x.color[1],x.color[2],0]:[l[0],l[1],l[2],0],fadeOut:(v,x)=>x&&x.fadeOut!==void 0?x.fadeOut:a},lineWidth:(v,x)=>Math.min(x&&x.lineWidth?x.lineWidth:d,n.limits.lineWidthDims[1]),primitive:"lines",cull:{enable:!0,face:"front"},polygonOffset:{enable:!0,offset:{factor:1,units:Math.random()*10}},blend:{enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}})},Uh}const lee=(e,t)=>{const n={size:[50,50],ticks:[10,1]},{size:r,ticks:o}=Object.assign({},n,t),s=Rx()(e,{size:r,ticks:o[0]}),i=Rx()(e,{size:r,ticks:o[1]});return l=>{s(l),i({color:l.subColor,fadeOut:l.fadeOut})}};var cee=lee;const In=Mr,uee=(e,t)=>{const n={xColor:[1,0,0,1],yColor:[0,1,0,1],zColor:[0,0,1,1],size:10,lineWidth:3,alwaysVisible:!0};let{size:r,xColor:o,yColor:s,zColor:i,lineWidth:a,alwaysVisible:l}=Object.assign({},n,t);a>e.limits.lineWidthDims[1]&&(a=e.limits.lineWidthDims[1]);const c=[0,0,0,r,0,0],u={frag:`precision mediump float;
    uniform vec4 color;
    void main() {
      gl_FragColor = color;
    }`,vert:`
    precision mediump float;
    attribute vec3 position;
    uniform mat4 model, view, projection;
    void main() {
      gl_Position = projection * view * model * vec4(position, 1);
    }`,uniforms:{model:(v,x)=>x&&x.model?x.model:In.identity([]),color:(v,x)=>x.color,angle:(v,x)=>x.angle},attributes:{position:c},count:c.length/3,primitive:"line loop",lineWidth:a,depth:{enable:!l}},f=In.identity([]),d=In.rotateZ(In.create(),In.identity([]),Math.PI/2),p=In.rotateY(In.create(),In.identity([]),-Math.PI/2),y=e(u);return v=>{const x={model:In.identity([])};return v=Object.assign({},x,v),y([{color:o,model:In.multiply(In.create(),v.model,f)},{color:s,model:In.multiply(In.create(),v.model,d)},{color:i,model:In.multiply(In.create(),v.model,p)}])}};var fee=uee,Hh,Ox;function Lx(){return Ox||(Ox=1,Hh={frag:`
precision mediump float;
varying vec3 surfaceNormal, surfacePosition;

uniform float ambientLightAmount;
uniform float diffuseLightAmount;
uniform float specularLightAmount;

uniform vec3 lightDirection;
uniform vec4 lightColor;
uniform vec3 opacity;
uniform float uMaterialShininess;

varying vec4 vColor;
uniform vec4 ucolor;
uniform float vColorToggler;

uniform vec2 printableArea;
vec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);//vec4(0.15, 0.15, 0.15, 0.3);
varying vec4 _worldSpacePosition;
varying float ambientAo;

void main () {
  vec4 depth = gl_FragCoord;
  vec4 endColor = vColor * vColorToggler + ucolor * (1.0 - vColorToggler);

  vec3 ambient = ambientLightAmount * endColor.rgb ; //ambientAo * 

  float diffuseWeight = dot(surfaceNormal, lightDirection);
  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(diffuseWeight , 0.0, 1.0 );

  //specular
  
  vec4 specularColor = vec4(lightColor);
  vec3 eyeDirection = normalize(surfacePosition.xyz);
  vec3 reflectionDirection = reflect(-lightDirection, -surfaceNormal);
  float specularLightWeight = pow(max(dot(reflectionDirection, eyeDirection), 0.0), uMaterialShininess);
  vec3 specular = specularColor.rgb * specularLightWeight * specularLightAmount;

  gl_FragColor = vec4((ambient + diffuse + specular), endColor.a);
}
`,vert:`
precision mediump float;

uniform float camNear, camFar;
uniform mat4 model, view, projection, unormal;

attribute vec3 position, normal;
attribute vec4 color;

attribute float ao;
varying float ambientAo;

varying vec3 surfaceNormal, surfacePosition;
varying vec4 _worldSpacePosition;
varying vec4 vColor;

void main() {
  surfacePosition = (unormal * vec4(position, 1.0)).xyz;
  surfaceNormal = normalize((unormal * vec4(normal, 1.0)).xyz); //vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);
  vec4 worldSpacePosition = model * vec4(position, 1);
  _worldSpacePosition = worldSpacePosition;
  //gl_Position = projection * view * worldSpacePosition;

  vColor = color;

  //ambientAo = (1. - ao) * (0.5 * max(normal.x, 0.) + 0.5);

  vec4 glPosition = projection * view * model * vec4(position, 1);
  gl_Position = glPosition;
  //gl_Position = zBufferAdjust(glPosition, camNear, camFar);
}
`}),Hh}var Xh,Fx;function Dx(){return Fx||(Fx=1,Xh={vert:`
precision mediump float;

uniform float camNear, camFar;
uniform mat4 model, view, projection;

attribute vec3 position, normal;

varying vec3 surfaceNormal, surfacePosition;
varying vec4 _worldSpacePosition;

void main() {
  surfacePosition = position;
  surfaceNormal = normal;
  vec4 worldSpacePosition = model * vec4(position, 1);
  _worldSpacePosition = worldSpacePosition;

  vec4 glPosition = projection * view * model * vec4(position, 1);
  gl_Position = glPosition;
}
`,frag:`
precision mediump float;
varying vec3 surfaceNormal;
uniform float ambientLightAmount;
uniform float diffuseLightAmount;
uniform vec4 ucolor;
uniform vec3 lightDirection;
uniform vec3 opacity;

varying vec4 _worldSpacePosition;

uniform vec2 printableArea;

vec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);

void main () {
  vec4 depth = gl_FragCoord;

  float v = 0.8; // shadow value
  vec4 endColor = ucolor;

  vec3 ambient = ambientLightAmount * endColor.rgb;
  float cosTheta = dot(surfaceNormal, lightDirection);
  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(cosTheta , 0.0, 1.0 );

  float cosTheta2 = dot(surfaceNormal, vec3(-lightDirection.x, -lightDirection.y, lightDirection.z));
  vec3 diffuse2 = diffuseLightAmount * endColor.rgb * clamp(cosTheta2 , 0.0, 1.0 );

  gl_FragColor = vec4((ambient + diffuse + diffuse2 * v), endColor.a);
}`}),Xh}const Yo=Mr,{meshColor:dee}=g1,hee=(e,t={extras:{}})=>{const n={useVertexColors:!0,dynamicCulling:!0,geometry:void 0,color:dee,visuals:{}},{geometry:r,dynamicCulling:o,useVertexColors:s,color:i,visuals:a}=Object.assign({},n,t),l=e.buffer([]),c=!!(r.indices&&r.indices.length>0),u=!!(r.normals&&r.normals.length>0),f="transparent"in a?a.transparent:!1,d=!!(s&&r.colors&&r.colors.length>0),p=r.transforms||Yo.create(),y=Yo.determinant(p)<0,v=o&&y?"front":"back",x=d?Lx().vert:Dx().vert,m=d?Lx().frag:Dx().frag,g=Yo.invert(Yo.create(),p);let w={primitive:"triangles",vert:x,frag:m,uniforms:{model:(E,A)=>p,ucolor:(E,A)=>A&&A.color?A.color:i,vColorToggler:(E,A)=>A&&A.useVertexColors&&A.useVertexColors===!0?1:0,unormal:(E,A)=>{const $=Yo.invert(Yo.create(),A.camera.view);return Yo.multiply($,g,$),Yo.transpose($,$),$}},attributes:{position:e.buffer({usage:"static",type:"float",data:r.positions}),ao:l},cull:{enable:!0,face:v}};return f&&(w.blend={enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}),r.cells?w.elements=r.cells:c?w.elements=e.elements({usage:"static",type:"uint16",data:r.indices}):r.triangles?w.elements=r.triangles:w.count=r.positions.length/3,u&&(w.attributes.normal=e.buffer({usage:"static",type:"float",data:r.normals})),d&&(w.attributes.color=e.buffer({usage:"static",type:"float",data:r.colors})),w=Object.assign({},w,t.extras),e(w)};var pee=hee,Wh,Ix;function zx(){return Ix||(Ix=1,Wh={frag:`
precision mediump float;
varying vec4 vColor;

void main () {
  gl_FragColor = vColor;
}
`,vert:`
precision mediump float;

uniform float camNear, camFar;
uniform mat4 model, view, projection;

attribute vec3 position, normal;
attribute vec4 color;

varying vec3 surfaceNormal, surfacePosition;
varying vec4 _worldSpacePosition;
varying vec4 vColor;

void main() {
  vColor = color;

  surfacePosition = position;
  surfaceNormal = normal;
  vec4 worldSpacePosition = model * vec4(position, 1);
  _worldSpacePosition = worldSpacePosition;

  vec4 glPosition = projection * view * model * vec4(position, 1);
  gl_Position = glPosition;
}
`}),Wh}var Yh,Bx;function mee(){return Bx||(Bx=1,Yh={vert:`
precision mediump float;

uniform float camNear, camFar;
uniform mat4 model, view, projection;

attribute vec3 position, normal;


varying vec3 surfaceNormal, surfacePosition;
varying vec4 _worldSpacePosition;


void main() {


  surfacePosition = position;
  surfaceNormal = normal;
  vec4 worldSpacePosition = model * vec4(position, 1);
  _worldSpacePosition = worldSpacePosition;

  vec4 glPosition = projection * view * model * vec4(position, 1);
  gl_Position = glPosition;
}
`,frag:`
precision mediump float;
varying vec3 surfaceNormal;
uniform float ambientLightAmount;
uniform float diffuseLightAmount;
uniform vec4 ucolor;
uniform vec3 lightDirection;
uniform vec3 opacity;

varying vec4 _worldSpacePosition;

uniform vec2 printableArea;

vec4 errorColor = vec4(0.15, 0.15, 0.15, 0.3);

void main () {
  vec4 depth = gl_FragCoord;

  float v = 0.8; // shadow value
  vec4 endColor = ucolor;

  vec3 ambient = ambientLightAmount * endColor.rgb;
  float cosTheta = dot(surfaceNormal, lightDirection);
  vec3 diffuse = diffuseLightAmount * endColor.rgb * clamp(cosTheta , 0.0, 1.0 );

  float cosTheta2 = dot(surfaceNormal, vec3(-lightDirection.x, -lightDirection.y, lightDirection.z));
  vec3 diffuse2 = diffuseLightAmount * endColor.rgb * clamp(cosTheta2 , 0.0, 1.0 );

  gl_FragColor = vec4((ambient + diffuse + diffuse2 * v), endColor.a);
}`}),Yh}var qh,Gx;function vee(){return Gx||(Gx=1,qh={frag:`
precision mediump float;
uniform vec4 ucolor;

void main () {
  gl_FragColor = ucolor;
}
`}),qh}const gee=Mr,{meshColor:yee}=g1,wee=(e,t={})=>{const n={color:yee,geometry:void 0};let{geometry:r,color:o,transparent:s}=Object.assign({},n,t);"color"in r&&(o=r.color);const i=!!(r.indices&&r.indices.length>0),a=!!(r.normals&&r.normals.length>0),l=!!(r.colors&&r.colors.length>0),c=l?zx().vert:mee().vert,u=l?zx().frag:vee().frag,f={primitive:"lines",vert:c,frag:u,uniforms:{model:(d,p)=>p.model||r.transforms||gee.create(),ucolor:(d,p)=>p&&p.color?p.color:o},attributes:{position:e.buffer({usage:"static",type:"float",data:r.positions})}};return s&&(f.blend={enable:!0,func:{src:"src alpha",dst:"one minus src alpha"}}),l&&(f.attributes.color=e.buffer({usage:"static",type:"float",data:r.colors})),i&&(f.elements=e.elements({usage:"static",type:"uint16",data:r.indices})),a&&(f.attributes.normal=e.buffer({usage:"static",type:"float",data:r.normals})),e(f)};var xee=wee,cA=1e-6,uA=Eee;function Eee(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}var _ee=$ee;function $ee(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}var fA=See;function See(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}var dA=Aee;function Aee(e,t){var n=t[0],r=t[1],o=t[2],s=n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}var hA=bee;function bee(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}var Tee=Cee,Vx=fA,jx=dA,Pee=hA;function Cee(e,t){var n=Vx(e[0],e[1],e[2]),r=Vx(t[0],t[1],t[2]);jx(n,n),jx(r,r);var o=Pee(n,r);return o>1?0:Math.acos(o)}var kee=Mee;function Mee(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var Nee=Ree;function Ree(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}var Oee=Lee,Zh=cA;function Lee(e,t){var n=e[0],r=e[1],o=e[2],s=t[0],i=t[1],a=t[2];return Math.abs(n-s)<=Zh*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-i)<=Zh*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-a)<=Zh*Math.max(1,Math.abs(o),Math.abs(a))}var Fee=Dee;function Dee(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var Iee=zee;function zee(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}var pA=Bee;function Bee(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}var Gee=pA,mA=Vee;function Vee(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}var jee=mA,vA=Uee;function Uee(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}var Hee=vA,Xee=Wee;function Wee(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}var Yee=qee;function qee(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}var Zee=Qee;function Qee(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}var Kee=Jee;function Jee(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}var ete=tte;function tte(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}var nte=rte;function rte(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}var ote=ste;function ste(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}var gA=ite;function ite(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)}var ate=gA,yA=lte;function lte(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o}var cte=yA,wA=ute;function ute(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}var fte=wA,xA=dte;function dte(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}var hte=xA,pte=mte;function mte(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}var vte=gte;function gte(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}var yte=wte;function wte(e,t,n){var r=t[0],o=t[1],s=t[2],i=n[0],a=n[1],l=n[2];return e[0]=o*l-s*a,e[1]=s*i-r*l,e[2]=r*a-o*i,e}var xte=Ete;function Ete(e,t,n,r){var o=t[0],s=t[1],i=t[2];return e[0]=o+r*(n[0]-o),e[1]=s+r*(n[1]-s),e[2]=i+r*(n[2]-i),e}var _te=$te;function $te(e,t){t=t||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e}var Ste=Ate;function Ate(e,t,n){var r=t[0],o=t[1],s=t[2],i=n[3]*r+n[7]*o+n[11]*s+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*s+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*s+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*s+n[14])/i,e}var bte=Tte;function Tte(e,t,n){var r=t[0],o=t[1],s=t[2];return e[0]=r*n[0]+o*n[3]+s*n[6],e[1]=r*n[1]+o*n[4]+s*n[7],e[2]=r*n[2]+o*n[5]+s*n[8],e}var Pte=Cte;function Cte(e,t,n){var r=t[0],o=t[1],s=t[2],i=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*s-l*o,f=c*o+l*r-i*s,d=c*s+i*o-a*r,p=-i*r-a*o-l*s;return e[0]=u*c+p*-i+f*-l-d*-a,e[1]=f*c+p*-a+d*-i-u*-l,e[2]=d*c+p*-l+u*-a-f*-i,e}var kte=Mte;function Mte(e,t,n,r){var o=n[1],s=n[2],i=t[1]-o,a=t[2]-s,l=Math.sin(r),c=Math.cos(r);return e[0]=t[0],e[1]=o+i*c-a*l,e[2]=s+i*l+a*c,e}var Nte=Rte;function Rte(e,t,n,r){var o=n[0],s=n[2],i=t[0]-o,a=t[2]-s,l=Math.sin(r),c=Math.cos(r);return e[0]=o+a*l+i*c,e[1]=t[1],e[2]=s+a*c-i*l,e}var Ote=Lte;function Lte(e,t,n,r){var o=n[0],s=n[1],i=t[0]-o,a=t[1]-s,l=Math.sin(r),c=Math.cos(r);return e[0]=o+i*c-a*l,e[1]=s+i*l+a*c,e[2]=t[2],e}var Fte=Dte,qo=uA();function Dte(e,t,n,r,o,s){var i,a;for(t||(t=3),n||(n=0),r?a=Math.min(r*t+n,e.length):a=e.length,i=n;i<a;i+=t)qo[0]=e[i],qo[1]=e[i+1],qo[2]=e[i+2],o(qo,qo,s),e[i]=qo[0],e[i+1]=qo[1],e[i+2]=qo[2];return e}var Vc={EPSILON:cA,create:uA,clone:_ee,angle:Tee,fromValues:fA,copy:kee,set:Nee,equals:Oee,exactEquals:Fee,add:Iee,subtract:pA,sub:Gee,multiply:mA,mul:jee,divide:vA,div:Hee,min:Xee,max:Yee,floor:Zee,ceil:Kee,round:ete,scale:nte,scaleAndAdd:ote,distance:gA,dist:ate,squaredDistance:yA,sqrDist:cte,length:wA,len:fte,squaredLength:xA,sqrLen:hte,negate:pte,inverse:vte,normalize:dA,dot:hA,cross:yte,lerp:xte,random:_te,transformMat4:Ste,transformMat3:bte,transformQuat:Pte,rotateX:kte,rotateY:Nte,rotateZ:Ote,forEach:Fte};const ti=Mr,Qh=Vc,EA={view:ti.identity(new Float32Array(16)),projection:ti.identity(new Float32Array(16)),matrix:ti.identity(new Float32Array(16)),near:1,far:18e3,up:[0,0,1],eye:new Float32Array(3),position:[450,550,700],target:[0,0,0],fov:Math.PI/4,aspect:1,viewport:[0,0,0,0],projectionType:"perspective"},_A={},Ite=Object.assign({},EA,_A),zte=(e,t,n)=>{const r=n.width/n.height,o=ti.perspective(ti.identity([]),t.fov,r,t.near,t.far),s=[0,0,n.width,n.height],i=e||{};return i.projection=o,i.aspect=r,i.viewport=s,i},Bte=(e,t)=>{t||(t=e);const{position:n,target:r,up:o}=t,s=Qh.subtract([],n,r),i=Qh.add(Qh.create(),r,s),a=ti.lookAt(ti.create(),i,r,o),l=e||{};return l.position=i,l.view=a,l};var wm={cameraState:EA,cameraProps:_A,defaults:Ite,setProjection:zte,update:Bte};const Lf=Mr,Gte={view:Lf.identity(new Float32Array(16)),projection:Lf.identity(new Float32Array(16)),matrix:Lf.identity(new Float32Array(16)),near:1,far:1300,up:[0,0,1],eye:new Float32Array(3),position:[150,250,200],target:[0,0,0],fov:Math.PI/4,aspect:1,viewport:[0,0,0,0],zoom:1,projectionType:"orthographic"},Vte={},jte=(e,t)=>{const{width:n,height:r}=t,o=n/r,s=[0,0,n,r],i=e.zoom,a=-n*i,l=n*i,c=-r*i,u=r*i;return{projection:Lf.ortho([],a,l,c,u,e.near,e.far),aspect:o,viewport:s}};var Sd={cameraState:Gte,cameraProps:Vte,setProjection:jte};const va=Vc,Ad=Mr,Ute=e=>{const{near:t,far:n,fov:r,zoom:o}=e,{viewport:s}=e,i=wm.setProjection(e,{width:s[2],height:s[3]}),{projectionType:a}=wm.cameraState;return Object.assign({},e,i,{projectionType:a},{near:t,far:n,fov:r})},Hte=e=>{const{fov:t,aspect:n}=e,r=va.length(va.subtract([],e.position,e.target))*.3,o=Math.tan(t)*r*n,s=Math.tan(t)*r,{near:i,far:a,viewport:l}=e,c={zoom:1,near:i,far:a},u=Sd.cameraState,f=Sd.setProjection(c,{width:o,height:s});return Object.assign({},u,e,f,{projectionType:u.projectionType,viewport:l})},Xte=({camera:e})=>{const n=va.distance(e.position,e.target),r=[n,n,n];return{view:Ad.lookAt(Ad.create(),r,e.target,e.up),position:r}},Wte=(e,{camera:t})=>{const n={top:[0,-1e-6,1],bottom:[0,0,-1],front:[0,1,0],back:[0,-1,0],left:[-1,0,0],right:[1,0,0],undefined:[0,0,0]},r=va.distance(t.position,t.target),o=va.add(va.create(),n[e].map(i=>i*r),t.target);return{view:Ad.lookAt(Ad.create(),o,t.target,t.up),position:o}};var Yte={toPerspectiveView:Xte,toPresetView:Wte,fromOrthographicToPerspective:Ute,fromPerspectiveToOrthographic:Hte};const qte=e=>{if(e.length===0)return[[0,0,0],[0,0,0]];const t=Array.isArray(e)&&Array.isArray(e[0]),n=t?e[0].length:3,r=new Array(n),o=new Array(n);for(let s=0;s<n;s+=1)r[s]=1/0,o[s]=-1/0;if(t)e.forEach(s=>{for(let i=0;i<n;i+=1){const a=t?s[i]:s;o[i]=a>o[i]?a:o[i],r[i]=a<r[i]?a:r[i]}});else for(let s=0;s<e.length;s+=n)for(let i=0;i<n;i+=1){const a=e[i+s];o[i]=a>o[i]?a:o[i],r[i]=a<r[i]?a:r[i]}return[r,o]};var Zte=qte;const ur=Vc,{flatten:Qte}=mg,Kte=Zte,Jte=(...e)=>{e=Qte(e);let t;e.forEach(l=>{let c=Kte(l.positions);c=c.map(u=>ur.transformMat4(u,u,l.transforms)),t?(ur.min(t[0],t[0],c[0]),ur.max(t[1],t[1],c[1])):t=c});const n=ur.min(ur.create(),t[1],t[0]),r=ur.max(ur.create(),t[1],t[0]),o=ur.subtract(ur.create(),r,n);let s=ur.scale(ur.create(),o,.5);return s=ur.add(s,n,s),{dia:ur.distance(s,r),center:[...s],min:[...n],max:[...r],size:[...o]}};var ene=Jte,Kh,Ux;function tne(){if(Ux)return Kh;Ux=1,Kh=e;function e(t,n,r){var o=n[0],s=n[1],i=n[2],a=r[0],l=r[1],c=r[2],u=r[3],f=r[4],d=r[5],p=r[6],y=r[7],v=r[8],x=r[9],m=r[10],g=r[11],w=r[12],E=r[13],A=r[14],$=r[15],k=1/(o*u+s*y+i*g+$);return t[0]=(o*a+s*f+i*v+w)*k,t[1]=(o*l+s*d+i*x+E)*k,t[2]=(o*c+s*p+i*m+A)*k,t}return Kh}var Jh,Hx;function nne(){if(Hx)return Jh;Hx=1;var e=tne();Jh=t;function t(n,r,o,s){var i=o[0],a=o[1],l=o[2],c=o[3],u=r[0],f=r[1],d=r[2];return u=u-i,f=c-f-1,f=f-a,n[0]=2*u/l-1,n[1]=2*f/c-1,n[2]=2*d-1,e(n,n,s)}return Jh}const Gn=Vc,$c=Mr,{max:ep,min:tp,sqrt:Xx,PI:rne,sin:Xi,cos:vf,atan2:gf}=Math,one=ene,vg={limits:{minDistance:.01,maxDistance:1e4},drag:.27,EPS:1e-6,zoomToFit:{auto:!0,targets:"all",tightness:1.5},userControl:{zoom:!0,zoomSpeed:1,rotate:!0,rotateSpeed:1,pan:!0,panSpeed:1},autoRotate:{enabled:!1,speed:1},autoAdjustPlanes:!0},$A={thetaDelta:0,phiDelta:0,scale:1},sne=Object.assign({},$A,vg),ine=({controls:e,camera:t},n)=>{const{EPS:r,drag:o}=e,{position:s,target:i}=t,a=e.up?e.up:t.up;let l=e.thetaDelta;const c=e.phiDelta,u=e.scale,f=Gn.subtract([],s,i);let d,p;a[2]===1?(d=gf(f[0],f[1]),p=gf(Xx(f[0]*f[0]+f[1]*f[1]),f[2])):(d=gf(f[0],f[2]),p=gf(Xx(f[0]*f[0]+f[2]*f[2]),f[1])),e.autoRotate.enabled&&e.userControl.rotate&&(l+=2*Math.PI/60/60*e.autoRotate.speed),d+=l,p+=c,p=ep(r,tp(rne-r,p));const y=ep(e.limits.minDistance,tp(e.limits.maxDistance,Gn.length(f)*u));a[2]===1?(f[0]=y*Xi(p)*Xi(d),f[2]=y*vf(p),f[1]=y*Xi(p)*vf(d)):(f[0]=y*Xi(p)*Xi(d),f[1]=y*vf(p),f[2]=y*Xi(p)*vf(d));const v=Gn.add(Gn.create(),i,f),x=$c.lookAt($c.create(),v,i,a),m=1-ep(tp(o,1),.01),g=Gn.distance(s,v)>.001;return{controls:{thetaDelta:l*m,phiDelta:c*m,scale:1,changed:g},camera:{position:v,view:x}}},ane=({controls:e,camera:t,speed:n=1},r)=>{let{thetaDelta:o,phiDelta:s}=e;return e.userControl.rotate&&(o+=r[0]*n,s+=r[1]*n),{controls:{thetaDelta:o,phiDelta:s},camera:t}},lne=({controls:e,camera:t,speed:n=1},r=0)=>{let{scale:o}=e;if(e.userControl.zoom&&t&&r!==void 0&&r!==0&&!isNaN(r)){const s=Math.sign(r)===0?1:Math.sign(r);r=r/r*s*n;const i=r+e.scale,a=Gn.distance(t.position,t.target)*i;if(a>e.limits.minDistance&&a<e.limits.maxDistance&&(o+=r),t.projectionType==="orthographic"){const l=Gn.length(Gn.subtract([],t.position,t.target))*.3,c=Math.tan(t.fov)*l*t.aspect,u=Math.tan(t.fov)*l;t=Sd.setProjection(t,{width:c,height:u})}}return{controls:{scale:o},camera:t}},cne=({controls:e,camera:t,speed:n=1},r)=>{const o=nne(),{projection:s,view:i,viewport:a}=t,l=$c.multiply([],s,i),c=$c.invert([],l),u=[a[2],a[3],0],f=[a[2]-r[0],a[3]+r[1],0],d=o([],u,a,c),p=o([],f,a,c),y=Gn.distance(t.position,t.eye),v=Gn.subtract([],d,p).map(x=>x*n*y*e.scale);return{controls:e,camera:{position:Gn.add(Gn.create(),t.position,v),target:Gn.add(Gn.create(),t.target,v)}}},une=({controls:e,camera:t,entities:n})=>{const{zoomToFit:r}=e;if(r.targets!=="all")return{controls:e,camera:t};if(n.length===0)return{controls:e,camera:t};const o=n.map(p=>p.geometry),s=one(o),{fov:i,target:a,position:l}=t,{tightness:c}=Object.assign({},r,vg.zoomToFit),u=s.dia*c/Math.tan(i/2),f=Gn.distance(a,l),d=u/f;return{camera:{target:s.center},controls:{scale:d}}},fne=({controls:e,camera:t},n)=>({camera:{position:n.camera.position,target:n.camera.target,projection:$c.perspective([],t.fov,t.aspect,t.near,t.far),view:n.camera.view},controls:{thetaDelta:n.controls.thetaDelta,phiDelta:n.controls.phiDelta,scale:n.controls.scale}});var dne={controlsProps:vg,controlsState:$A,defaults:sne,update:ine,rotate:ane,zoom:lne,pan:cne,zoomToFit:une,reset:fne};const Wx=Mr,np=Math.floor(65535/2),hne=(e,t)=>{let{color:n}=e;const r=t.sides;if(r.length===0)return[];"color"in t&&(n=t.color);const o=n[3]<1,s=[],i=Math.floor(r.length/np)+1,a=(c,u)=>{s.push(c,u||c)},l=[];for(let c=0;c<i;c++){const u=c*np,f=Math.min(u+np,r.length),d=[];for(let x=u;x<f;x++){const m=r[x];if(m.color){if(s.length===0&&d.length>0){const g=d.length;for(let w=0;w<g;w++)s.push(n)}a(m.color,m.endColor)}else s.length&&a(n);d.push([m[0][0],m[0][1],0]),d.push([m[1][0],m[1][1],0])}const p=d.map(x=>[0,0,-1]),y=d.map((x,m)=>m),v=t.transforms?Wx.clone(t.transforms):Wx.create();l.push({type:"2d",positions:d,normals:p,indices:y,transforms:v,color:n,colors:s,isTransparent:o})}return l};var pne=hne;const Zo=Vc,Yx=Mr,mne=65535,vne=(e,t)=>{let{color:n,smoothLighting:r}=e;"color"in t&&(n=t.color);const o=t.polygons,s=t.transforms?Yx.clone(t.transforms):Yx.create(),i=[];let a=0;for(;a<o.length;){let l=0,c=a;for(let x=a;x<o.length&&(l+=o[x].vertices.length,!(l>mne));x++)c++;const u=[],f=[],d=[],p=[],y=n[3]<1;for(let x=a;x<c;x++){const m=o[x],g=m.vertices,w=yne(m),E=gne(m,n),A=[];for(let $=0;$<g.length;$++){const k=g[$];u.push(k),f.push(w),p.push(E);const N=u.length-1;A.push(N)}for(let $=2;$<A.length;$++)d.push([A[0],A[$-1],A[$]])}const v={type:"3d",positions:u,normals:f,indices:d,colors:p,transforms:s,isTransparent:y};i.push(v),a=c}return i},gne=(e,t)=>{let n=t;return e.color&&(n=e.color),n&&n.length<4&&n.push(1),n},yne=e=>{if(e.plane)return Zo.clone(e.plane);const t=e.vertices,n=Zo.create();Zo.subtract(n,t[1],t[0]);const r=Zo.create();Zo.subtract(r,t[2],t[0]);const o=Zo.create();return Zo.cross(o,n,r),Zo.normalize(o,o),o};var wne=vne;const qx=Mr,rp=Math.floor(65535/2)-2,xne=(e,t)=>{let{color:n}=e;const r=t.points;if(r.length===0)return[];"color"in t&&(n=t.color);const o=n[3]<1,s=Math.floor(r.length/rp)+1,i=[];for(let a=0;a<s;a++){const l=a*rp,c=Math.min(l+rp,r.length),u=[];let f;for(let v=l;v<c;v++){const x=r[v];f&&(u.push([f[0],f[1],0]),u.push([x[0],x[1],0])),f=x}if(a+1===s&&t.isClosed&&f){const v=r[0];u.push([f[0],f[1],0]),u.push([v[0],v[1],0])}const d=u.map(v=>[0,0,-1]),p=u.map((v,x)=>x),y=t.transforms?qx.clone(t.transforms):qx.create();i.push({type:"2d",positions:u,normals:d,indices:p,transforms:y,color:n,isTransparent:o})}return i};var Ene=xne;const{flatten:_ne,toArray:$ne}=mg,{meshColor:Sne}=g1,Ane=pne,bne=wne,Tne=Ene,Pne=e=>e.map(n=>{const r={drawCmd:n.type==="2d"?"drawLines":"drawMesh",show:!0,transparent:n.isTransparent,useVertexColors:!0};return{geometry:n,visuals:r}}),Cne=(e,...t)=>{const n={color:Sne,smoothNormals:!0},{color:r,smoothNormals:o}=Object.assign({},n,e);t=_ne($ne(t)),t=t.filter(i=>i&&i instanceof Object);const s=[];return t.forEach(i=>{let a=[];"sides"in i?a=Ane({color:r},i):"points"in i?a=Tne({color:r},i):"polygons"in i&&(a=bne({smoothLighting:o,normalThreshold:.3,color:r},i)),s.push(...Pne(a))}),s};var kne=Cne,Qo={prepareRender:aee,drawCommands:{drawGrid:cee,drawAxis:fee,drawMesh:pee,drawLines:xee},cameras:{camera:Yte,orthographic:Sd,perspective:wm},controls:{orbit:dne},entitiesFromSolids:kne};function Mne(e,t){const n=Qo.cameras.perspective,r=Qo.controls.orbit;t=document.getElementById("viewer"),t.style.display="";const o=t.clientWidth,s=t.clientHeight,i={},a={...n.defaults,position:[5e3,0,1e3],fov:.1};console.log("cameraSettings",a),i.camera=Object.assign({},a),n.setProjection(i.camera,i.camera,{width:o,height:s}),n.update(i.camera,i.camera),i.controls=r.defaults;const l={glOptions:{container:t}},c=Qo.prepareRender(l),u={visuals:{drawCmd:"drawGrid",show:!1},size:[500,500],ticks:[25,5]},f={visuals:{drawCmd:"drawAxis",show:!0},size:300},d=Qo.entitiesFromSolids({},e),p={camera:i.camera,drawCommands:{drawAxis:Qo.drawCommands.drawAxis,drawGrid:Qo.drawCommands.drawGrid,drawLines:Qo.drawCommands.drawLines,drawMesh:Qo.drawCommands.drawMesh},entities:[u,f,...d]};let y=!0;const v=()=>{if($[0]||$[1]){const Z=r.rotate({controls:i.controls,camera:i.camera,speed:w},$);i.controls={...i.controls,...Z.controls},y=!0,$=[0,0]}if(k[0]||k[1]){const Z=r.pan({controls:i.controls,camera:i.camera,speed:E},k);i.controls={...i.controls,...Z.controls},k=[0,0],i.camera.position=Z.camera.position,i.camera.target=Z.camera.target,y=!0}if(N){const Z=r.zoom({controls:i.controls,camera:i.camera,speed:A},N);i.controls={...i.controls,...Z.controls},N=0,y=!0}},x=()=>{if(v(),y){const Z=r.update({controls:i.controls,camera:i.camera});i.controls={...i.controls,...Z.controls},y=i.controls.changed,i.camera.position=Z.camera.position,n.update(i.camera),c(p)}window.requestAnimationFrame(x)};window.requestAnimationFrame(x);let m=0,g=0;const w=.002,E=1,A=.08;let $=[0,0],k=[0,0],N=0,X=!1;const j=Z=>{if(!X)return;const Me=m-Z.pageX,we=Z.pageY-g;Z.shiftKey===!0||Z.touches&&Z.touches.length>2?(k[0]+=Me,k[1]+=we):($[0]-=Me,$[1]-=we),m=Z.pageX,g=Z.pageY,Z.preventDefault()},J=Z=>{X=!0,m=Z.pageX,g=Z.pageY,t.setPointerCapture(Z.pointerId)},le=Z=>{X=!1,t.releasePointerCapture(Z.pointerId)},_e=Z=>{N+=Z.deltaY,Z.preventDefault()};t.onpointermove=j,t.onpointerdown=J,t.onpointerup=le,t.onwheel=_e}const Nne={},Zx=500;function Rne(){const e=at.useRef(null),t=tm(Z0),n=at.useCallback(()=>{const s=G5(ad.get()),i=G5(ld.get()),a=Px(s,Zx,-Math.PI/4),l=Px(i,Zx,Math.PI/4),c=ZK(a,l);console.log("combine",c),Mne(c,e.current),Z0.set(c)},[]),r=at.useMemo(()=>je.jsx("div",{id:"viewer",style:{width:800,height:500,backgroundColor:"green",display:"none"}}),[]);at.useEffect(()=>{hM(()=>{mM.set(!0)})},[]);const o=at.useCallback(()=>{const s=Z0.get(),i=ad.get().toLowerCase()+"_"+ld.get().toLowerCase();qK(s,i)},[]);return je.jsxs(y$,{theme:Nne,children:[r,t.length===0&&je.jsx(vM,{onGenerate:n}),t.length!==0&&je.jsx(Zd,{children:je.jsx(kc,{onClick:o,children:"Download"})})]})}op.createRoot(document.getElementById("root")).render(je.jsx(Rne,{}));
